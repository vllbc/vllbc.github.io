{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u7b80\u4ecb \u200b \u8fd9\u662f\u6211\uff08vllbc\uff09\u7684\u7f51\u7ad9\uff0c\u6b22\u8fce\u5927\u5bb6\uff01 \u8fd9\u7b97\u662f\u6211\u7684\u4e2a\u4eba\u535a\u5ba2 \u7528\u6765\u5199\u4e00\u4e9b\u6211\u5e73\u65f6\u5b66\u4e60\u7684\u7b14\u8bb0\u4ec0\u4e48\u7684\uff0c\u6211\u5b66\u7684\u4e1c\u897f\u5f88\u591a\u5f88\u6742\uff0c\u603b\u4e4b\u4ec0\u4e48\u90fd\u6709\u3002 \u76ee\u524d\u6b63\u5728\u5b66\u4e60\u7b97\u6cd5\u548cpytorch\u5e93 \u5e0c\u671b\u5404\u4f4d\u5927\u4f6c\u53ef\u4ee5\u548c\u6211\u591a\u591a\u4ea4\u6d41 \u8054\u7cfb\u65b9\u5f0f\uff1a qq\uff1a1683070754 \u7531\u4e8e\u4e0d\u660e\u539f\u56e0\uff0c\u5bfc\u822a\u680f\u5e38\u5e38\u5931\u6548\uff0c\u56e0\u6b64\u5728\u9996\u9875\u505a\u5bfc\u822a: - \u9996\u9875 - \u7b97\u6cd5\u76f8\u5173 - isbn\u53f7\u7801 - \u6211\u505a\u7684\u7b2c\u4e00\u4e2a\u6253\u8868\u9898 - \u4f4d\u8fd0\u7b97\u7684\u5e94\u7528 - \u4f4d\u8fd0\u7b97\u7684\u5e94\u7528(2) - Python: - \u4ecb\u7ecd - Plotly - Jupyter - \u591a\u7ebf\u7a0b - asyncio\u6a21\u5757\u5f02\u6b65\u7f16\u7a0b - \u6280\u5de7 - \u722c\u866b \u722c\u866b\uff1a - \u57fa\u7840 - \u591a\u7ebf\u7a0b\u722c\u866b\u5b9e\u4f8b Pandas: - \u4ecb\u7ecd - \u5b66\u4e601 - \u5b66\u4e602 - Pytorch: - \u4ecb\u7ecd - start - regression - \u7ebf\u6027\u56de\u5f52\u6a21\u578b - \u4e00\u4e9b\u601d\u8003 - AI\u5b66\u4e60: - \u5b66\u4e60\u9014\u5f84 - \u611f\u77e5\u5668 - flask: - \u51c6\u5907\u5de5\u4f5c - \u5176\u4ed6: - vim - git - regex - sql - \u535a\u5ba2\u540e\u53f0\u6848\u4f8b \u672c\u7f51\u7ad9\u7528 mkdocs \u7f16\u5199\uff0c\u90e8\u7f72\u5728 githubpage \u4e0a\uff0c\u73b0\u5728\u5df2\u7ecf\u8d2d\u4e70\u57df\u540d print(\"welcome to the my site!!\")","title":"\u9996\u9875"},{"location":"#_1","text":"\u200b \u8fd9\u662f\u6211\uff08vllbc\uff09\u7684\u7f51\u7ad9\uff0c\u6b22\u8fce\u5927\u5bb6\uff01 \u8fd9\u7b97\u662f\u6211\u7684\u4e2a\u4eba\u535a\u5ba2 \u7528\u6765\u5199\u4e00\u4e9b\u6211\u5e73\u65f6\u5b66\u4e60\u7684\u7b14\u8bb0\u4ec0\u4e48\u7684\uff0c\u6211\u5b66\u7684\u4e1c\u897f\u5f88\u591a\u5f88\u6742\uff0c\u603b\u4e4b\u4ec0\u4e48\u90fd\u6709\u3002 \u76ee\u524d\u6b63\u5728\u5b66\u4e60\u7b97\u6cd5\u548cpytorch\u5e93 \u5e0c\u671b\u5404\u4f4d\u5927\u4f6c\u53ef\u4ee5\u548c\u6211\u591a\u591a\u4ea4\u6d41","title":"\u7b80\u4ecb"},{"location":"#_2","text":"","title":"\u8054\u7cfb\u65b9\u5f0f\uff1a"},{"location":"#qq1683070754","text":"\u7531\u4e8e\u4e0d\u660e\u539f\u56e0\uff0c\u5bfc\u822a\u680f\u5e38\u5e38\u5931\u6548\uff0c\u56e0\u6b64\u5728\u9996\u9875\u505a\u5bfc\u822a: - \u9996\u9875 - \u7b97\u6cd5\u76f8\u5173 - isbn\u53f7\u7801 - \u6211\u505a\u7684\u7b2c\u4e00\u4e2a\u6253\u8868\u9898 - \u4f4d\u8fd0\u7b97\u7684\u5e94\u7528 - \u4f4d\u8fd0\u7b97\u7684\u5e94\u7528(2) - Python: - \u4ecb\u7ecd - Plotly - Jupyter - \u591a\u7ebf\u7a0b - asyncio\u6a21\u5757\u5f02\u6b65\u7f16\u7a0b - \u6280\u5de7 - \u722c\u866b \u722c\u866b\uff1a - \u57fa\u7840 - \u591a\u7ebf\u7a0b\u722c\u866b\u5b9e\u4f8b Pandas: - \u4ecb\u7ecd - \u5b66\u4e601 - \u5b66\u4e602 - Pytorch: - \u4ecb\u7ecd - start - regression - \u7ebf\u6027\u56de\u5f52\u6a21\u578b - \u4e00\u4e9b\u601d\u8003 - AI\u5b66\u4e60: - \u5b66\u4e60\u9014\u5f84 - \u611f\u77e5\u5668 - flask: - \u51c6\u5907\u5de5\u4f5c - \u5176\u4ed6: - vim - git - regex - sql - \u535a\u5ba2\u540e\u53f0\u6848\u4f8b \u672c\u7f51\u7ad9\u7528 mkdocs \u7f16\u5199\uff0c\u90e8\u7f72\u5728 githubpage \u4e0a\uff0c\u73b0\u5728\u5df2\u7ecf\u8d2d\u4e70\u57df\u540d print(\"welcome to the my site!!\")","title":"qq\uff1a1683070754"},{"location":"AI_learn/AI_PATH/","text":"\u901a\u8fc7\u770b\u5434\u6069\u8fbe\u7684 \u673a\u5668\u5b66\u4e60 \u548c \u6df1\u5ea6\u5b66\u4e60 \u89c6\u9891\u5165\u95e8\uff0c\u7136\u540e\u770b\u914d\u5957\u7684\u8bfe\u540e\u4e60\u9898\u4e0e\u7b14\u8bb0 \u673a\u5668\u5b66\u4e60\u7b14\u8bb0 \u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0 \u4e70\u7684\u4e66\u4e5f\u8981\u8fc7\u8fc7\uff0c\u8ddf\u7740\u5b9e\u73b0\u4e00\u4e0b \u4e00\u5b9a\u8981\u5b9e\u8df5\uff01\u81ea\u5df1\u5199\u4ee3\u7801\u91cd\u65b0\u5b9e\u73b0\u4e00\u904d github \u4e0a\u7684 100days \u9879\u76ee\u8ddf\u7740\u5b8c\u6210\u4e00\u4e0b \u5c3d\u91cf\u90fd\u7528 pytorch \u548c numpy \u5b9e\u73b0\u4e00\u4e0b \u6240\u4ee5\u4e5f\u8981\u5b66\u4e60 pytorch\uff01\uff01\uff01 \u6570\u636e\u5904\u7406\u53bb\u5b9e\u9a8c\u697c\u5b66\u4e60 pandas \u603b\u4e4b\u90fd\u5f88\u91cd\u8981\uff01\uff01","title":"\u5b66\u4e60\u9014\u5f84"},{"location":"AI_learn/AI_PATH/#_1","text":"\u673a\u5668\u5b66\u4e60\u7b14\u8bb0 \u6df1\u5ea6\u5b66\u4e60\u7b14\u8bb0","title":"\u901a\u8fc7\u770b\u5434\u6069\u8fbe\u7684\u673a\u5668\u5b66\u4e60\u548c\u6df1\u5ea6\u5b66\u4e60\u89c6\u9891\u5165\u95e8\uff0c\u7136\u540e\u770b\u914d\u5957\u7684\u8bfe\u540e\u4e60\u9898\u4e0e\u7b14\u8bb0"},{"location":"AI_learn/AI_PATH/#_2","text":"","title":"\u4e70\u7684\u4e66\u4e5f\u8981\u8fc7\u8fc7\uff0c\u8ddf\u7740\u5b9e\u73b0\u4e00\u4e0b"},{"location":"AI_learn/AI_PATH/#_3","text":"","title":"\u4e00\u5b9a\u8981\u5b9e\u8df5\uff01\u81ea\u5df1\u5199\u4ee3\u7801\u91cd\u65b0\u5b9e\u73b0\u4e00\u904d"},{"location":"AI_learn/AI_PATH/#github100days","text":"","title":"github\u4e0a\u7684100days\u9879\u76ee\u8ddf\u7740\u5b8c\u6210\u4e00\u4e0b"},{"location":"AI_learn/AI_PATH/#pytorchnumpy","text":"","title":"\u5c3d\u91cf\u90fd\u7528pytorch\u548cnumpy\u5b9e\u73b0\u4e00\u4e0b"},{"location":"AI_learn/AI_PATH/#pytorch","text":"","title":"\u6240\u4ee5\u4e5f\u8981\u5b66\u4e60pytorch\uff01\uff01\uff01"},{"location":"AI_learn/AI_PATH/#pandas","text":"","title":"\u6570\u636e\u5904\u7406\u53bb\u5b9e\u9a8c\u697c\u5b66\u4e60pandas"},{"location":"AI_learn/AI_PATH/#_4","text":"","title":"\u603b\u4e4b\u90fd\u5f88\u91cd\u8981\uff01\uff01"},{"location":"AI_learn/ganzhiqi/","text":"","title":"\u611f\u77e5\u5668"},{"location":"flask/","text":"\u5173\u4e8e\u865a\u62df\u73af\u5883\u7684\u914d\u7f6e \u7528\u5230\u7684\u5de5\u5177\u5c31\u662f\u6211\u4eec\u6240\u719f\u77e5\u7684pipenv \u9996\u5148\u5148\u7528pip\u8fdb\u884c\u5b89\u88c5 sudo pip3 install pipenv \u7136\u540e\u5728\u4f60\u7684flask\u9879\u76ee\u91cc\u9762\u6267\u884c\u5982\u4e0b\u547d\u4ee4 pipenv shell \u8fd9\u4f1a\u5728\u5c06\u4f60\u7684\u9879\u76ee\u6587\u4ef6\u521b\u5efa\u4e00\u4e2a\u865a\u62df\u73af\u5883 \uff08\u5173\u4e8epipenv\u7684\u66f4\u591a\u7528\u6cd5\u53c2\u8003 \u5b98\u7f51 \uff09 \u521b\u5efa\u7684\u865a\u62df\u73af\u5883\u7684\u7f16\u8bd1\u5668\u7684\u76ee\u5f55\u4e5f\u4f1a\u544a\u8bc9\u4f60 flask\u7a0b\u5e8f\u5728\u5f00\u53d1\u7684\u65f6\u5019\u9700\u8981\u7528\u5230\u5404\u79cd\u73af\u5883\u53d8\u91cf\uff0c\u6bd4\u5982\u5bc6\u5319\u4e4b\u7c7b\u7684 \u8fd9\u5c31\u9700\u8981\u6211\u4eec\u5728\u865a\u62df\u73af\u5883\u4e2d\u521b\u5efa\u4e00\u4e9b\u6587\u4ef6\u6765\u4fdd\u5b58\u6211\u4eec\u7684\u73af\u5883\u53d8\u91cf\uff0c\u4ee5\u514d\u5168\u5c40\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u800c\u5e26\u6765\u7684\u9ebb\u70e6\u3002 \u5728\u8fd9\u4e4b\u524d\u9700\u8981\u5148\u5b89\u88c5\u4e00\u4e2a\u53ebpython-dotenv\u7684\u5e93\uff08\u865a\u62df\u73af\u5883\u4e0b\uff09 \u5728\u521a\u624d\u7684\u865a\u62df\u73af\u5883\u4e2d\u6267\u884c\u5982\u4e0b\u547d\u4ee4 pipenv install python-dotenv \u7136\u540e\u5728\u4f60\u7684\u865a\u62df\u73af\u5883\u6839\u76ee\u5f55\u4e0b\u521b\u5efa.env \u548c.flaskenv\u4e24\u4e2a\u6587\u4ef6 \u8fd9\u5c31\u662f\u6211\u4eec\u7684\u73af\u5883\u53d8\u91cf\u7684\u6587\u4ef6\u4e86\uff0c\u4ee5\u540e\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u9700\u8981\u7528\u5230\u7684\u73af\u5883\u53d8\u91cf\u90fd\u8981\u4ece\u8fd9\u91cc\u83b7\u53d6\u3002 \u6700\u540e\u5b89\u88c5\u5173\u4e8eflask\u7684\u5404\u79cd\u5e93\u5c31ok\u4e86","title":"\u51c6\u5907\u5de5\u4f5c"},{"location":"flask/#_1","text":"","title":"\u5173\u4e8e\u865a\u62df\u73af\u5883\u7684\u914d\u7f6e"},{"location":"flask/#pipenv","text":"","title":"\u7528\u5230\u7684\u5de5\u5177\u5c31\u662f\u6211\u4eec\u6240\u719f\u77e5\u7684pipenv"},{"location":"flask/#pip","text":"sudo pip3 install pipenv \u7136\u540e\u5728\u4f60\u7684flask\u9879\u76ee\u91cc\u9762\u6267\u884c\u5982\u4e0b\u547d\u4ee4 pipenv shell \u8fd9\u4f1a\u5728\u5c06\u4f60\u7684\u9879\u76ee\u6587\u4ef6\u521b\u5efa\u4e00\u4e2a\u865a\u62df\u73af\u5883 \uff08\u5173\u4e8epipenv\u7684\u66f4\u591a\u7528\u6cd5\u53c2\u8003 \u5b98\u7f51 \uff09 \u521b\u5efa\u7684\u865a\u62df\u73af\u5883\u7684\u7f16\u8bd1\u5668\u7684\u76ee\u5f55\u4e5f\u4f1a\u544a\u8bc9\u4f60 flask\u7a0b\u5e8f\u5728\u5f00\u53d1\u7684\u65f6\u5019\u9700\u8981\u7528\u5230\u5404\u79cd\u73af\u5883\u53d8\u91cf\uff0c\u6bd4\u5982\u5bc6\u5319\u4e4b\u7c7b\u7684 \u8fd9\u5c31\u9700\u8981\u6211\u4eec\u5728\u865a\u62df\u73af\u5883\u4e2d\u521b\u5efa\u4e00\u4e9b\u6587\u4ef6\u6765\u4fdd\u5b58\u6211\u4eec\u7684\u73af\u5883\u53d8\u91cf\uff0c\u4ee5\u514d\u5168\u5c40\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u800c\u5e26\u6765\u7684\u9ebb\u70e6\u3002 \u5728\u8fd9\u4e4b\u524d\u9700\u8981\u5148\u5b89\u88c5\u4e00\u4e2a\u53ebpython-dotenv\u7684\u5e93\uff08\u865a\u62df\u73af\u5883\u4e0b\uff09 \u5728\u521a\u624d\u7684\u865a\u62df\u73af\u5883\u4e2d\u6267\u884c\u5982\u4e0b\u547d\u4ee4 pipenv install python-dotenv \u7136\u540e\u5728\u4f60\u7684\u865a\u62df\u73af\u5883\u6839\u76ee\u5f55\u4e0b\u521b\u5efa.env \u548c.flaskenv\u4e24\u4e2a\u6587\u4ef6 \u8fd9\u5c31\u662f\u6211\u4eec\u7684\u73af\u5883\u53d8\u91cf\u7684\u6587\u4ef6\u4e86\uff0c\u4ee5\u540e\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u9700\u8981\u7528\u5230\u7684\u73af\u5883\u53d8\u91cf\u90fd\u8981\u4ece\u8fd9\u91cc\u83b7\u53d6\u3002 \u6700\u540e\u5b89\u88c5\u5173\u4e8eflask\u7684\u5404\u79cd\u5e93\u5c31ok\u4e86","title":"\u9996\u5148\u5148\u7528pip\u8fdb\u884c\u5b89\u88c5"},{"location":"others/git/","text":"git\u7b14\u8bb0 git diff \uff1a\u5f53\u5de5\u4f5c\u533a\u6709\u6539\u52a8\uff0c\u4e34\u65f6\u533a\u4e3a\u7a7a\uff0cdiff\u7684\u5bf9\u6bd4\u662f\u201c\u5de5\u4f5c\u533a\u201d\u4e0e\u6700\u540e\u4e00\u6b21commit\u63d0\u4ea4\u7684\u4ed3\u5e93\u7684\u5171\u540c\u6587\u4ef6\u201d\uff1b\u5f53\u5de5\u4f5c\u533a\u6709\u6539\u52a8\uff0c\u4e34\u65f6\u533a\u4e0d\u4e3a\u7a7a\uff0cdiff\u5bf9\u6bd4\u7684\u662f\u201c\u5de5\u4f5c\u533a\u201d\u4e0e\u201c\u6682\u5b58\u533a\u201d\u7684\u5171\u540c\u6587\u4ef6\u201d\u3002 git diff --cached \uff1a\u663e\u793a\u6682\u5b58\u533a\u4e0e\u6700\u540e\u4e00\u6b21commit\u7684\u6539\u52a8\u3002 git diff <\u5206\u652f1> <\u5206\u652f2> \u663e\u793a\u4e24\u4e2a\u5206\u652f\u6700\u540e\u4e00\u6b21commit\u7684\u6539\u52a8\u3002 git init \u521d\u59cb\u5316\u4e00\u4e2a\u4ed3\u5e93 git add . \u5c06\u9664 .gitignore \u4e2d\u58f0\u660e\u7684\u6240\u6709\u6587\u4ef6\u52a0\u5165\u6682\u5b58\u533a git commit -m \"\" \u63d0\u4ea4\u5230\u5de5\u4f5c\u533a git push \u63d0\u4ea4\u5230\u8fdc\u7a0b\u5e93 git pull \u5c06\u6539\u52a8\u62c9\u5230\u672c\u5730\u5e93 git log \u67e5\u770b\u63d0\u4ea4\u5386\u53f2 git log --oneline \u7b80\u6d01\u8f93\u51fa git branch xxx \u5efa\u7acb\u5206\u652fxxx \u7136\u540e\u7528 git checkout xxx \u5207\u6362\u5230\u5206\u652fxxx \u6216\u8005\u7528 git checkout -b xxx \u5b8c\u6210\u540c\u6837\u7684\u64cd\u4f5c git checkout \u56de\u9000\u7248\u672c\u5373head\u5206\u79bb \u4f46master\u4e0d\u53d8 git reset --hard HEAD^ \u56de\u9000\u4e00\u4e2a\u7248\u672c\uff08master\u4e5f\u6539\u53d8\uff09 git reset --hard HEAD~n \u56de\u9000n\u4e2a\u7248\u672c * * git reset --hard xxxxxx xxxxxx \u4e3a\u7248\u672c\u53f7 \u5373\u4e3agit log\u663e\u793a\u7684\u6bcf\u4e00\u4e2a\u7248\u672c\u53f7 \u4e00\u822c\u4e3a\u524d\u516d\u4f4d git merge \u6bd4\u5982\u5728master\u5206\u652f\u91cc \u6267\u884cgit merge xxx \u5c06xxx\u5206\u652f\u5408\u5e76\u5230master\u4e2d\uff0c\u4e00\u822c\u9879\u76ee\u5f00\u53d1\uff0c\u4e00\u4eba\u4e00\u4e2a\u5206\u652f\uff0c\u6700\u540e\u63d0\u4ea4\u7684\u65f6\u5019\u5408\u5e76\u518d\u63d0\u4ea4\u3002 git branch -f master~3 \u5c06\u5206\u652f\u5f3a\u5236\u56de\u9000\u4e09\u4e2a\u7248\u672c\uff0c\u4f46head\u4e0d\u52a8 \u5f53\u9700\u8981\u53e6\u4e00\u4e2a\u5206\u652f\u7684\u6240\u6709\u6539\u52a8\u65f6\uff0c\u7528 git merge \uff0c\u4f46\u5f53\u9700\u8981\u90e8\u5206\u6539\u52a8\u65f6\u5019\uff0c\u8981\u7528 git cherry-pick xxx xxx\u4e3a\u54c8\u5e0c\u503c\u6216\u8005\u5206\u652f\u540d\uff0c\u6307\u5b9a\u4e3a\u5206\u652f\u540d\u65f6\u5019\uff0c\u5c06\u5206\u652f\u7684\u6700\u65b0\u6539\u52a8\u5408\u5e76\u8fc7\u6765 \u5f53\u4e0d\u77e5\u9053\u63d0\u4ea4\u7684\u54c8\u5e0c\u503c\u65f6\uff0c\u53ef\u4ee5\u7528 git rebase -i HEAD~x \u6765\u53ef\u89c6\u5316\u7ba1\u7406\uff0c\u53ef\u4ee5\u8c03\u6574\u63d0\u4ea4\u7684\u987a\u5e8f\uff0c\u53ef\u4ee5\u5220\u9664\u4e0d\u60f3\u8981\u7684\u63d0\u4ea4\uff0c\u6216\u5408\u5e76\u63d0\u4ea4 git rebase xx1 xx2 \u5c06xx2\u5206\u652f\u4e0a\u7684\u63d0\u4ea4\u8bb0\u5f55\u653e\u5230xx1\u540e\u9762 git pull \u62c9\u53d6\u8fdc\u7a0b\u4ed3\u5e93\u7684\u66f4\u65b0 \u5982\u679c\u8fdc\u7a0b\u4ed3\u5e93\u540c\u4e00\u4e2a\u5206\u652f\u4e0a\u5df2\u7ecf\u88ab\u4fee\u6539\uff0c\u90a3\u4e48\u7528git pull --rebase\u62c9\u53d6\u6700\u65b0\u7684\u4fee\u6539\u5e76\u5c06\u81ea\u5df1\u7684\u63d0\u4ea4\u653e\u5230\u8fd9\u4e2a\u4fee\u6539\u540e\u9762\u3002 git fetch \u83b7\u53d6\u8fdc\u7a0b\u4ed3\u5e93\u7684\u6570\u636e\uff0c\u4e0d\u4f1a\u6539\u53d8\u4f60\u672c\u5730\u4ed3\u5e93\u7684\u72b6\u6001\uff0c\u4e0d\u4f1a\u66f4\u65b0\u4f60\u7684master,\u4e5f\u6ca1\u6709\u66f4\u6539\u4f60\u7684\u672c\u5730\u78c1\u76d8\u6587\u4ef6\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u5355\u7eaf\u7684\u4e0b\u8f7d\u64cd\u4f5c\u3002\u800c git pull \u76f8\u5f53\u4e8e git fetch + git merge \u5373\u6293\u53d6\u540e\u5408\u5e76","title":"git"},{"location":"others/git/#git","text":"git diff \uff1a\u5f53\u5de5\u4f5c\u533a\u6709\u6539\u52a8\uff0c\u4e34\u65f6\u533a\u4e3a\u7a7a\uff0cdiff\u7684\u5bf9\u6bd4\u662f\u201c\u5de5\u4f5c\u533a\u201d\u4e0e\u6700\u540e\u4e00\u6b21commit\u63d0\u4ea4\u7684\u4ed3\u5e93\u7684\u5171\u540c\u6587\u4ef6\u201d\uff1b\u5f53\u5de5\u4f5c\u533a\u6709\u6539\u52a8\uff0c\u4e34\u65f6\u533a\u4e0d\u4e3a\u7a7a\uff0cdiff\u5bf9\u6bd4\u7684\u662f\u201c\u5de5\u4f5c\u533a\u201d\u4e0e\u201c\u6682\u5b58\u533a\u201d\u7684\u5171\u540c\u6587\u4ef6\u201d\u3002 git diff --cached \uff1a\u663e\u793a\u6682\u5b58\u533a\u4e0e\u6700\u540e\u4e00\u6b21commit\u7684\u6539\u52a8\u3002 git diff <\u5206\u652f1> <\u5206\u652f2> \u663e\u793a\u4e24\u4e2a\u5206\u652f\u6700\u540e\u4e00\u6b21commit\u7684\u6539\u52a8\u3002 git init \u521d\u59cb\u5316\u4e00\u4e2a\u4ed3\u5e93 git add . \u5c06\u9664 .gitignore \u4e2d\u58f0\u660e\u7684\u6240\u6709\u6587\u4ef6\u52a0\u5165\u6682\u5b58\u533a git commit -m \"\" \u63d0\u4ea4\u5230\u5de5\u4f5c\u533a git push \u63d0\u4ea4\u5230\u8fdc\u7a0b\u5e93 git pull \u5c06\u6539\u52a8\u62c9\u5230\u672c\u5730\u5e93 git log \u67e5\u770b\u63d0\u4ea4\u5386\u53f2 git log --oneline \u7b80\u6d01\u8f93\u51fa git branch xxx \u5efa\u7acb\u5206\u652fxxx \u7136\u540e\u7528 git checkout xxx \u5207\u6362\u5230\u5206\u652fxxx \u6216\u8005\u7528 git checkout -b xxx \u5b8c\u6210\u540c\u6837\u7684\u64cd\u4f5c git checkout \u56de\u9000\u7248\u672c\u5373head\u5206\u79bb \u4f46master\u4e0d\u53d8 git reset --hard HEAD^ \u56de\u9000\u4e00\u4e2a\u7248\u672c\uff08master\u4e5f\u6539\u53d8\uff09 git reset --hard HEAD~n \u56de\u9000n\u4e2a\u7248\u672c * * git reset --hard xxxxxx xxxxxx \u4e3a\u7248\u672c\u53f7 \u5373\u4e3agit log\u663e\u793a\u7684\u6bcf\u4e00\u4e2a\u7248\u672c\u53f7 \u4e00\u822c\u4e3a\u524d\u516d\u4f4d git merge \u6bd4\u5982\u5728master\u5206\u652f\u91cc \u6267\u884cgit merge xxx \u5c06xxx\u5206\u652f\u5408\u5e76\u5230master\u4e2d\uff0c\u4e00\u822c\u9879\u76ee\u5f00\u53d1\uff0c\u4e00\u4eba\u4e00\u4e2a\u5206\u652f\uff0c\u6700\u540e\u63d0\u4ea4\u7684\u65f6\u5019\u5408\u5e76\u518d\u63d0\u4ea4\u3002 git branch -f master~3 \u5c06\u5206\u652f\u5f3a\u5236\u56de\u9000\u4e09\u4e2a\u7248\u672c\uff0c\u4f46head\u4e0d\u52a8 \u5f53\u9700\u8981\u53e6\u4e00\u4e2a\u5206\u652f\u7684\u6240\u6709\u6539\u52a8\u65f6\uff0c\u7528 git merge \uff0c\u4f46\u5f53\u9700\u8981\u90e8\u5206\u6539\u52a8\u65f6\u5019\uff0c\u8981\u7528 git cherry-pick xxx xxx\u4e3a\u54c8\u5e0c\u503c\u6216\u8005\u5206\u652f\u540d\uff0c\u6307\u5b9a\u4e3a\u5206\u652f\u540d\u65f6\u5019\uff0c\u5c06\u5206\u652f\u7684\u6700\u65b0\u6539\u52a8\u5408\u5e76\u8fc7\u6765 \u5f53\u4e0d\u77e5\u9053\u63d0\u4ea4\u7684\u54c8\u5e0c\u503c\u65f6\uff0c\u53ef\u4ee5\u7528 git rebase -i HEAD~x \u6765\u53ef\u89c6\u5316\u7ba1\u7406\uff0c\u53ef\u4ee5\u8c03\u6574\u63d0\u4ea4\u7684\u987a\u5e8f\uff0c\u53ef\u4ee5\u5220\u9664\u4e0d\u60f3\u8981\u7684\u63d0\u4ea4\uff0c\u6216\u5408\u5e76\u63d0\u4ea4 git rebase xx1 xx2 \u5c06xx2\u5206\u652f\u4e0a\u7684\u63d0\u4ea4\u8bb0\u5f55\u653e\u5230xx1\u540e\u9762 git pull \u62c9\u53d6\u8fdc\u7a0b\u4ed3\u5e93\u7684\u66f4\u65b0 \u5982\u679c\u8fdc\u7a0b\u4ed3\u5e93\u540c\u4e00\u4e2a\u5206\u652f\u4e0a\u5df2\u7ecf\u88ab\u4fee\u6539\uff0c\u90a3\u4e48\u7528git pull --rebase\u62c9\u53d6\u6700\u65b0\u7684\u4fee\u6539\u5e76\u5c06\u81ea\u5df1\u7684\u63d0\u4ea4\u653e\u5230\u8fd9\u4e2a\u4fee\u6539\u540e\u9762\u3002 git fetch \u83b7\u53d6\u8fdc\u7a0b\u4ed3\u5e93\u7684\u6570\u636e\uff0c\u4e0d\u4f1a\u6539\u53d8\u4f60\u672c\u5730\u4ed3\u5e93\u7684\u72b6\u6001\uff0c\u4e0d\u4f1a\u66f4\u65b0\u4f60\u7684master,\u4e5f\u6ca1\u6709\u66f4\u6539\u4f60\u7684\u672c\u5730\u78c1\u76d8\u6587\u4ef6\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u5355\u7eaf\u7684\u4e0b\u8f7d\u64cd\u4f5c\u3002\u800c git pull \u76f8\u5f53\u4e8e git fetch + git merge \u5373\u6293\u53d6\u540e\u5408\u5e76","title":"git\u7b14\u8bb0"},{"location":"others/one_test/","text":"\u7528\u547d\u4ee4\u884c\u5b9e\u73b0\u535a\u5ba2\u81ea\u52a8\u66f4\u65b0\uff0c\u7c7b\u4f3c\u4e8e\u7f51\u7ad9\u540e\u7aef \u9700\u8981\u7528\u5230\u7684\u5e93\u6709 os \u6807\u51c6\u5e93 \u9700\u8981\u7684\u547d\u4ee4\u6709: os.system(\"\") \u7528\u6765\u6a21\u4effdos\u547d\u4ee4\uff0c\u4e3b\u8981\u7528\u6765\u751f\u6210\u7ad9\u70b9\uff0c\u548cgit push os.listdir(\"\") \u83b7\u53d6\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709\u6587\u4ef6\uff0c\u7528\u6765\u590d\u5236site\u76ee\u5f55\u7684\u6587\u4ef6\u5230\u4e2a\u4eba\u7f51\u7ad9\u9879\u76ee\u4e0a yaml \u5e93\uff0c\u7528\u6765\u64cd\u4f5cmkdocs\u7684\u914d\u7f6e\u6587\u4ef6,\u5373 mkdocs.yml shutil \u5e93\uff0c\u7528\u6765\u590d\u5236\u5e76\u66ff\u6362\u6587\u4ef6 \u914d\u7f6e\u6587\u4ef6\uff0c config.yml \u7528\u6765\u83b7\u53d6\u5404\u9700\u8981\u7684\u6587\u4ef6\u8def\u5f84 \u5927\u6982\u4ee3\u7801\u5982\u4e0b import os import sys import yaml import shutil messge = '' with open(r\"config.yml\",'r',encoding='utf-8') as fp: res = fp.read() data = yaml.load(res,Loader=yaml.FullLoader) mkdocs_yaml = data['mkdocs_yaml'] mkdocs_work = data['mkdocs_work_folder'] githubpage = data['githubpage_folder'] with open(mkdocs_yaml,'r',encoding='utf-8') as fp: result = fp.read() data = yaml.load(result,Loader=yaml.FullLoader) print(\"\u6ce8\u610f\u5728\u6267\u884c\u524d\u8981\u786e\u4fdd\u5355\u8bcd\u62fc\u5bf9\uff0c\u800c\u4e14\u6709\u5bf9\u5e94\u6587\u4ef6!!!!!\") clas = input(\"\u662f\u5426\u4e3a\u65b0\u6587\u4ef6?(yes/no>>>\") if clas == \"yes\": while True: types = input(\"\u8f93\u5165\u8981\u52a0\u5165\u7684\u7c7b\u578b>>>\") names = input(\"\u8bf7\u8f93\u5165\u540d\u5b57>>>\") dirs = input(\"\u8f93\u5165\u6587\u4ef6\u7684\u8def\u5f84>>>\") messge = input(\"\u63d0\u4ea4\u4fe1\u606f>>>\") if input(\"\u68c0\u67e5\u662f\u5426\u6709\u9519\u8bef(yes/no)>>>\") == 'yes': continue else: break for index,name in enumerate(data['nav']): if name.get(types): data['nav'][index][types].append({names:dirs}) with open(mkdocs_yaml,'w',encoding='utf-8') as fp: yaml.dump(data,fp,allow_unicode=True) else: messge = input(\"\u8f93\u5165\u63d0\u4ea4\u4fe1\u606f>>>\") os.system(f\"cd {mkdocs_work} && mkdocs build --clean\") #\u66ff\u6362\u6587\u4ef6 def copyFiles(sourceDir,targetDir): if sourceDir.find(\"exceptionfolder\")>0: return for file in os.listdir(sourceDir): sourceFile = os.path.join(sourceDir,file) targetFile = os.path.join(targetDir,file) if os.path.isfile(sourceFile): if not os.path.exists(targetDir): os.makedirs(targetDir) if not os.path.exists(targetFile) or (os.path.exists(targetFile) and (os.path.getsize(targetFile) != os.path.getsize(sourceFile))): open(targetFile, \"wb\").write(open(sourceFile, \"rb\").read()) print(targetFile+ \" copy succeeded\") if os.path.isdir(sourceFile): copyFiles(sourceFile, targetFile) copyFiles(f\"{mkdocs_work}\\site\",githubpage) if messge != \"\": os.system(f'cd {githubpage} && git add . && git commit -m \"{messge}\" && git push origin master') print(\"all works OK!!\") \u4ee3\u7801\u975e\u5e38\u7b80\u5355\uff0c\u552f\u4e00\u7684\u6280\u672f\u70b9\u5c31\u662f\u590d\u5236\u4e00\u4e2a\u76ee\u5f55\u7684\u6240\u6709\u6587\u4ef6\u4ee5\u53ca\u5b50\u6587\u4ef6\u5230\u53e6\u4e00\u4e2a\u6587\u4ef6\u5939\uff0c\u7528\u5230\u4e86\u9012\u5f52\u3002 \u672c\u535a\u5ba2\u5c31\u662f\u901a\u8fc7\u8fd9\u4e2a\u5de5\u5177\u63d0\u4ea4\u7684\uff01","title":"\u535a\u5ba2\u540e\u53f0\u6848\u4f8b"},{"location":"others/one_test/#_1","text":"\u9700\u8981\u7528\u5230\u7684\u5e93\u6709 os \u6807\u51c6\u5e93 \u9700\u8981\u7684\u547d\u4ee4\u6709: os.system(\"\") \u7528\u6765\u6a21\u4effdos\u547d\u4ee4\uff0c\u4e3b\u8981\u7528\u6765\u751f\u6210\u7ad9\u70b9\uff0c\u548cgit push os.listdir(\"\") \u83b7\u53d6\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709\u6587\u4ef6\uff0c\u7528\u6765\u590d\u5236site\u76ee\u5f55\u7684\u6587\u4ef6\u5230\u4e2a\u4eba\u7f51\u7ad9\u9879\u76ee\u4e0a yaml \u5e93\uff0c\u7528\u6765\u64cd\u4f5cmkdocs\u7684\u914d\u7f6e\u6587\u4ef6,\u5373 mkdocs.yml shutil \u5e93\uff0c\u7528\u6765\u590d\u5236\u5e76\u66ff\u6362\u6587\u4ef6 \u914d\u7f6e\u6587\u4ef6\uff0c config.yml \u7528\u6765\u83b7\u53d6\u5404\u9700\u8981\u7684\u6587\u4ef6\u8def\u5f84 \u5927\u6982\u4ee3\u7801\u5982\u4e0b import os import sys import yaml import shutil messge = '' with open(r\"config.yml\",'r',encoding='utf-8') as fp: res = fp.read() data = yaml.load(res,Loader=yaml.FullLoader) mkdocs_yaml = data['mkdocs_yaml'] mkdocs_work = data['mkdocs_work_folder'] githubpage = data['githubpage_folder'] with open(mkdocs_yaml,'r',encoding='utf-8') as fp: result = fp.read() data = yaml.load(result,Loader=yaml.FullLoader) print(\"\u6ce8\u610f\u5728\u6267\u884c\u524d\u8981\u786e\u4fdd\u5355\u8bcd\u62fc\u5bf9\uff0c\u800c\u4e14\u6709\u5bf9\u5e94\u6587\u4ef6!!!!!\") clas = input(\"\u662f\u5426\u4e3a\u65b0\u6587\u4ef6?(yes/no>>>\") if clas == \"yes\": while True: types = input(\"\u8f93\u5165\u8981\u52a0\u5165\u7684\u7c7b\u578b>>>\") names = input(\"\u8bf7\u8f93\u5165\u540d\u5b57>>>\") dirs = input(\"\u8f93\u5165\u6587\u4ef6\u7684\u8def\u5f84>>>\") messge = input(\"\u63d0\u4ea4\u4fe1\u606f>>>\") if input(\"\u68c0\u67e5\u662f\u5426\u6709\u9519\u8bef(yes/no)>>>\") == 'yes': continue else: break for index,name in enumerate(data['nav']): if name.get(types): data['nav'][index][types].append({names:dirs}) with open(mkdocs_yaml,'w',encoding='utf-8') as fp: yaml.dump(data,fp,allow_unicode=True) else: messge = input(\"\u8f93\u5165\u63d0\u4ea4\u4fe1\u606f>>>\") os.system(f\"cd {mkdocs_work} && mkdocs build --clean\") #\u66ff\u6362\u6587\u4ef6 def copyFiles(sourceDir,targetDir): if sourceDir.find(\"exceptionfolder\")>0: return for file in os.listdir(sourceDir): sourceFile = os.path.join(sourceDir,file) targetFile = os.path.join(targetDir,file) if os.path.isfile(sourceFile): if not os.path.exists(targetDir): os.makedirs(targetDir) if not os.path.exists(targetFile) or (os.path.exists(targetFile) and (os.path.getsize(targetFile) != os.path.getsize(sourceFile))): open(targetFile, \"wb\").write(open(sourceFile, \"rb\").read()) print(targetFile+ \" copy succeeded\") if os.path.isdir(sourceFile): copyFiles(sourceFile, targetFile) copyFiles(f\"{mkdocs_work}\\site\",githubpage) if messge != \"\": os.system(f'cd {githubpage} && git add . && git commit -m \"{messge}\" && git push origin master') print(\"all works OK!!\") \u4ee3\u7801\u975e\u5e38\u7b80\u5355\uff0c\u552f\u4e00\u7684\u6280\u672f\u70b9\u5c31\u662f\u590d\u5236\u4e00\u4e2a\u76ee\u5f55\u7684\u6240\u6709\u6587\u4ef6\u4ee5\u53ca\u5b50\u6587\u4ef6\u5230\u53e6\u4e00\u4e2a\u6587\u4ef6\u5939\uff0c\u7528\u5230\u4e86\u9012\u5f52\u3002 \u672c\u535a\u5ba2\u5c31\u662f\u901a\u8fc7\u8fd9\u4e2a\u5de5\u5177\u63d0\u4ea4\u7684\uff01","title":"\u7528\u547d\u4ee4\u884c\u5b9e\u73b0\u535a\u5ba2\u81ea\u52a8\u66f4\u65b0\uff0c\u7c7b\u4f3c\u4e8e\u7f51\u7ad9\u540e\u7aef"},{"location":"others/regex/","text":"\u6b63\u5219\u8868\u8fbe\u5f0f [abcd] \u5339\u914d\u4e2d\u62ec\u53f7\u91cc\u7684\u6240\u6709\u5b57\u7b26 [^abcd] \u5339\u914d\u9664\u4e86\u62ec\u53f7\u91cc\u7684\u6240\u6709\u5b57\u7b26 [A-Za-z] \u5339\u914d\u6240\u6709\u5b57\u6bcd [\\s\\S] \\s \u662f\u5339\u914d\u6240\u6709\u7a7a\u767d\u7b26\uff0c\u5305\u62ec\u6362\u884c\uff0c\\S \u975e\u7a7a\u767d\u7b26\uff0c\u5305\u62ec\u6362\u884c [\\w] \u5339\u914d\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf\u3002\u7b49\u4ef7\u4e8e [A-Za-z0-9_] \u5339\u914d\u6709\u7279\u6b8a\u542b\u4e49\u7684\uff0c\u6bd4\u5982* ^ \u7b49 \u8bb0\u5f97\u8981\u52a0\u4e0a\u53cd\u659c\u6760\u8fdb\u884c\u8f6c\u4e49 \uff1f\u5339\u914d\u524d\u9762\u7684\u8868\u8fbe\u5f0f0\u6b21\u62161\u6b21 .\u5339\u914d\u9664\\n\u5916\u7684\u4efb\u610f\u5b57\u7b26 +\u5339\u914d\u524d\u9762\u7684\u8868\u8fbe\u5f0f1\u6b21\u6216\u591a\u6b21 *\u5339\u914d\u524d\u9762\u7684\u8868\u8fbe\u5f0f0\u6b21\u6216\u591a\u6b21 {n}\u5339\u914dn\u6b21\uff0c{n,m}\u6700\u5c11\u5339\u914dn\u6b21\uff0c\u6700\u591am\u6b21\uff0c{n,}\u81f3\u5c11\u5339\u914dn\u6b21 \u5b9a\u4f4d\u7b26\uff1a^ $ \\b \\B \u5373\u9650\u5b9a\u5728\u54ea\u91cc\u5339\u914d \uff08\uff09\u7075\u6d3b\u5e94\u7528 [.]\u7b49\u4ef7\u4e8e\\. (^[0-9])+ //\u5339\u914d\u6709\u4e00\u81f3\u591a\u4e2a\u6570\u5b57\u7684\u5b57\u7b26\u4e32\u7ec4\u5408 [^[0-9]]+ // \u5339\u914d\u6709\u4e00\u81f3\u591a\u4e2a\u4e0d\u542b\u6570\u5b57\u7684\u5b57\u7b26\u4e32\u7ec4\u5408","title":"regex"},{"location":"others/regex/#_1","text":"[abcd] \u5339\u914d\u4e2d\u62ec\u53f7\u91cc\u7684\u6240\u6709\u5b57\u7b26 [^abcd] \u5339\u914d\u9664\u4e86\u62ec\u53f7\u91cc\u7684\u6240\u6709\u5b57\u7b26 [A-Za-z] \u5339\u914d\u6240\u6709\u5b57\u6bcd [\\s\\S] \\s \u662f\u5339\u914d\u6240\u6709\u7a7a\u767d\u7b26\uff0c\u5305\u62ec\u6362\u884c\uff0c\\S \u975e\u7a7a\u767d\u7b26\uff0c\u5305\u62ec\u6362\u884c [\\w] \u5339\u914d\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf\u3002\u7b49\u4ef7\u4e8e [A-Za-z0-9_] \u5339\u914d\u6709\u7279\u6b8a\u542b\u4e49\u7684\uff0c\u6bd4\u5982* ^ \u7b49 \u8bb0\u5f97\u8981\u52a0\u4e0a\u53cd\u659c\u6760\u8fdb\u884c\u8f6c\u4e49 \uff1f\u5339\u914d\u524d\u9762\u7684\u8868\u8fbe\u5f0f0\u6b21\u62161\u6b21 .\u5339\u914d\u9664\\n\u5916\u7684\u4efb\u610f\u5b57\u7b26 +\u5339\u914d\u524d\u9762\u7684\u8868\u8fbe\u5f0f1\u6b21\u6216\u591a\u6b21 *\u5339\u914d\u524d\u9762\u7684\u8868\u8fbe\u5f0f0\u6b21\u6216\u591a\u6b21 {n}\u5339\u914dn\u6b21\uff0c{n,m}\u6700\u5c11\u5339\u914dn\u6b21\uff0c\u6700\u591am\u6b21\uff0c{n,}\u81f3\u5c11\u5339\u914dn\u6b21 \u5b9a\u4f4d\u7b26\uff1a^ $ \\b \\B \u5373\u9650\u5b9a\u5728\u54ea\u91cc\u5339\u914d \uff08\uff09\u7075\u6d3b\u5e94\u7528 [.]\u7b49\u4ef7\u4e8e\\. (^[0-9])+ //\u5339\u914d\u6709\u4e00\u81f3\u591a\u4e2a\u6570\u5b57\u7684\u5b57\u7b26\u4e32\u7ec4\u5408 [^[0-9]]+ // \u5339\u914d\u6709\u4e00\u81f3\u591a\u4e2a\u4e0d\u542b\u6570\u5b57\u7684\u5b57\u7b26\u4e32\u7ec4\u5408","title":"\u6b63\u5219\u8868\u8fbe\u5f0f"},{"location":"others/sql/","text":"sql\u5b66\u4e60","title":"sql"},{"location":"others/sql/#sql","text":"","title":"sql\u5b66\u4e60"},{"location":"others/vim/","text":"vim\u7b14\u8bb0 hjkl \u5206\u522b\u5bf9\u5e94\u5de6\u4e0b\u4e0a\u53f3** esc \u5207\u6362\u5230\u547d\u4ee4\u6a21\u5f0f\uff0cioaIOA\u5207\u6362\u5230\u8f93\u5165\u6a21\u5f0f\uff0c:\u8fdb\u5165\u5e95\u7ebf\u547d\u4ee4\u6a21\u5f0f I\u5230\u884c\u9996\u63d2\u5165,A\u5230\u884c\u672b\u63d2\u5165\uff0co\u4e0b\u4e00\u884c\u63d2\u5165\uff0cO\u4e0a\u4e00\u884c\u63d2\u5165 w(W)\u8df3\u5230\u4e0b\u4e2a\u5355\u8bcd\uff0cb(B)\u8df3\u5230\u4e0a\u4e2a\u5355\u8bcd\uff0ce(B)\u8df3\u5230\u5355\u8bcd\u672b ^\u8df3\u5230\u884c\u9996,$\u8df3\u5230\u884c\u5c3e G\u8df3\u5230\u6587\u4ef6\u5c3e\uff0cgg\u8df3\u5230\u6587\u4ef6\u9996 dd\u5220\u9664\u5f53\u524d\u884c\uff0c\u5220\u9664\u7684\u884c\u5728\u526a\u5207\u677f\u91cc yy\u590d\u5236\u5f53\u524d\u884c u\u64a4\u9500\u4e0a\u4e00\u4e2a\u547d\u4ee4 .\u91cd\u590d\u4e0a\u4e00\u4e2a\u547d\u4ee4 p P\u7c98\u8d34 x\u5220\u9664\u5f53\u524d\u5b57\u7b26 v\u53ef\u4ee5\u4e00\u70b9\u4e00\u70b9\u9009\u4e2d\uff0cV\u53ef\u4ee5\u4e00\u884c\u4e00\u884c\u9009\u4e2d\uff0c\u7136\u540e\u8fdb\u884c\u64cd\u4f5c \u60f3\u5220\u9664\u6574\u7bc7\u6587\u7ae0\uff0c\u5148gg\u79fb\u5230\u6587\u7ae0\u9996,\u7136\u540edG\u5220\u9664\u6574\u7bc7 xxG\u79fb\u5230xx\u884c r\u66ff\u6362\u5b57\u7b26,R\u66ff\u6362\u6a21\u5f0f","title":"vim"},{"location":"others/vim/#vim","text":"hjkl \u5206\u522b\u5bf9\u5e94\u5de6\u4e0b\u4e0a\u53f3** esc \u5207\u6362\u5230\u547d\u4ee4\u6a21\u5f0f\uff0cioaIOA\u5207\u6362\u5230\u8f93\u5165\u6a21\u5f0f\uff0c:\u8fdb\u5165\u5e95\u7ebf\u547d\u4ee4\u6a21\u5f0f I\u5230\u884c\u9996\u63d2\u5165,A\u5230\u884c\u672b\u63d2\u5165\uff0co\u4e0b\u4e00\u884c\u63d2\u5165\uff0cO\u4e0a\u4e00\u884c\u63d2\u5165 w(W)\u8df3\u5230\u4e0b\u4e2a\u5355\u8bcd\uff0cb(B)\u8df3\u5230\u4e0a\u4e2a\u5355\u8bcd\uff0ce(B)\u8df3\u5230\u5355\u8bcd\u672b ^\u8df3\u5230\u884c\u9996,$\u8df3\u5230\u884c\u5c3e G\u8df3\u5230\u6587\u4ef6\u5c3e\uff0cgg\u8df3\u5230\u6587\u4ef6\u9996 dd\u5220\u9664\u5f53\u524d\u884c\uff0c\u5220\u9664\u7684\u884c\u5728\u526a\u5207\u677f\u91cc yy\u590d\u5236\u5f53\u524d\u884c u\u64a4\u9500\u4e0a\u4e00\u4e2a\u547d\u4ee4 .\u91cd\u590d\u4e0a\u4e00\u4e2a\u547d\u4ee4 p P\u7c98\u8d34 x\u5220\u9664\u5f53\u524d\u5b57\u7b26 v\u53ef\u4ee5\u4e00\u70b9\u4e00\u70b9\u9009\u4e2d\uff0cV\u53ef\u4ee5\u4e00\u884c\u4e00\u884c\u9009\u4e2d\uff0c\u7136\u540e\u8fdb\u884c\u64cd\u4f5c \u60f3\u5220\u9664\u6574\u7bc7\u6587\u7ae0\uff0c\u5148gg\u79fb\u5230\u6587\u7ae0\u9996,\u7136\u540edG\u5220\u9664\u6574\u7bc7 xxG\u79fb\u5230xx\u884c r\u66ff\u6362\u5b57\u7b26,R\u66ff\u6362\u6a21\u5f0f","title":"vim\u7b14\u8bb0"},{"location":"pandas/","text":"Pandas\u5b66\u4e60 Pandas\u662f\u6570\u636e\u79d1\u5b66\u5fc5\u4e0d\u53ef\u5c11\u7684\u5de5\u5177\uff0c\u4e5f\u662f\u673a\u5668\u5b66\u4e60\u91cc\u5904\u7406\u6570\u636e\u7684\u5229\u5668\u3002 \u5b66\u597dpandas\u975e\u5e38\u91cd\u8981\uff01","title":"\u4ecb\u7ecd"},{"location":"pandas/#pandas","text":"Pandas\u662f\u6570\u636e\u79d1\u5b66\u5fc5\u4e0d\u53ef\u5c11\u7684\u5de5\u5177\uff0c\u4e5f\u662f\u673a\u5668\u5b66\u4e60\u91cc\u5904\u7406\u6570\u636e\u7684\u5229\u5668\u3002 \u5b66\u597dpandas\u975e\u5e38\u91cd\u8981\uff01","title":"Pandas\u5b66\u4e60"},{"location":"pandas/learn_one/","text":"\u5bfc\u5165\u5e93 import pandas as pd import numpy as np \u4e00\u7ef4\u6570\u7ec4 arr = [0, 1, 2, 3, 4] s1 = pd.Series(arr) # \u5982\u679c\u4e0d\u6307\u5b9a\u7d22\u5f15\uff0c\u5219\u9ed8\u8ba4\u4ece 0 \u5f00\u59cb s1 0 0 1 1 2 2 3 3 4 4 dtype: int64 n = np.random.randn(5) # \u521b\u5efa\u4e00\u4e2a\u968f\u673a Ndarray \u6570\u7ec4 index = ['a', 'b', 'c', 'd', 'e'] s2 = pd.Series(n, index=index) s2 a 0.647546 b 0.197186 c 0.590904 d -0.422565 e -0.122490 dtype: float64 \u7528\u5b57\u5178\u521b\u5efa\u4e00\u7ef4\u6570\u7ec4 d = {'a': 1, 'b': 2, 'c': 3, 'd': 4, 'e': 5} # \u5b9a\u4e49\u793a\u4f8b\u5b57\u5178 s3 = pd.Series(d) s3 a 1 b 2 c 3 d 4 e 5 dtype: int64 Series \u57fa\u672c\u64cd\u4f5c print(s1) # \u4ee5 s1 \u4e3a\u4f8b s1.index = ['A', 'B', 'C', 'D', 'E'] # \u4fee\u6539\u540e\u7684\u7d22\u5f15 s1 0 0 1 1 2 2 3 3 4 4 dtype: int64 A 0 B 1 C 2 D 3 E 4 dtype: int64 s4 = s3.append(s1) # \u5c06 s1 \u62fc\u63a5\u5230 s3 s4 a 1 b 2 c 3 d 4 e 5 A 0 B 1 C 2 D 3 E 4 dtype: int64 print(s4) s4 = s4.drop('e') # \u5220\u9664\u7d22\u5f15\u4e3a e \u7684\u503c s4 a 1 b 2 c 3 d 4 e 5 A 0 B 1 C 2 D 3 E 4 dtype: int64 a 1 b 2 c 3 d 4 A 0 B 1 C 2 D 3 E 4 dtype: int64 s4['A'] = 6 # \u4fee\u6539\u7d22\u5f15\u4e3a A \u7684\u503c = 6 s4 a 1 b 2 c 3 d 4 A 6 B 1 C 2 D 3 E 4 dtype: int64 s4.add(s3)#\u5982\u679c\u7d22\u5f15\u4e0d\u540c\u5219\u4e3aNAN sub\u4e3a\u51cf\uff0cmul\u4e3a\u4e58\uff0cdiv\u4e3a\u9664 A NaN B NaN C NaN D NaN E NaN a 2.0 b 4.0 c 6.0 d 8.0 e NaN dtype: float64 print(s4.median(),#\u4e2d\u4f4d\u6570 s4.sum(),#\u6c42\u548c s4.max(),#\u6c42\u6700\u5927\u503c s4.min())#\u6c42\u6700\u5c0f\u503c 3.0 26 6 1 DataFrame dates = pd.date_range('today', periods=6) # \u5b9a\u4e49\u65f6\u95f4\u5e8f\u5217\u4f5c\u4e3a index num_arr = np.random.randn(6, 4) # \u4f20\u5165 numpy \u968f\u673a\u6570\u7ec4 columns = ['A', 'B', 'C', 'D'] # \u5c06\u5217\u8868\u4f5c\u4e3a\u5217\u540d df1 = pd.DataFrame(num_arr, index=dates, columns=columns) df1 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } A B C D 2020-11-13 20:54:24.760775 -0.403545 0.643881 -1.697286 -0.616257 2020-11-14 20:54:24.760775 0.102470 1.451324 -0.269714 -0.316194 2020-11-15 20:54:24.760775 0.342680 -0.137238 -0.785406 -0.441022 2020-11-16 20:54:24.760775 0.130079 1.929569 -0.756832 -2.490272 2020-11-17 20:54:24.760775 1.774664 1.037605 0.275989 -0.982924 2020-11-18 20:54:24.760775 0.952462 1.666130 -0.920394 -1.358411 data = {'animal': ['cat', 'cat', 'snake', 'dog', 'dog', 'cat', 'snake', 'cat', 'dog', 'dog'], 'age': [2.5, 3, 0.5, np.nan, 5, 2, 4.5, np.nan, 7, 3], 'visits': [1, 3, 2, 3, 2, 3, 1, 1, 2, 1], 'priority': ['yes', 'yes', 'no', 'yes', 'no', 'no', 'no', 'yes', 'no', 'no']} labels = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j'] df2 = pd.DataFrame(data, index=labels) df2#df2.head()\u67e5\u770b\u524d\u51e0\u884c df2.tail()\u67e5\u770b\u540e\u51e0\u884c .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits a 2.5 cat yes 1 b 3.0 cat yes 3 c 0.5 snake no 2 d NaN dog yes 3 e 5.0 dog no 2 f 2.0 cat no 3 g 4.5 snake no 1 h NaN cat yes 1 i 7.0 dog no 2 j 3.0 dog no 1 df2.columns,df2.index,df2.values #\u67e5\u770b\u7d22\u5f15.\u5217\u540d\u548c\u503c (Index(['age', 'animal', 'priority', 'visits'], dtype='object'), Index(['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j'], dtype='object'), array([[2.5, 'cat', 'yes', 1], [3.0, 'cat', 'yes', 3], [0.5, 'snake', 'no', 2], [nan, 'dog', 'yes', 3], [5.0, 'dog', 'no', 2], [2.0, 'cat', 'no', 3], [4.5, 'snake', 'no', 1], [nan, 'cat', 'yes', 1], [7.0, 'dog', 'no', 2], [3.0, 'dog', 'no', 1]], dtype=object)) df2.describe()#\u6570\u636e\u5904\u7406\u5e38\u7528 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age visits count 8.000000 10.000000 mean 3.437500 1.900000 std 2.007797 0.875595 min 0.500000 1.000000 25% 2.375000 1.000000 50% 3.000000 2.000000 75% 4.625000 2.750000 max 7.000000 3.000000 df2.T #\u9006 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } a b c d e f g h i j age 2.5 3 0.5 NaN 5 2 4.5 NaN 7 3 animal cat cat snake dog dog cat snake cat dog dog priority yes yes no yes no no no yes no no visits 1 3 2 3 2 3 1 1 2 1 df2.sort_values(by='age') .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits c 0.5 snake no 2 f 2.0 cat no 3 a 2.5 cat yes 1 b 3.0 cat yes 3 j 3.0 dog no 1 g 4.5 snake no 1 e 5.0 dog no 2 i 7.0 dog no 2 d NaN dog yes 3 h NaN cat yes 1 df2['age']#\u663e\u793aage\u5217 == df2.age a 2.5 b 3.0 c 0.5 d NaN e 5.0 f 2.0 g 4.5 h NaN i 7.0 j 3.0 Name: age, dtype: float64 df2[['age','animal']] #\u591a\u5217\u67e5\u8be2 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal a 2.5 cat b 3.0 cat c 0.5 snake d NaN dog e 5.0 dog f 2.0 cat g 4.5 snake h NaN cat i 7.0 dog j 3.0 dog df2.iloc[1:3]#\u67e5\u8be22\uff0c3\u884c ==df2[1:3] .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits b 3.0 cat yes 3 c 0.5 snake no 2 df3 = df2.copy()#\u62f7\u8d1d\u4e00\u4efd df3 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits a 2.5 cat yes 1 b 3.0 cat yes 3 c 0.5 snake no 2 d NaN dog yes 3 e 5.0 dog no 2 f 2.0 cat no 3 g 4.5 snake no 1 h NaN cat yes 1 i 7.0 dog no 2 j 3.0 dog no 1 df3.isnull()#\u68c0\u6d4b\u662f\u5426\u4e3a\u7a7a\uff0c\u4e3a\u7a7a\u8fd4\u56deTrue .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits a False False False False b False False False False c False False False False d True False False False e False False False False f False False False False g False False False False h True False False False i False False False False j False False False False num = pd.Series([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], index=df3.index)#\u5efa\u7acb\u6570\u636e\uff0c\u6ce8\u610f\u7d22\u5f15\u548cdf3\u4e00\u81f4 df3['No.'] = num # \u6dfb\u52a0\u4ee5 'No.' \u4e3a\u5217\u540d\u7684\u65b0\u6570\u636e\u5217 df3 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits No. a 2.5 cat yes 1 0 b 3.0 cat yes 3 1 c 0.5 snake no 2 2 d NaN dog yes 3 3 e 5.0 dog no 2 4 f 2.0 cat no 3 5 g 4.5 snake no 1 6 h NaN cat yes 1 7 i 7.0 dog no 2 8 j 3.0 dog no 1 9 df3.iat[1,1] = 2 #\u6839\u636e\u7d22\u5f15\u6539\u53d8\u503c\uff0c\u8fd9\u91cc\u76f8\u5f53\u4e8e\u4e8c\u7ef4\u6570\u7ec4\u4e86 df3 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits No. a 2.5 cat yes 1 0 b 3.0 2 yes 3 1 c 0.5 snake no 2 2 d NaN dog yes 3 3 e 5.0 dog no 2 4 f 1.5 cat no 3 5 g 4.5 snake no 1 6 h NaN cat yes 1 7 i 7.0 dog no 2 8 j 3.0 dog no 1 9 df3.loc['f', 'age'] = 1.5 #\u6839\u636e\u6807\u7b7e\u6765\u4fee\u6539 df3 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits No. a 2.5 cat yes 1 0 b 3.0 2 yes 3 1 c 0.5 snake no 2 2 d NaN dog yes 3 3 e 5.0 dog no 2 4 f 1.5 cat no 3 5 g 4.5 snake no 1 6 h NaN cat yes 1 7 i 7.0 dog no 2 8 j 3.0 dog no 1 9 df3.mean()#\u6c42\u5e73\u5747\u503c age 3.375 visits 1.900 No. 4.500 dtype: float64 df3['visits'].sum()#\u5bf9visits\u5217\u8fdb\u884c\u6c42\u548c 19 df4 = df3.copy() print(df4) df4.fillna(value=3)#\u5982\u679c\u662fNAN\u8865\u5145\u4e3a3 age animal priority visits No. a 2.5 cat yes 1 0 b 3.0 2 yes 3 1 c 0.5 snake no 2 2 d NaN dog yes 3 3 e 5.0 dog no 2 4 f 1.5 cat no 3 5 g 4.5 snake no 1 6 h NaN cat yes 1 7 i 7.0 dog no 2 8 j 3.0 dog no 1 9 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits No. a 2.5 cat yes 1 0 b 3.0 2 yes 3 1 c 0.5 snake no 2 2 d 3.0 dog yes 3 3 e 5.0 dog no 2 4 f 1.5 cat no 3 5 g 4.5 snake no 1 6 h 3.0 cat yes 1 7 i 7.0 dog no 2 8 j 3.0 dog no 1 9 df5 = df3.copy() print(df5) df5.dropna(how='any') # \u4efb\u4f55\u5b58\u5728 NaN \u7684\u884c\u90fd\u5c06\u88ab\u5220\u9664 age animal priority visits No. a 2.5 cat yes 1 0 b 3.0 2 yes 3 1 c 0.5 snake no 2 2 d NaN dog yes 3 3 e 5.0 dog no 2 4 f 1.5 cat no 3 5 g 4.5 snake no 1 6 h NaN cat yes 1 7 i 7.0 dog no 2 8 j 3.0 dog no 1 9 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits No. a 2.5 cat yes 1 0 b 3.0 2 yes 3 1 c 0.5 snake no 2 2 e 5.0 dog no 2 4 f 1.5 cat no 3 5 g 4.5 snake no 1 6 i 7.0 dog no 2 8 j 3.0 dog no 1 9 left = pd.DataFrame({'key': ['foo1', 'foo2'], 'one': [1, 2]}) right = pd.DataFrame({'key': ['foo2', 'foo3'], 'two': [4, 5]}) print(left) print(right) # \u6309\u7167 key \u5217\u5bf9\u9f50\u8fde\u63a5\uff0c\u53ea\u5b58\u5728 foo2 \u76f8\u540c\uff0c\u6240\u4ee5\u6700\u540e\u53d8\u6210\u4e00\u884c pd.merge(left, right, on='key') key one 0 foo1 1 1 foo2 2 key two 0 foo2 4 1 foo3 5 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } key one two 0 foo2 2 4 df3.to_csv('animal.csv') print(\"\u5199\u5165\u6210\u529f.\") \u5199\u5165\u6210\u529f. df_animal = pd.read_csv('animal.csv') df_animal .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } Unnamed: 0 age animal priority visits No. 0 a 2.5 cat yes 1 0 1 b 3.0 2 yes 3 1 2 c 0.5 snake no 2 2 3 d NaN dog yes 3 3 4 e 5.0 dog no 2 4 5 f 1.5 cat no 3 5 6 g 4.5 snake no 1 6 7 h NaN cat yes 1 7 8 i 7.0 dog no 2 8 9 j 3.0 dog no 1 9 df3.to_excel('animal.xlsx', sheet_name='Sheet1') print(\"\u5199\u5165\u6210\u529f.\") \u5199\u5165\u6210\u529f. pd.read_excel('animal.xlsx', 'Sheet1', index_col=None, na_values=['NA']) .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits No. a 2.5 cat yes 1 0 b 3.0 2 yes 3 1 c 0.5 snake no 2 2 d NaN dog yes 3 3 e 5.0 dog no 2 4 f 1.5 cat no 3 5 g 4.5 snake no 1 6 h NaN cat yes 1 7 i 7.0 dog no 2 8 j 3.0 dog no 1 9 \u8fdb\u9636\u90e8\u5206 dti = pd.date_range(start='2018-01-01', end='2018-12-31', freq='D') s = pd.Series(np.random.rand(len(dti)), index=dti) s 2018-01-01 0.201676 2018-01-02 0.502547 2018-01-03 0.170739 2018-01-04 0.725599 2018-01-05 0.550199 2018-01-06 0.032421 2018-01-07 0.699385 2018-01-08 0.486797 2018-01-09 0.829427 2018-01-10 0.180882 2018-01-11 0.038766 2018-01-12 0.277279 2018-01-13 0.549932 2018-01-14 0.053058 2018-01-15 0.031786 2018-01-16 0.418983 2018-01-17 0.118010 2018-01-18 0.396846 2018-01-19 0.337507 2018-01-20 0.357052 2018-01-21 0.715088 2018-01-22 0.147573 2018-01-23 0.444479 2018-01-24 0.354306 2018-01-25 0.054420 2018-01-26 0.024047 2018-01-27 0.432698 2018-01-28 0.532165 2018-01-29 0.262547 2018-01-30 0.727870 ... 2018-12-02 0.855610 2018-12-03 0.682516 2018-12-04 0.991494 2018-12-05 0.935902 2018-12-06 0.893206 2018-12-07 0.884918 2018-12-08 0.285479 2018-12-09 0.317185 2018-12-10 0.449078 2018-12-11 0.266593 2018-12-12 0.432669 2018-12-13 0.065663 2018-12-14 0.524504 2018-12-15 0.164935 2018-12-16 0.347022 2018-12-17 0.127325 2018-12-18 0.406984 2018-12-19 0.698307 2018-12-20 0.135198 2018-12-21 0.153526 2018-12-22 0.312617 2018-12-23 0.965893 2018-12-24 0.957769 2018-12-25 0.449219 2018-12-26 0.037703 2018-12-27 0.640956 2018-12-28 0.434779 2018-12-29 0.750819 2018-12-30 0.471872 2018-12-31 0.566274 Freq: D, Length: 365, dtype: float64 # \u5468\u4e00\u4ece 0 \u5f00\u59cb s[s.index.weekday == 2].sum()#\u6c42\u6240\u6709\u5468\u4e09\u7684\u548c 26.097402479556862 s.resample('M').mean()# \u6bcf\u4e2a\u6708\u503c\u7684\u5e73\u5747\u503c 2018-01-31 0.351720 2018-02-28 0.555833 2018-03-31 0.510938 2018-04-30 0.524954 2018-05-31 0.477990 2018-06-30 0.584583 2018-07-31 0.531724 2018-08-31 0.494037 2018-09-30 0.579968 2018-10-31 0.532052 2018-11-30 0.471283 2018-12-31 0.518058 Freq: M, dtype: float64","title":"\u5b66\u4e601"},{"location":"pandas/learn_one/#_1","text":"import pandas as pd import numpy as np","title":"\u5bfc\u5165\u5e93"},{"location":"pandas/learn_one/#_2","text":"arr = [0, 1, 2, 3, 4] s1 = pd.Series(arr) # \u5982\u679c\u4e0d\u6307\u5b9a\u7d22\u5f15\uff0c\u5219\u9ed8\u8ba4\u4ece 0 \u5f00\u59cb s1 0 0 1 1 2 2 3 3 4 4 dtype: int64 n = np.random.randn(5) # \u521b\u5efa\u4e00\u4e2a\u968f\u673a Ndarray \u6570\u7ec4 index = ['a', 'b', 'c', 'd', 'e'] s2 = pd.Series(n, index=index) s2 a 0.647546 b 0.197186 c 0.590904 d -0.422565 e -0.122490 dtype: float64","title":"\u4e00\u7ef4\u6570\u7ec4"},{"location":"pandas/learn_one/#_3","text":"d = {'a': 1, 'b': 2, 'c': 3, 'd': 4, 'e': 5} # \u5b9a\u4e49\u793a\u4f8b\u5b57\u5178 s3 = pd.Series(d) s3 a 1 b 2 c 3 d 4 e 5 dtype: int64","title":"\u7528\u5b57\u5178\u521b\u5efa\u4e00\u7ef4\u6570\u7ec4"},{"location":"pandas/learn_one/#series","text":"print(s1) # \u4ee5 s1 \u4e3a\u4f8b s1.index = ['A', 'B', 'C', 'D', 'E'] # \u4fee\u6539\u540e\u7684\u7d22\u5f15 s1 0 0 1 1 2 2 3 3 4 4 dtype: int64 A 0 B 1 C 2 D 3 E 4 dtype: int64 s4 = s3.append(s1) # \u5c06 s1 \u62fc\u63a5\u5230 s3 s4 a 1 b 2 c 3 d 4 e 5 A 0 B 1 C 2 D 3 E 4 dtype: int64 print(s4) s4 = s4.drop('e') # \u5220\u9664\u7d22\u5f15\u4e3a e \u7684\u503c s4 a 1 b 2 c 3 d 4 e 5 A 0 B 1 C 2 D 3 E 4 dtype: int64 a 1 b 2 c 3 d 4 A 0 B 1 C 2 D 3 E 4 dtype: int64 s4['A'] = 6 # \u4fee\u6539\u7d22\u5f15\u4e3a A \u7684\u503c = 6 s4 a 1 b 2 c 3 d 4 A 6 B 1 C 2 D 3 E 4 dtype: int64 s4.add(s3)#\u5982\u679c\u7d22\u5f15\u4e0d\u540c\u5219\u4e3aNAN sub\u4e3a\u51cf\uff0cmul\u4e3a\u4e58\uff0cdiv\u4e3a\u9664 A NaN B NaN C NaN D NaN E NaN a 2.0 b 4.0 c 6.0 d 8.0 e NaN dtype: float64 print(s4.median(),#\u4e2d\u4f4d\u6570 s4.sum(),#\u6c42\u548c s4.max(),#\u6c42\u6700\u5927\u503c s4.min())#\u6c42\u6700\u5c0f\u503c 3.0 26 6 1","title":"Series \u57fa\u672c\u64cd\u4f5c"},{"location":"pandas/learn_one/#dataframe","text":"dates = pd.date_range('today', periods=6) # \u5b9a\u4e49\u65f6\u95f4\u5e8f\u5217\u4f5c\u4e3a index num_arr = np.random.randn(6, 4) # \u4f20\u5165 numpy \u968f\u673a\u6570\u7ec4 columns = ['A', 'B', 'C', 'D'] # \u5c06\u5217\u8868\u4f5c\u4e3a\u5217\u540d df1 = pd.DataFrame(num_arr, index=dates, columns=columns) df1 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } A B C D 2020-11-13 20:54:24.760775 -0.403545 0.643881 -1.697286 -0.616257 2020-11-14 20:54:24.760775 0.102470 1.451324 -0.269714 -0.316194 2020-11-15 20:54:24.760775 0.342680 -0.137238 -0.785406 -0.441022 2020-11-16 20:54:24.760775 0.130079 1.929569 -0.756832 -2.490272 2020-11-17 20:54:24.760775 1.774664 1.037605 0.275989 -0.982924 2020-11-18 20:54:24.760775 0.952462 1.666130 -0.920394 -1.358411 data = {'animal': ['cat', 'cat', 'snake', 'dog', 'dog', 'cat', 'snake', 'cat', 'dog', 'dog'], 'age': [2.5, 3, 0.5, np.nan, 5, 2, 4.5, np.nan, 7, 3], 'visits': [1, 3, 2, 3, 2, 3, 1, 1, 2, 1], 'priority': ['yes', 'yes', 'no', 'yes', 'no', 'no', 'no', 'yes', 'no', 'no']} labels = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j'] df2 = pd.DataFrame(data, index=labels) df2#df2.head()\u67e5\u770b\u524d\u51e0\u884c df2.tail()\u67e5\u770b\u540e\u51e0\u884c .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits a 2.5 cat yes 1 b 3.0 cat yes 3 c 0.5 snake no 2 d NaN dog yes 3 e 5.0 dog no 2 f 2.0 cat no 3 g 4.5 snake no 1 h NaN cat yes 1 i 7.0 dog no 2 j 3.0 dog no 1 df2.columns,df2.index,df2.values #\u67e5\u770b\u7d22\u5f15.\u5217\u540d\u548c\u503c (Index(['age', 'animal', 'priority', 'visits'], dtype='object'), Index(['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j'], dtype='object'), array([[2.5, 'cat', 'yes', 1], [3.0, 'cat', 'yes', 3], [0.5, 'snake', 'no', 2], [nan, 'dog', 'yes', 3], [5.0, 'dog', 'no', 2], [2.0, 'cat', 'no', 3], [4.5, 'snake', 'no', 1], [nan, 'cat', 'yes', 1], [7.0, 'dog', 'no', 2], [3.0, 'dog', 'no', 1]], dtype=object)) df2.describe()#\u6570\u636e\u5904\u7406\u5e38\u7528 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age visits count 8.000000 10.000000 mean 3.437500 1.900000 std 2.007797 0.875595 min 0.500000 1.000000 25% 2.375000 1.000000 50% 3.000000 2.000000 75% 4.625000 2.750000 max 7.000000 3.000000 df2.T #\u9006 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } a b c d e f g h i j age 2.5 3 0.5 NaN 5 2 4.5 NaN 7 3 animal cat cat snake dog dog cat snake cat dog dog priority yes yes no yes no no no yes no no visits 1 3 2 3 2 3 1 1 2 1 df2.sort_values(by='age') .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits c 0.5 snake no 2 f 2.0 cat no 3 a 2.5 cat yes 1 b 3.0 cat yes 3 j 3.0 dog no 1 g 4.5 snake no 1 e 5.0 dog no 2 i 7.0 dog no 2 d NaN dog yes 3 h NaN cat yes 1 df2['age']#\u663e\u793aage\u5217 == df2.age a 2.5 b 3.0 c 0.5 d NaN e 5.0 f 2.0 g 4.5 h NaN i 7.0 j 3.0 Name: age, dtype: float64 df2[['age','animal']] #\u591a\u5217\u67e5\u8be2 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal a 2.5 cat b 3.0 cat c 0.5 snake d NaN dog e 5.0 dog f 2.0 cat g 4.5 snake h NaN cat i 7.0 dog j 3.0 dog df2.iloc[1:3]#\u67e5\u8be22\uff0c3\u884c ==df2[1:3] .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits b 3.0 cat yes 3 c 0.5 snake no 2 df3 = df2.copy()#\u62f7\u8d1d\u4e00\u4efd df3 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits a 2.5 cat yes 1 b 3.0 cat yes 3 c 0.5 snake no 2 d NaN dog yes 3 e 5.0 dog no 2 f 2.0 cat no 3 g 4.5 snake no 1 h NaN cat yes 1 i 7.0 dog no 2 j 3.0 dog no 1 df3.isnull()#\u68c0\u6d4b\u662f\u5426\u4e3a\u7a7a\uff0c\u4e3a\u7a7a\u8fd4\u56deTrue .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits a False False False False b False False False False c False False False False d True False False False e False False False False f False False False False g False False False False h True False False False i False False False False j False False False False num = pd.Series([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], index=df3.index)#\u5efa\u7acb\u6570\u636e\uff0c\u6ce8\u610f\u7d22\u5f15\u548cdf3\u4e00\u81f4 df3['No.'] = num # \u6dfb\u52a0\u4ee5 'No.' \u4e3a\u5217\u540d\u7684\u65b0\u6570\u636e\u5217 df3 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits No. a 2.5 cat yes 1 0 b 3.0 cat yes 3 1 c 0.5 snake no 2 2 d NaN dog yes 3 3 e 5.0 dog no 2 4 f 2.0 cat no 3 5 g 4.5 snake no 1 6 h NaN cat yes 1 7 i 7.0 dog no 2 8 j 3.0 dog no 1 9 df3.iat[1,1] = 2 #\u6839\u636e\u7d22\u5f15\u6539\u53d8\u503c\uff0c\u8fd9\u91cc\u76f8\u5f53\u4e8e\u4e8c\u7ef4\u6570\u7ec4\u4e86 df3 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits No. a 2.5 cat yes 1 0 b 3.0 2 yes 3 1 c 0.5 snake no 2 2 d NaN dog yes 3 3 e 5.0 dog no 2 4 f 1.5 cat no 3 5 g 4.5 snake no 1 6 h NaN cat yes 1 7 i 7.0 dog no 2 8 j 3.0 dog no 1 9 df3.loc['f', 'age'] = 1.5 #\u6839\u636e\u6807\u7b7e\u6765\u4fee\u6539 df3 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits No. a 2.5 cat yes 1 0 b 3.0 2 yes 3 1 c 0.5 snake no 2 2 d NaN dog yes 3 3 e 5.0 dog no 2 4 f 1.5 cat no 3 5 g 4.5 snake no 1 6 h NaN cat yes 1 7 i 7.0 dog no 2 8 j 3.0 dog no 1 9 df3.mean()#\u6c42\u5e73\u5747\u503c age 3.375 visits 1.900 No. 4.500 dtype: float64 df3['visits'].sum()#\u5bf9visits\u5217\u8fdb\u884c\u6c42\u548c 19 df4 = df3.copy() print(df4) df4.fillna(value=3)#\u5982\u679c\u662fNAN\u8865\u5145\u4e3a3 age animal priority visits No. a 2.5 cat yes 1 0 b 3.0 2 yes 3 1 c 0.5 snake no 2 2 d NaN dog yes 3 3 e 5.0 dog no 2 4 f 1.5 cat no 3 5 g 4.5 snake no 1 6 h NaN cat yes 1 7 i 7.0 dog no 2 8 j 3.0 dog no 1 9 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits No. a 2.5 cat yes 1 0 b 3.0 2 yes 3 1 c 0.5 snake no 2 2 d 3.0 dog yes 3 3 e 5.0 dog no 2 4 f 1.5 cat no 3 5 g 4.5 snake no 1 6 h 3.0 cat yes 1 7 i 7.0 dog no 2 8 j 3.0 dog no 1 9 df5 = df3.copy() print(df5) df5.dropna(how='any') # \u4efb\u4f55\u5b58\u5728 NaN \u7684\u884c\u90fd\u5c06\u88ab\u5220\u9664 age animal priority visits No. a 2.5 cat yes 1 0 b 3.0 2 yes 3 1 c 0.5 snake no 2 2 d NaN dog yes 3 3 e 5.0 dog no 2 4 f 1.5 cat no 3 5 g 4.5 snake no 1 6 h NaN cat yes 1 7 i 7.0 dog no 2 8 j 3.0 dog no 1 9 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits No. a 2.5 cat yes 1 0 b 3.0 2 yes 3 1 c 0.5 snake no 2 2 e 5.0 dog no 2 4 f 1.5 cat no 3 5 g 4.5 snake no 1 6 i 7.0 dog no 2 8 j 3.0 dog no 1 9 left = pd.DataFrame({'key': ['foo1', 'foo2'], 'one': [1, 2]}) right = pd.DataFrame({'key': ['foo2', 'foo3'], 'two': [4, 5]}) print(left) print(right) # \u6309\u7167 key \u5217\u5bf9\u9f50\u8fde\u63a5\uff0c\u53ea\u5b58\u5728 foo2 \u76f8\u540c\uff0c\u6240\u4ee5\u6700\u540e\u53d8\u6210\u4e00\u884c pd.merge(left, right, on='key') key one 0 foo1 1 1 foo2 2 key two 0 foo2 4 1 foo3 5 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } key one two 0 foo2 2 4 df3.to_csv('animal.csv') print(\"\u5199\u5165\u6210\u529f.\") \u5199\u5165\u6210\u529f. df_animal = pd.read_csv('animal.csv') df_animal .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } Unnamed: 0 age animal priority visits No. 0 a 2.5 cat yes 1 0 1 b 3.0 2 yes 3 1 2 c 0.5 snake no 2 2 3 d NaN dog yes 3 3 4 e 5.0 dog no 2 4 5 f 1.5 cat no 3 5 6 g 4.5 snake no 1 6 7 h NaN cat yes 1 7 8 i 7.0 dog no 2 8 9 j 3.0 dog no 1 9 df3.to_excel('animal.xlsx', sheet_name='Sheet1') print(\"\u5199\u5165\u6210\u529f.\") \u5199\u5165\u6210\u529f. pd.read_excel('animal.xlsx', 'Sheet1', index_col=None, na_values=['NA']) .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } age animal priority visits No. a 2.5 cat yes 1 0 b 3.0 2 yes 3 1 c 0.5 snake no 2 2 d NaN dog yes 3 3 e 5.0 dog no 2 4 f 1.5 cat no 3 5 g 4.5 snake no 1 6 h NaN cat yes 1 7 i 7.0 dog no 2 8 j 3.0 dog no 1 9","title":"DataFrame"},{"location":"pandas/learn_one/#_4","text":"dti = pd.date_range(start='2018-01-01', end='2018-12-31', freq='D') s = pd.Series(np.random.rand(len(dti)), index=dti) s 2018-01-01 0.201676 2018-01-02 0.502547 2018-01-03 0.170739 2018-01-04 0.725599 2018-01-05 0.550199 2018-01-06 0.032421 2018-01-07 0.699385 2018-01-08 0.486797 2018-01-09 0.829427 2018-01-10 0.180882 2018-01-11 0.038766 2018-01-12 0.277279 2018-01-13 0.549932 2018-01-14 0.053058 2018-01-15 0.031786 2018-01-16 0.418983 2018-01-17 0.118010 2018-01-18 0.396846 2018-01-19 0.337507 2018-01-20 0.357052 2018-01-21 0.715088 2018-01-22 0.147573 2018-01-23 0.444479 2018-01-24 0.354306 2018-01-25 0.054420 2018-01-26 0.024047 2018-01-27 0.432698 2018-01-28 0.532165 2018-01-29 0.262547 2018-01-30 0.727870 ... 2018-12-02 0.855610 2018-12-03 0.682516 2018-12-04 0.991494 2018-12-05 0.935902 2018-12-06 0.893206 2018-12-07 0.884918 2018-12-08 0.285479 2018-12-09 0.317185 2018-12-10 0.449078 2018-12-11 0.266593 2018-12-12 0.432669 2018-12-13 0.065663 2018-12-14 0.524504 2018-12-15 0.164935 2018-12-16 0.347022 2018-12-17 0.127325 2018-12-18 0.406984 2018-12-19 0.698307 2018-12-20 0.135198 2018-12-21 0.153526 2018-12-22 0.312617 2018-12-23 0.965893 2018-12-24 0.957769 2018-12-25 0.449219 2018-12-26 0.037703 2018-12-27 0.640956 2018-12-28 0.434779 2018-12-29 0.750819 2018-12-30 0.471872 2018-12-31 0.566274 Freq: D, Length: 365, dtype: float64 # \u5468\u4e00\u4ece 0 \u5f00\u59cb s[s.index.weekday == 2].sum()#\u6c42\u6240\u6709\u5468\u4e09\u7684\u548c 26.097402479556862 s.resample('M').mean()# \u6bcf\u4e2a\u6708\u503c\u7684\u5e73\u5747\u503c 2018-01-31 0.351720 2018-02-28 0.555833 2018-03-31 0.510938 2018-04-30 0.524954 2018-05-31 0.477990 2018-06-30 0.584583 2018-07-31 0.531724 2018-08-31 0.494037 2018-09-30 0.579968 2018-10-31 0.532052 2018-11-30 0.471283 2018-12-31 0.518058 Freq: M, dtype: float64","title":"\u8fdb\u9636\u90e8\u5206"},{"location":"pandas/learn_two/","text":"import pandas as pd import numpy as np \u8bfb\u53d6\u6587\u4ef6 df = pd.read_csv( 'https://labfile.oss.aliyuncs.com/courses/1283/telecom_churn.csv') df.head() .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State Account length Area code International plan Voice mail plan Number vmail messages Total day minutes Total day calls Total day charge Total eve minutes Total eve calls Total eve charge Total night minutes Total night calls Total night charge Total intl minutes Total intl calls Total intl charge Customer service calls Churn 0 KS 128 415 No Yes 25 265.1 110 45.07 197.4 99 16.78 244.7 91 11.01 10.0 3 2.70 1 False 1 OH 107 415 No Yes 26 161.6 123 27.47 195.5 103 16.62 254.4 103 11.45 13.7 3 3.70 1 False 2 NJ 137 415 No No 0 243.4 114 41.38 121.2 110 10.30 162.6 104 7.32 12.2 5 3.29 0 False 3 OH 84 408 Yes No 0 299.4 71 50.90 61.9 88 5.26 196.9 89 8.86 6.6 7 1.78 2 False 4 OK 75 415 Yes No 0 166.7 113 28.34 148.3 122 12.61 186.9 121 8.41 10.1 3 2.73 3 False df.info() #DataFrame \u7684\u4e00\u4e9b\u603b\u4f53\u4fe1\u606f\u3002 <class 'pandas.core.frame.DataFrame'> RangeIndex: 3333 entries, 0 to 3332 Data columns (total 20 columns): State 3333 non-null object Account length 3333 non-null int64 Area code 3333 non-null int64 International plan 3333 non-null object Voice mail plan 3333 non-null object Number vmail messages 3333 non-null int64 Total day minutes 3333 non-null float64 Total day calls 3333 non-null int64 Total day charge 3333 non-null float64 Total eve minutes 3333 non-null float64 Total eve calls 3333 non-null int64 Total eve charge 3333 non-null float64 Total night minutes 3333 non-null float64 Total night calls 3333 non-null int64 Total night charge 3333 non-null float64 Total intl minutes 3333 non-null float64 Total intl calls 3333 non-null int64 Total intl charge 3333 non-null float64 Customer service calls 3333 non-null int64 Churn 3333 non-null bool dtypes: bool(1), float64(8), int64(8), object(3) memory usage: 498.1+ KB df.shape #\u5f62\u72b6\u5927\u5c0f (3333, 20) df.columns #\u5217\u540d Index(['State', 'Account length', 'Area code', 'International plan', 'Voice mail plan', 'Number vmail messages', 'Total day minutes', 'Total day calls', 'Total day charge', 'Total eve minutes', 'Total eve calls', 'Total eve charge', 'Total night minutes', 'Total night calls', 'Total night charge', 'Total intl minutes', 'Total intl calls', 'Total intl charge', 'Customer service calls', 'Churn'], dtype='object') df['Churn'] = df['Churn'].astype('int64') #\u5c06Churn\u5217\u4fee\u6539\u6570\u636e\u7c7b\u578b df.info() <class 'pandas.core.frame.DataFrame'> RangeIndex: 3333 entries, 0 to 3332 Data columns (total 20 columns): State 3333 non-null object Account length 3333 non-null int64 Area code 3333 non-null int64 International plan 3333 non-null object Voice mail plan 3333 non-null object Number vmail messages 3333 non-null int64 Total day minutes 3333 non-null float64 Total day calls 3333 non-null int64 Total day charge 3333 non-null float64 Total eve minutes 3333 non-null float64 Total eve calls 3333 non-null int64 Total eve charge 3333 non-null float64 Total night minutes 3333 non-null float64 Total night calls 3333 non-null int64 Total night charge 3333 non-null float64 Total intl minutes 3333 non-null float64 Total intl calls 3333 non-null int64 Total intl charge 3333 non-null float64 Customer service calls 3333 non-null int64 Churn 3333 non-null int64 dtypes: float64(8), int64(9), object(3) memory usage: 520.9+ KB df.describe() #\u663e\u793a\u6570\u503c\u7279\u5f81\uff08int64 \u548c float64\uff09\u7684\u57fa\u672c\u7edf\u8ba1\u5b66\u7279\u6027 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } Account length Area code Number vmail messages Total day minutes Total day calls Total day charge Total eve minutes Total eve calls Total eve charge Total night minutes Total night calls Total night charge Total intl minutes Total intl calls Total intl charge Customer service calls Churn count 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 mean 101.064806 437.182418 8.099010 179.775098 100.435644 30.562307 200.980348 100.114311 17.083540 200.872037 100.107711 9.039325 10.237294 4.479448 2.764581 1.562856 0.144914 std 39.822106 42.371290 13.688365 54.467389 20.069084 9.259435 50.713844 19.922625 4.310668 50.573847 19.568609 2.275873 2.791840 2.461214 0.753773 1.315491 0.352067 min 1.000000 408.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 23.200000 33.000000 1.040000 0.000000 0.000000 0.000000 0.000000 0.000000 25% 74.000000 408.000000 0.000000 143.700000 87.000000 24.430000 166.600000 87.000000 14.160000 167.000000 87.000000 7.520000 8.500000 3.000000 2.300000 1.000000 0.000000 50% 101.000000 415.000000 0.000000 179.400000 101.000000 30.500000 201.400000 100.000000 17.120000 201.200000 100.000000 9.050000 10.300000 4.000000 2.780000 1.000000 0.000000 75% 127.000000 510.000000 20.000000 216.400000 114.000000 36.790000 235.300000 114.000000 20.000000 235.300000 113.000000 10.590000 12.100000 6.000000 3.270000 2.000000 0.000000 max 243.000000 510.000000 51.000000 350.800000 165.000000 59.640000 363.700000 170.000000 30.910000 395.000000 175.000000 17.770000 20.000000 20.000000 5.400000 9.000000 1.000000 df.describe(include=['object', 'bool']) #\u901a\u8fc7 include \u53c2\u6570\u663e\u5f0f\u6307\u5b9a\u5305\u542b\u7684\u6570\u636e\u7c7b\u578b\uff0c\u53ef\u4ee5\u67e5\u770b\u975e\u6570\u503c\u7279\u5f81\u7684\u7edf\u8ba1\u6570\u636e .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State International plan Voice mail plan count 3333 3333 3333 unique 51 2 2 top WV No No freq 106 3010 2411 df['Churn'].value_counts() #\u5982\u5176\u540d 0 2850 1 483 Name: Churn, dtype: int64 df['Churn'].value_counts(normalize=True) #\u4f20\u5165\u53c2\u6570\u663e\u793a\u6bd4\u4f8b 0 0.855086 1 0.144914 Name: Churn, dtype: float64 df.sort_values(by='Total day charge', ascending=False).head() #\u6839\u636eTotal day charge\u5217\u8fdb\u884c\u6392\u5e8f ascending=False\u4e3a\u5012\u5e8f\u6392\u5e8f .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State Account length Area code International plan Voice mail plan Number vmail messages Total day minutes Total day calls Total day charge Total eve minutes Total eve calls Total eve charge Total night minutes Total night calls Total night charge Total intl minutes Total intl calls Total intl charge Customer service calls Churn 365 CO 154 415 No No 0 350.8 75 59.64 216.5 94 18.40 253.9 100 11.43 10.1 9 2.73 1 1 985 NY 64 415 Yes No 0 346.8 55 58.96 249.5 79 21.21 275.4 102 12.39 13.3 9 3.59 1 1 2594 OH 115 510 Yes No 0 345.3 81 58.70 203.4 106 17.29 217.5 107 9.79 11.8 8 3.19 1 1 156 OH 83 415 No No 0 337.4 120 57.36 227.4 116 19.33 153.9 114 6.93 15.8 7 4.27 0 1 605 MO 112 415 No No 0 335.5 77 57.04 212.5 109 18.06 265.0 132 11.93 12.7 8 3.43 2 1 df.sort_values(by=['Churn', 'Total day charge'], ascending=[True, False]).head() #\u5148\u6309 Churn \u79bb\u7f51\u7387 \u5347\u5e8f\u6392\u5217\uff0c\u518d\u6309 Total day charge \u6bcf\u65e5\u603b\u8bdd\u8d39 \u964d\u5e8f\u6392\u5217 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State Account length Area code International plan Voice mail plan Number vmail messages Total day minutes Total day calls Total day charge Total eve minutes Total eve calls Total eve charge Total night minutes Total night calls Total night charge Total intl minutes Total intl calls Total intl charge Customer service calls Churn 688 MN 13 510 No Yes 21 315.6 105 53.65 208.9 71 17.76 260.1 123 11.70 12.1 3 3.27 3 0 2259 NC 210 415 No Yes 31 313.8 87 53.35 147.7 103 12.55 192.7 97 8.67 10.1 7 2.73 3 0 534 LA 67 510 No No 0 310.4 97 52.77 66.5 123 5.65 246.5 99 11.09 9.2 10 2.48 4 0 575 SD 114 415 No Yes 36 309.9 90 52.68 200.3 89 17.03 183.5 105 8.26 14.2 2 3.83 1 0 2858 AL 141 510 No Yes 28 308.0 123 52.36 247.8 128 21.06 152.9 103 6.88 7.4 3 2.00 1 0 df[df['Churn'] == 1].mean() Account length 102.664596 Area code 437.817805 Number vmail messages 5.115942 Total day minutes 206.914079 Total day calls 101.335404 Total day charge 35.175921 Total eve minutes 212.410145 Total eve calls 100.561077 Total eve charge 18.054969 Total night minutes 205.231677 Total night calls 100.399586 Total night charge 9.235528 Total intl minutes 10.700000 Total intl calls 4.163561 Total intl charge 2.889545 Customer service calls 2.229814 Churn 1.000000 dtype: float64 df[df['Churn'] == 1]['Total day minutes'].mean() 206.91407867494814 df.loc[0:5, 'State':'Area code'] #\u901a\u8fc7\u6807\u7b7e\u6765\u9009\u53d6 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State Account length Area code 0 KS 128 415 1 OH 107 415 2 NJ 137 415 3 OH 84 408 4 OK 75 415 5 AL 118 510 df.iloc[0:5, 0:3] #\u901a\u8fc7\u7d22\u5f15\u6765\u9009\u53d6\uff0c\u7c7b\u4f3c\u4e8epython\u7684\u5207\u7247\u64cd\u4f5c .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State Account length Area code 0 KS 128 415 1 OH 107 415 2 NJ 137 415 3 OH 84 408 4 OK 75 415 df.apply(max) #\u5e94\u7528\u5230\u6bcf\u4e00\u5217 State WY Account length 243 Area code 510 International plan Yes Voice mail plan Yes Number vmail messages 51 Total day minutes 350.8 Total day calls 165 Total day charge 59.64 Total eve minutes 363.7 Total eve calls 170 Total eve charge 30.91 Total night minutes 395 Total night calls 175 Total night charge 17.77 Total intl minutes 20 Total intl calls 20 Total intl charge 5.4 Customer service calls 9 Churn 1 dtype: object df[df['State'].apply(lambda state: state[0] == 'W')].head() #\u83b7\u53d6\u9996\u5b57\u6bcd\u4e3aW\u7684\u5dde .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State Account length Area code International plan Voice mail plan Number vmail messages Total day minutes Total day calls Total day charge Total eve minutes Total eve calls Total eve charge Total night minutes Total night calls Total night charge Total intl minutes Total intl calls Total intl charge Customer service calls Churn 9 WV 141 415 Yes Yes 37 258.6 84 43.96 222.0 111 18.87 326.4 97 14.69 11.2 5 3.02 0 0 26 WY 57 408 No Yes 39 213.0 115 36.21 191.1 112 16.24 182.7 115 8.22 9.5 3 2.57 0 0 44 WI 64 510 No No 0 154.0 67 26.18 225.8 118 19.19 265.3 86 11.94 3.5 3 0.95 1 0 49 WY 97 415 No Yes 24 133.2 135 22.64 217.2 58 18.46 70.6 79 3.18 11.0 3 2.97 1 0 54 WY 87 415 No No 0 151.0 83 25.67 219.7 116 18.67 203.9 127 9.18 9.7 3 2.62 5 1 d = {'No': False, 'Yes': True} df['International plan'] = df['International plan'].map(d) #\u5c06No\u8f6c\u6362\u4e3aFalse Yes\u8f6c\u6362\u4e3aTrue df.head() .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State Account length Area code International plan Voice mail plan Number vmail messages Total day minutes Total day calls Total day charge Total eve minutes Total eve calls Total eve charge Total night minutes Total night calls Total night charge Total intl minutes Total intl calls Total intl charge Customer service calls Churn 0 KS 128 415 False Yes 25 265.1 110 45.07 197.4 99 16.78 244.7 91 11.01 10.0 3 2.70 1 0 1 OH 107 415 False Yes 26 161.6 123 27.47 195.5 103 16.62 254.4 103 11.45 13.7 3 3.70 1 0 2 NJ 137 415 False No 0 243.4 114 41.38 121.2 110 10.30 162.6 104 7.32 12.2 5 3.29 0 0 3 OH 84 408 True No 0 299.4 71 50.90 61.9 88 5.26 196.9 89 8.86 6.6 7 1.78 2 0 4 OK 75 415 True No 0 166.7 113 28.34 148.3 122 12.61 186.9 121 8.41 10.1 3 2.73 3 0 df = df.replace({'Voice mail plan': d}) #\u7528replace\u4e5f\u53ef\u4ee5\u8fbe\u5230\u76f8\u540c\u7684\u76ee\u7684 df.head() .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State Account length Area code International plan Voice mail plan Number vmail messages Total day minutes Total day calls Total day charge Total eve minutes Total eve calls Total eve charge Total night minutes Total night calls Total night charge Total intl minutes Total intl calls Total intl charge Customer service calls Churn 0 KS 128 415 False True 25 265.1 110 45.07 197.4 99 16.78 244.7 91 11.01 10.0 3 2.70 1 0 1 OH 107 415 False True 26 161.6 123 27.47 195.5 103 16.62 254.4 103 11.45 13.7 3 3.70 1 0 2 NJ 137 415 False False 0 243.4 114 41.38 121.2 110 10.30 162.6 104 7.32 12.2 5 3.29 0 0 3 OH 84 408 True False 0 299.4 71 50.90 61.9 88 5.26 196.9 89 8.86 6.6 7 1.78 2 0 4 OK 75 415 True False 0 166.7 113 28.34 148.3 122 12.61 186.9 121 8.41 10.1 3 2.73 3 0 \u6c47\u603b\u8868 pd.crosstab(df['Churn'], df['International plan']) .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } International plan False True Churn 0 2664 186 1 346 137 pd.crosstab(df['Churn'], df['Voice mail plan'], normalize=True) .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } Voice mail plan False True Churn 0 0.602460 0.252625 1 0.120912 0.024002 total_calls = df['Total day calls'] + df['Total eve calls'] + \\ df['Total night calls'] + df['Total intl calls'] # loc \u53c2\u6570\u662f\u63d2\u5165 Series \u5bf9\u8c61\u540e\u9009\u62e9\u7684\u5217\u6570 # \u8bbe\u7f6e\u4e3a len(df.columns)\u4ee5\u4fbf\u5c06\u8ba1\u7b97\u540e\u7684 Total calls \u7c98\u8d34\u5230\u6700\u540e\u4e00\u5217 df.insert(loc=len(df.columns), column='Total calls', value=total_calls) df.head() .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State Account length Area code International plan Voice mail plan Number vmail messages Total day minutes Total day calls Total day charge Total eve minutes ... Total eve charge Total night minutes Total night calls Total night charge Total intl minutes Total intl calls Total intl charge Customer service calls Churn Total calls 0 KS 128 415 False True 25 265.1 110 45.07 197.4 ... 16.78 244.7 91 11.01 10.0 3 2.70 1 0 303 1 OH 107 415 False True 26 161.6 123 27.47 195.5 ... 16.62 254.4 103 11.45 13.7 3 3.70 1 0 332 2 NJ 137 415 False False 0 243.4 114 41.38 121.2 ... 10.30 162.6 104 7.32 12.2 5 3.29 0 0 333 3 OH 84 408 True False 0 299.4 71 50.90 61.9 ... 5.26 196.9 89 8.86 6.6 7 1.78 2 0 255 4 OK 75 415 True False 0 166.7 113 28.34 148.3 ... 12.61 186.9 121 8.41 10.1 3 2.73 3 0 359 5 rows \u00d7 21 columns df['Total charge'] = df['Total day charge'] + df['Total eve charge'] + \\ df['Total night charge'] + df['Total intl charge'] #\u4e0d\u521b\u9020\u5b9e\u4f8b\u7684\u60c5\u51b5\u4e0b\u76f4\u63a5\u63d2\u5165 df.head() .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State Account length Area code International plan Voice mail plan Number vmail messages Total day minutes Total day calls Total day charge Total eve minutes ... Total night minutes Total night calls Total night charge Total intl minutes Total intl calls Total intl charge Customer service calls Churn Total calls Total charge 0 KS 128 415 False True 25 265.1 110 45.07 197.4 ... 244.7 91 11.01 10.0 3 2.70 1 0 303 75.56 1 OH 107 415 False True 26 161.6 123 27.47 195.5 ... 254.4 103 11.45 13.7 3 3.70 1 0 332 59.24 2 NJ 137 415 False False 0 243.4 114 41.38 121.2 ... 162.6 104 7.32 12.2 5 3.29 0 0 333 62.29 3 OH 84 408 True False 0 299.4 71 50.90 61.9 ... 196.9 89 8.86 6.6 7 1.78 2 0 255 66.80 4 OK 75 415 True False 0 166.7 113 28.34 148.3 ... 186.9 121 8.41 10.1 3 2.73 3 0 359 52.09 5 rows \u00d7 22 columns","title":"\u5b66\u4e602"},{"location":"pandas/learn_two/#_1","text":"df = pd.read_csv( 'https://labfile.oss.aliyuncs.com/courses/1283/telecom_churn.csv') df.head() .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State Account length Area code International plan Voice mail plan Number vmail messages Total day minutes Total day calls Total day charge Total eve minutes Total eve calls Total eve charge Total night minutes Total night calls Total night charge Total intl minutes Total intl calls Total intl charge Customer service calls Churn 0 KS 128 415 No Yes 25 265.1 110 45.07 197.4 99 16.78 244.7 91 11.01 10.0 3 2.70 1 False 1 OH 107 415 No Yes 26 161.6 123 27.47 195.5 103 16.62 254.4 103 11.45 13.7 3 3.70 1 False 2 NJ 137 415 No No 0 243.4 114 41.38 121.2 110 10.30 162.6 104 7.32 12.2 5 3.29 0 False 3 OH 84 408 Yes No 0 299.4 71 50.90 61.9 88 5.26 196.9 89 8.86 6.6 7 1.78 2 False 4 OK 75 415 Yes No 0 166.7 113 28.34 148.3 122 12.61 186.9 121 8.41 10.1 3 2.73 3 False df.info() #DataFrame \u7684\u4e00\u4e9b\u603b\u4f53\u4fe1\u606f\u3002 <class 'pandas.core.frame.DataFrame'> RangeIndex: 3333 entries, 0 to 3332 Data columns (total 20 columns): State 3333 non-null object Account length 3333 non-null int64 Area code 3333 non-null int64 International plan 3333 non-null object Voice mail plan 3333 non-null object Number vmail messages 3333 non-null int64 Total day minutes 3333 non-null float64 Total day calls 3333 non-null int64 Total day charge 3333 non-null float64 Total eve minutes 3333 non-null float64 Total eve calls 3333 non-null int64 Total eve charge 3333 non-null float64 Total night minutes 3333 non-null float64 Total night calls 3333 non-null int64 Total night charge 3333 non-null float64 Total intl minutes 3333 non-null float64 Total intl calls 3333 non-null int64 Total intl charge 3333 non-null float64 Customer service calls 3333 non-null int64 Churn 3333 non-null bool dtypes: bool(1), float64(8), int64(8), object(3) memory usage: 498.1+ KB df.shape #\u5f62\u72b6\u5927\u5c0f (3333, 20) df.columns #\u5217\u540d Index(['State', 'Account length', 'Area code', 'International plan', 'Voice mail plan', 'Number vmail messages', 'Total day minutes', 'Total day calls', 'Total day charge', 'Total eve minutes', 'Total eve calls', 'Total eve charge', 'Total night minutes', 'Total night calls', 'Total night charge', 'Total intl minutes', 'Total intl calls', 'Total intl charge', 'Customer service calls', 'Churn'], dtype='object') df['Churn'] = df['Churn'].astype('int64') #\u5c06Churn\u5217\u4fee\u6539\u6570\u636e\u7c7b\u578b df.info() <class 'pandas.core.frame.DataFrame'> RangeIndex: 3333 entries, 0 to 3332 Data columns (total 20 columns): State 3333 non-null object Account length 3333 non-null int64 Area code 3333 non-null int64 International plan 3333 non-null object Voice mail plan 3333 non-null object Number vmail messages 3333 non-null int64 Total day minutes 3333 non-null float64 Total day calls 3333 non-null int64 Total day charge 3333 non-null float64 Total eve minutes 3333 non-null float64 Total eve calls 3333 non-null int64 Total eve charge 3333 non-null float64 Total night minutes 3333 non-null float64 Total night calls 3333 non-null int64 Total night charge 3333 non-null float64 Total intl minutes 3333 non-null float64 Total intl calls 3333 non-null int64 Total intl charge 3333 non-null float64 Customer service calls 3333 non-null int64 Churn 3333 non-null int64 dtypes: float64(8), int64(9), object(3) memory usage: 520.9+ KB df.describe() #\u663e\u793a\u6570\u503c\u7279\u5f81\uff08int64 \u548c float64\uff09\u7684\u57fa\u672c\u7edf\u8ba1\u5b66\u7279\u6027 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } Account length Area code Number vmail messages Total day minutes Total day calls Total day charge Total eve minutes Total eve calls Total eve charge Total night minutes Total night calls Total night charge Total intl minutes Total intl calls Total intl charge Customer service calls Churn count 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 3333.000000 mean 101.064806 437.182418 8.099010 179.775098 100.435644 30.562307 200.980348 100.114311 17.083540 200.872037 100.107711 9.039325 10.237294 4.479448 2.764581 1.562856 0.144914 std 39.822106 42.371290 13.688365 54.467389 20.069084 9.259435 50.713844 19.922625 4.310668 50.573847 19.568609 2.275873 2.791840 2.461214 0.753773 1.315491 0.352067 min 1.000000 408.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 23.200000 33.000000 1.040000 0.000000 0.000000 0.000000 0.000000 0.000000 25% 74.000000 408.000000 0.000000 143.700000 87.000000 24.430000 166.600000 87.000000 14.160000 167.000000 87.000000 7.520000 8.500000 3.000000 2.300000 1.000000 0.000000 50% 101.000000 415.000000 0.000000 179.400000 101.000000 30.500000 201.400000 100.000000 17.120000 201.200000 100.000000 9.050000 10.300000 4.000000 2.780000 1.000000 0.000000 75% 127.000000 510.000000 20.000000 216.400000 114.000000 36.790000 235.300000 114.000000 20.000000 235.300000 113.000000 10.590000 12.100000 6.000000 3.270000 2.000000 0.000000 max 243.000000 510.000000 51.000000 350.800000 165.000000 59.640000 363.700000 170.000000 30.910000 395.000000 175.000000 17.770000 20.000000 20.000000 5.400000 9.000000 1.000000 df.describe(include=['object', 'bool']) #\u901a\u8fc7 include \u53c2\u6570\u663e\u5f0f\u6307\u5b9a\u5305\u542b\u7684\u6570\u636e\u7c7b\u578b\uff0c\u53ef\u4ee5\u67e5\u770b\u975e\u6570\u503c\u7279\u5f81\u7684\u7edf\u8ba1\u6570\u636e .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State International plan Voice mail plan count 3333 3333 3333 unique 51 2 2 top WV No No freq 106 3010 2411 df['Churn'].value_counts() #\u5982\u5176\u540d 0 2850 1 483 Name: Churn, dtype: int64 df['Churn'].value_counts(normalize=True) #\u4f20\u5165\u53c2\u6570\u663e\u793a\u6bd4\u4f8b 0 0.855086 1 0.144914 Name: Churn, dtype: float64 df.sort_values(by='Total day charge', ascending=False).head() #\u6839\u636eTotal day charge\u5217\u8fdb\u884c\u6392\u5e8f ascending=False\u4e3a\u5012\u5e8f\u6392\u5e8f .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State Account length Area code International plan Voice mail plan Number vmail messages Total day minutes Total day calls Total day charge Total eve minutes Total eve calls Total eve charge Total night minutes Total night calls Total night charge Total intl minutes Total intl calls Total intl charge Customer service calls Churn 365 CO 154 415 No No 0 350.8 75 59.64 216.5 94 18.40 253.9 100 11.43 10.1 9 2.73 1 1 985 NY 64 415 Yes No 0 346.8 55 58.96 249.5 79 21.21 275.4 102 12.39 13.3 9 3.59 1 1 2594 OH 115 510 Yes No 0 345.3 81 58.70 203.4 106 17.29 217.5 107 9.79 11.8 8 3.19 1 1 156 OH 83 415 No No 0 337.4 120 57.36 227.4 116 19.33 153.9 114 6.93 15.8 7 4.27 0 1 605 MO 112 415 No No 0 335.5 77 57.04 212.5 109 18.06 265.0 132 11.93 12.7 8 3.43 2 1 df.sort_values(by=['Churn', 'Total day charge'], ascending=[True, False]).head() #\u5148\u6309 Churn \u79bb\u7f51\u7387 \u5347\u5e8f\u6392\u5217\uff0c\u518d\u6309 Total day charge \u6bcf\u65e5\u603b\u8bdd\u8d39 \u964d\u5e8f\u6392\u5217 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State Account length Area code International plan Voice mail plan Number vmail messages Total day minutes Total day calls Total day charge Total eve minutes Total eve calls Total eve charge Total night minutes Total night calls Total night charge Total intl minutes Total intl calls Total intl charge Customer service calls Churn 688 MN 13 510 No Yes 21 315.6 105 53.65 208.9 71 17.76 260.1 123 11.70 12.1 3 3.27 3 0 2259 NC 210 415 No Yes 31 313.8 87 53.35 147.7 103 12.55 192.7 97 8.67 10.1 7 2.73 3 0 534 LA 67 510 No No 0 310.4 97 52.77 66.5 123 5.65 246.5 99 11.09 9.2 10 2.48 4 0 575 SD 114 415 No Yes 36 309.9 90 52.68 200.3 89 17.03 183.5 105 8.26 14.2 2 3.83 1 0 2858 AL 141 510 No Yes 28 308.0 123 52.36 247.8 128 21.06 152.9 103 6.88 7.4 3 2.00 1 0 df[df['Churn'] == 1].mean() Account length 102.664596 Area code 437.817805 Number vmail messages 5.115942 Total day minutes 206.914079 Total day calls 101.335404 Total day charge 35.175921 Total eve minutes 212.410145 Total eve calls 100.561077 Total eve charge 18.054969 Total night minutes 205.231677 Total night calls 100.399586 Total night charge 9.235528 Total intl minutes 10.700000 Total intl calls 4.163561 Total intl charge 2.889545 Customer service calls 2.229814 Churn 1.000000 dtype: float64 df[df['Churn'] == 1]['Total day minutes'].mean() 206.91407867494814 df.loc[0:5, 'State':'Area code'] #\u901a\u8fc7\u6807\u7b7e\u6765\u9009\u53d6 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State Account length Area code 0 KS 128 415 1 OH 107 415 2 NJ 137 415 3 OH 84 408 4 OK 75 415 5 AL 118 510 df.iloc[0:5, 0:3] #\u901a\u8fc7\u7d22\u5f15\u6765\u9009\u53d6\uff0c\u7c7b\u4f3c\u4e8epython\u7684\u5207\u7247\u64cd\u4f5c .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State Account length Area code 0 KS 128 415 1 OH 107 415 2 NJ 137 415 3 OH 84 408 4 OK 75 415 df.apply(max) #\u5e94\u7528\u5230\u6bcf\u4e00\u5217 State WY Account length 243 Area code 510 International plan Yes Voice mail plan Yes Number vmail messages 51 Total day minutes 350.8 Total day calls 165 Total day charge 59.64 Total eve minutes 363.7 Total eve calls 170 Total eve charge 30.91 Total night minutes 395 Total night calls 175 Total night charge 17.77 Total intl minutes 20 Total intl calls 20 Total intl charge 5.4 Customer service calls 9 Churn 1 dtype: object df[df['State'].apply(lambda state: state[0] == 'W')].head() #\u83b7\u53d6\u9996\u5b57\u6bcd\u4e3aW\u7684\u5dde .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State Account length Area code International plan Voice mail plan Number vmail messages Total day minutes Total day calls Total day charge Total eve minutes Total eve calls Total eve charge Total night minutes Total night calls Total night charge Total intl minutes Total intl calls Total intl charge Customer service calls Churn 9 WV 141 415 Yes Yes 37 258.6 84 43.96 222.0 111 18.87 326.4 97 14.69 11.2 5 3.02 0 0 26 WY 57 408 No Yes 39 213.0 115 36.21 191.1 112 16.24 182.7 115 8.22 9.5 3 2.57 0 0 44 WI 64 510 No No 0 154.0 67 26.18 225.8 118 19.19 265.3 86 11.94 3.5 3 0.95 1 0 49 WY 97 415 No Yes 24 133.2 135 22.64 217.2 58 18.46 70.6 79 3.18 11.0 3 2.97 1 0 54 WY 87 415 No No 0 151.0 83 25.67 219.7 116 18.67 203.9 127 9.18 9.7 3 2.62 5 1 d = {'No': False, 'Yes': True} df['International plan'] = df['International plan'].map(d) #\u5c06No\u8f6c\u6362\u4e3aFalse Yes\u8f6c\u6362\u4e3aTrue df.head() .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State Account length Area code International plan Voice mail plan Number vmail messages Total day minutes Total day calls Total day charge Total eve minutes Total eve calls Total eve charge Total night minutes Total night calls Total night charge Total intl minutes Total intl calls Total intl charge Customer service calls Churn 0 KS 128 415 False Yes 25 265.1 110 45.07 197.4 99 16.78 244.7 91 11.01 10.0 3 2.70 1 0 1 OH 107 415 False Yes 26 161.6 123 27.47 195.5 103 16.62 254.4 103 11.45 13.7 3 3.70 1 0 2 NJ 137 415 False No 0 243.4 114 41.38 121.2 110 10.30 162.6 104 7.32 12.2 5 3.29 0 0 3 OH 84 408 True No 0 299.4 71 50.90 61.9 88 5.26 196.9 89 8.86 6.6 7 1.78 2 0 4 OK 75 415 True No 0 166.7 113 28.34 148.3 122 12.61 186.9 121 8.41 10.1 3 2.73 3 0 df = df.replace({'Voice mail plan': d}) #\u7528replace\u4e5f\u53ef\u4ee5\u8fbe\u5230\u76f8\u540c\u7684\u76ee\u7684 df.head() .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State Account length Area code International plan Voice mail plan Number vmail messages Total day minutes Total day calls Total day charge Total eve minutes Total eve calls Total eve charge Total night minutes Total night calls Total night charge Total intl minutes Total intl calls Total intl charge Customer service calls Churn 0 KS 128 415 False True 25 265.1 110 45.07 197.4 99 16.78 244.7 91 11.01 10.0 3 2.70 1 0 1 OH 107 415 False True 26 161.6 123 27.47 195.5 103 16.62 254.4 103 11.45 13.7 3 3.70 1 0 2 NJ 137 415 False False 0 243.4 114 41.38 121.2 110 10.30 162.6 104 7.32 12.2 5 3.29 0 0 3 OH 84 408 True False 0 299.4 71 50.90 61.9 88 5.26 196.9 89 8.86 6.6 7 1.78 2 0 4 OK 75 415 True False 0 166.7 113 28.34 148.3 122 12.61 186.9 121 8.41 10.1 3 2.73 3 0","title":"\u8bfb\u53d6\u6587\u4ef6"},{"location":"pandas/learn_two/#_2","text":"pd.crosstab(df['Churn'], df['International plan']) .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } International plan False True Churn 0 2664 186 1 346 137 pd.crosstab(df['Churn'], df['Voice mail plan'], normalize=True) .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } Voice mail plan False True Churn 0 0.602460 0.252625 1 0.120912 0.024002 total_calls = df['Total day calls'] + df['Total eve calls'] + \\ df['Total night calls'] + df['Total intl calls'] # loc \u53c2\u6570\u662f\u63d2\u5165 Series \u5bf9\u8c61\u540e\u9009\u62e9\u7684\u5217\u6570 # \u8bbe\u7f6e\u4e3a len(df.columns)\u4ee5\u4fbf\u5c06\u8ba1\u7b97\u540e\u7684 Total calls \u7c98\u8d34\u5230\u6700\u540e\u4e00\u5217 df.insert(loc=len(df.columns), column='Total calls', value=total_calls) df.head() .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State Account length Area code International plan Voice mail plan Number vmail messages Total day minutes Total day calls Total day charge Total eve minutes ... Total eve charge Total night minutes Total night calls Total night charge Total intl minutes Total intl calls Total intl charge Customer service calls Churn Total calls 0 KS 128 415 False True 25 265.1 110 45.07 197.4 ... 16.78 244.7 91 11.01 10.0 3 2.70 1 0 303 1 OH 107 415 False True 26 161.6 123 27.47 195.5 ... 16.62 254.4 103 11.45 13.7 3 3.70 1 0 332 2 NJ 137 415 False False 0 243.4 114 41.38 121.2 ... 10.30 162.6 104 7.32 12.2 5 3.29 0 0 333 3 OH 84 408 True False 0 299.4 71 50.90 61.9 ... 5.26 196.9 89 8.86 6.6 7 1.78 2 0 255 4 OK 75 415 True False 0 166.7 113 28.34 148.3 ... 12.61 186.9 121 8.41 10.1 3 2.73 3 0 359 5 rows \u00d7 21 columns df['Total charge'] = df['Total day charge'] + df['Total eve charge'] + \\ df['Total night charge'] + df['Total intl charge'] #\u4e0d\u521b\u9020\u5b9e\u4f8b\u7684\u60c5\u51b5\u4e0b\u76f4\u63a5\u63d2\u5165 df.head() .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } State Account length Area code International plan Voice mail plan Number vmail messages Total day minutes Total day calls Total day charge Total eve minutes ... Total night minutes Total night calls Total night charge Total intl minutes Total intl calls Total intl charge Customer service calls Churn Total calls Total charge 0 KS 128 415 False True 25 265.1 110 45.07 197.4 ... 244.7 91 11.01 10.0 3 2.70 1 0 303 75.56 1 OH 107 415 False True 26 161.6 123 27.47 195.5 ... 254.4 103 11.45 13.7 3 3.70 1 0 332 59.24 2 NJ 137 415 False False 0 243.4 114 41.38 121.2 ... 162.6 104 7.32 12.2 5 3.29 0 0 333 62.29 3 OH 84 408 True False 0 299.4 71 50.90 61.9 ... 196.9 89 8.86 6.6 7 1.78 2 0 255 66.80 4 OK 75 415 True False 0 166.7 113 28.34 148.3 ... 186.9 121 8.41 10.1 3 2.73 3 0 359 52.09 5 rows \u00d7 22 columns","title":"\u6c47\u603b\u8868"},{"location":"python/","text":"python\u662f\u6211\u9ad8\u4e2d\u81ea\u5b66\u7684\u8bed\u8a00\uff0c\u672c\u8eab\u5176\u5c31\u6bd4\u8f83\u7b80\u5355\u3002 \u6240\u4ee5\u7b80\u5355\u7684python\u57fa\u7840\u7c7b\u7684\u4e1c\u897f\u6211\u4e0d\u4f1a\u5199\u7684 \u6211\u53ea\u4f1a\u5199\u4e00\u4e9b\u6211\u76ee\u524d\u6b63\u5728\u5b66\u4e60\u7684python\u7684\u77e5\u8bc6\u5185\u5bb9 \u6bd4\u5982\u591a\u7ebf\u7a0b\uff0c\u722c\u866b\u6848\u4f8b\uff0c\u5404\u79cd\u5e93\u7b49\u7b49 Then,START!","title":"\u4ecb\u7ecd"},{"location":"python/#thenstart","text":"","title":"Then,START!"},{"location":"python/asyncio/","text":"import threading import time \u591a\u7ebf\u7a0b\u4f8b\u5b50 def spider(): #..... time.sleep(0.02) def main1(): for i in range(100): spider() def main2(): thread_list = [] for i in range(100): thread = threading.Thread(target = spider) thread.start() thread_list.append(thread) for t in thread_list: t.join() if __name__ == \"__main__\": start = time.time() main1() end = time.time() print(\"time1 :{:.4f}\".format(end-start)) start = time.time() main2() end = time.time() print(\"time2 :{:4f}\".format(end-start)) time1 :2.0523 time2 :0.037929 yield def fib(n): a,b = 0,1 while b<n: a,b = b,a+b yield a print(fib(100)) for i in fib(100): print(i) <generator object fib at 0x000002B1A7AA1E60> 1 1 2 3 5 8 13 21 34 55 89 \u534f\u7a0b GEN_CREATED \u521b\u5efa\u5b8c\u6210\uff0c\u7b49\u5f85\u6267\u884c GEN_RUNNING \u89e3\u91ca\u5668\u6b63\u5728\u6267\u884c GEN_SUSPENDED \u5728 yield \u8868\u8fbe\u5f0f\u5904\u6682\u505c GEN_CLOSE \u6267\u884c\u7ed3\u675f\uff0c\u751f\u6210\u5668\u505c\u6b62 import inspect def generator(): i = \"\u6fc0\u6d3b\u751f\u6210\u5668\" while True: try: value = yield i except ValueError: print(\"OVER\") i = value g = generator() print(inspect.getgeneratorstate(g)) #\u67e5\u770b\u72b6\u6001 next(g) GEN_CREATED '\u6fc0\u6d3b\u751f\u6210\u5668' inspect.getgeneratorstate(g) #\u67e5\u770b\u751f\u6210\u5668\u72b6\u6001 'GEN_SUSPENDED' g.send(\"hello world\") 'hello world' \u6682\u505c\u72b6\u6001\u7684\u751f\u6210\u5668\u53ef\u4ee5\u4f7f\u7528 send \u65b9\u6cd5\u53d1\u9001\u6570\u636e\uff0c\u6b64\u65b9\u6cd5\u7684\u53c2\u6570\u5c31\u662f yield \u8868\u8fbe\u5f0f\u7684\u503c\uff0c\u4e5f\u5c31\u662f yield \u8868\u8fbe\u5f0f\u7b49\u53f7\u524d\u9762\u7684 value \u53d8\u91cf\u7684\u503c\u53d8\u6210 'Hello Shiyanlou'\uff0c\u7ee7\u7eed\u5411\u4e0b\u6267\u884c\u5b8c\u4e00\u6b21 while \u5faa\u73af\uff0c\u53d8\u91cf i \u88ab\u8d4b\u503c\uff0c\u7ee7\u7eed\u8fd0\u884c\u4e0b\u4e00\u6b21\u5faa\u73af\uff0cyield \u8868\u8fbe\u5f0f\u5f39\u51fa\u53d8\u91cf i g.throw(ValueError) #\u629b\u51fa\u5f02\u5e38 \u7ed3\u675f OVER 'hello world' g.close() inspect.getgeneratorstate(g) #\u5173\u95ed\u4e86 'GEN_CLOSED' \u9884\u6fc0\u534f\u7a0b from functools import wraps def corcut(func): @wraps(func) def wrapper(*args,**kw): g = func(*args,**kw) next(g) return g return wrapper @corcut #\u88c5\u9970\u5668 def generator(): i = \"\u6fc0\u6d3b\u751f\u6210\u5668\" while True: try: value = yield i except ValueError: print(\"OVER\") i = value g = generator() print(inspect.getgeneratorstate(g)) #\u6b64\u65f6\u5df2\u7ecf\u7528\u88c5\u9970\u5668\u5c06\u751f\u6210\u5668\u6fc0\u6d3b\u4e86 GEN_SUSPENDED @corcut def generator(): l = [] while True: value = yield if value == \"CLOSE\": break l.append(value) return l g = generator() for i in ['a','b','CLOSE']: try: g.send(i) except StopIteration as e: value = e.value value ['a', 'b'] yield from\u7528\u6cd5 from itertools import chain c = chain({'one','two','three'},list(\"abc\")) for i in c: print(i) three two one a b c def chains1(*args): for i in args: for n in i: yield n def chains2(*args): for i in args: yield from i #i\u4e3a\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u907f\u514d\u5d4c\u5957\u5faa\u73af c1 = chains1({\"one\",\"two\",\"three\"},list(\"abc\")) for i in c1: print(i) print(\"\\n\") c2 = chains2({\"one\",\"two\",\"three\"},list(\"abc\")) for i in c2: print(i) three two one a b c three two one a b c \u8f6c\u79fb\u63a7\u5236\u6743 from functools import wraps from faker import Faker import time def corout(func): @wraps(func) def wapper(*args,**kw): g = func(*args,**kw) next(g) return g return wapper def generator(): l = [] while True: i = yield if i == \"CLOSE\": break l.append(i) return sorted(l) @corout def generator2(): while True: l = yield from generator() print(\"\u6392\u5e8f\u540e\u7684\u5217\u8868\",l) print(\"-----------------\") if __name__ == \"__main__\": fake = Faker().country_code nest_country = [[fake() for i in range(3)] for j in range(3)] for country in nest_country: print('\u56fd\u5bb6\u4ee3\u53f7\u5217\u8868\uff1a', country) c = generator2() for i in country: c.send(i) c.send(\"CLOSE\") \u56fd\u5bb6\u4ee3\u53f7\u5217\u8868\uff1a ['AM', 'ZA', 'BG'] \u6392\u5e8f\u540e\u7684\u5217\u8868 ['AM', 'BG', 'ZA'] ----------------- \u56fd\u5bb6\u4ee3\u53f7\u5217\u8868\uff1a ['UG', 'BE', 'SI'] \u6392\u5e8f\u540e\u7684\u5217\u8868 ['BE', 'SI', 'UG'] ----------------- \u56fd\u5bb6\u4ee3\u53f7\u5217\u8868\uff1a ['SC', 'KI', 'KI'] \u6392\u5e8f\u540e\u7684\u5217\u8868 ['KI', 'KI', 'SC'] ----------------- asyncio\u6a21\u5757 import time import asyncio def one(): start = time.time() @asyncio.coroutine #1 def do_something(): #2 print(\"start ------\") time.sleep(0.1) #3 print(\"doing something\") loop = asyncio.get_event_loop() #4 coroutine = do_something() #5 loop.run_until_complete(coroutine) #6 end = time.time() print(\"\u6d88\u8017\u65f6\u95f4:{:.4f}\".format(end-start))#7 one() start ------ doing something \u6d88\u8017\u65f6\u95f4:0.1012 \u4ee3\u7801\u8bf4\u660e\uff1a 1\u3001\u4f7f\u7528\u534f\u7a0b\u88c5\u9970\u5668\u521b\u5efa\u534f\u7a0b\u51fd\u6570 2\u3001\u534f\u7a0b\u51fd\u6570 3\u3001\u6a21\u62df IO \u64cd\u4f5c 4\u3001\u521b\u5efa\u4e8b\u4ef6\u5faa\u73af\u3002\u6bcf\u4e2a\u7ebf\u7a0b\u4e2d\u53ea\u80fd\u6709\u4e00\u4e2a\u4e8b\u4ef6\u5faa\u73af\uff0cget_event_loop \u65b9\u6cd5\u4f1a\u83b7\u53d6\u5f53\u524d\u5df2\u7ecf\u5b58\u5728\u7684\u4e8b\u4ef6\u5faa\u73af\uff0c\u5982\u679c\u5f53\u524d\u7ebf\u7a0b\u4e2d\u6ca1\u6709\uff0c\u65b0\u5efa\u4e00\u4e2a 5\u3001\u8c03\u7528\u534f\u7a0b\u51fd\u6570\u83b7\u53d6\u534f\u7a0b\u5bf9\u8c61 6\u3001\u5c06\u534f\u7a0b\u5bf9\u8c61\u6ce8\u5165\u5230\u4e8b\u4ef6\u5faa\u73af\uff0c\u534f\u7a0b\u7684\u8fd0\u884c\u7531\u4e8b\u4ef6\u5faa\u73af\u63a7\u5236\u3002\u4e8b\u4ef6\u5faa\u73af\u7684 run_until_complete \u65b9\u6cd5\u4f1a\u963b\u585e\u8fd0\u884c\uff0c\u76f4\u5230\u4efb\u52a1\u5168\u90e8\u5b8c\u6210\u3002\u534f\u7a0b\u5bf9\u8c61\u4f5c\u4e3a run_until_complete \u65b9\u6cd5\u7684\u53c2\u6570\uff0cloop \u4f1a\u81ea\u52a8\u5c06\u534f\u7a0b\u5bf9\u8c61\u5305\u88c5\u6210\u4efb\u52a1\u6765\u8fd0\u884c\u3002\u540e\u9762\u6211\u4eec\u4f1a\u8bb2\u5230\u591a\u4e2a\u4efb\u52a1\u6ce8\u5165\u4e8b\u4ef6\u5faa\u73af\u7684\u60c5\u51b5 7\u3001\u6253\u5370\u7a0b\u5e8f\u8fd0\u884c\u8017\u65f6 import time import asyncio def two(): start = time.time() @asyncio.coroutine def do_something(): print(\"start ------\") time.sleep(0.1) print(\"doing something\") loop = asyncio.get_event_loop() coroutine = do_something() task = loop.create_task(coroutine) #1 print(\"task\u662f\u4e0d\u662fTask\u7684\u793a\u4f8b\uff1f\",isinstance(task,asyncio.Task)) #2 print(\"task state\",task._state) #3 loop.run_until_complete(task) #4 print(\"take state\",task._state) end = time.time() print(\"\u6d88\u8017\u65f6\u95f4:{:.4f}\".format(end-start)) two() task\u662f\u4e0d\u662fTask\u7684\u793a\u4f8b\uff1f True task state PENDING start ------ doing something take state FINISHED \u6d88\u8017\u65f6\u95f4:0.1013 1\u3001\u4e8b\u4ef6\u5faa\u73af\u7684 create_task \u65b9\u6cd5\u53ef\u4ee5\u521b\u5efa\u4efb\u52a1\uff0c\u53e6\u5916 asyncio.ensure_future \u65b9\u6cd5\u4e5f\u53ef\u4ee5\u521b\u5efa\u4efb\u52a1\uff0c\u53c2\u6570\u987b\u4e3a\u534f\u7a0b\u5bf9\u8c61 2\u3001task \u662f asyncio.Task \u7c7b\u7684\u5b9e\u4f8b\uff0c\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u534f\u7a0b\u5bf9\u8c61\u521b\u5efa\u4efb\u52a1\uff1f\u56e0\u4e3a\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d asyncio.Task \u505a\u4e86\u4e00\u4e9b\u5de5\u4f5c\uff0c\u5305\u62ec\u9884\u6fc0\u534f\u7a0b\u3001\u534f\u7a0b\u8fd0\u884c\u4e2d\u9047\u5230\u67d0\u4e9b\u5f02\u5e38\u65f6\u7684\u5904\u7406 3\u3001task \u5bf9\u8c61\u7684 _state \u5c5e\u6027\u4fdd\u5b58\u5f53\u524d\u4efb\u52a1\u7684\u8fd0\u884c\u72b6\u6001\uff0c\u4efb\u52a1\u7684\u8fd0\u884c\u72b6\u6001\u6709 PENDING \u548c FINISHED \u4e24\u79cd 4\u3001\u5c06\u4efb\u52a1\u6ce8\u5165\u4e8b\u4ef6\u5faa\u73af\uff0c\u963b\u585e\u8fd0\u884c async / await import functools def three(): start = time.time() #@asyncio.coroutine async def do_something(): #1 print(\"start doing\") time.sleep(0.1) print(\"done\") def callback(name,task): #2 print(\"call back:{}\".format(name)) print(\"call back:{}\".format(task._state)) loop = asyncio.get_event_loop() coroutine = do_something() task = loop.create_task(coroutine) task.add_done_callback(functools.partial(callback, 'vllbc')) #3 loop.run_until_complete(task) end = time.time() print(\"total time {:.4f}\".format(end-start)) three() start doing done call back:vllbc call back:FINISHED total time 0.1013 \u4ee3\u7801\u8bf4\u660e\uff1a 1\u3001\u4f7f\u7528 async \u5173\u952e\u5b57\u66ff\u4ee3 asyncio.coroutine \u88c5\u9970\u5668\u521b\u5efa\u534f\u7a0b\u51fd\u6570 2\u3001\u56de\u8c03\u51fd\u6570\uff0c\u534f\u7a0b\u7ec8\u6b62\u540e\u9700\u8981\u987a\u4fbf\u8fd0\u884c\u7684\u4ee3\u7801\u5199\u5165\u8fd9\u91cc\uff0c\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570\u6709\u8981\u6c42\uff0c\u6700\u540e\u4e00\u4e2a\u4f4d\u7f6e\u53c2\u6570\u987b\u4e3a task \u5bf9\u8c61 3\u3001task \u5bf9\u8c61\u7684 add_done_callback \u65b9\u6cd5\u53ef\u4ee5\u6dfb\u52a0\u56de\u8c03\u51fd\u6570\uff0c\u6ce8\u610f\u53c2\u6570\u5fc5\u987b\u662f\u56de\u8c03\u51fd\u6570\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4e0d\u80fd\u4f20\u5165\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570\uff0c\u8fd9\u4e00\u70b9\u9700\u8981\u901a\u8fc7 functools \u6a21\u5757\u7684 partial \u65b9\u6cd5\u89e3\u51b3\uff0c\u5c06\u56de\u8c03\u51fd\u6570\u548c\u5176\u53c2\u6570 name \u4f5c\u4e3a partial \u65b9\u6cd5\u7684\u53c2\u6570\uff0c\u6b64\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u5c31\u662f\u504f\u51fd\u6570\uff0c\u504f\u51fd\u6570\u53ef\u4f5c\u4e3a task.add_done_callback \u65b9\u6cd5\u7684\u53c2\u6570 def four(): start = time.time() async def do_something(name,t): print(\"start !>>\",name) await asyncio.sleep(t) #1 print('Stop coroutine', name) return 'Coroutine {} OK'.format(name) #2 loop = asyncio.get_event_loop() coroutine1 = do_something('wlb',3) #3 coroutine2 = do_something('yyh',1) task1 = loop.create_task(coroutine1) #4 task2 = loop.create_task(coroutine2) gather = asyncio.gather(task1,task2) #5 loop.run_until_complete(gather) print(\"task1\",task1.result()) print(\"task2\",task2.result()) #result = loop.run_until_complete(gather) #\u8fd9\u91ccresult\u5c31\u662f\u4e24\u4e2a\u8fd4\u56de\u503c\u7ec4\u6210\u7684\u5217\u8868 \u5373['task1 Coroutine wlb OK','task2 Coroutine yyh OK'] end = time.time() print(\"total time:{:.4f}\".format(end-start)) four() start !>> wlb start !>> yyh Stop coroutine yyh Stop coroutine wlb task1 Coroutine wlb OK task2 Coroutine yyh OK total time:3.0022 \u4ee3\u7801\u8bf4\u660e\uff1a 1\u3001await \u5173\u952e\u5b57\u7b49\u540c\u4e8e Python 3.4 \u4e2d\u7684 yield from \u8bed\u53e5\uff0c\u540e\u9762\u63a5\u534f\u7a0b\u5bf9\u8c61\u3002asyncio.sleep \u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u4e3a\u534f\u7a0b\u5bf9\u8c61\uff0c\u8fd9\u4e00\u6b65\u4e3a\u963b\u585e\u8fd0\u884c\u3002asyncio.sleep \u4e0e time.sleep \u662f\u4e0d\u540c\u7684\uff0c\u524d\u8005\u963b\u585e\u5f53\u524d\u534f\u7a0b\uff0c\u5373 corowork \u51fd\u6570\u7684\u8fd0\u884c\uff0c\u800c time.sleep \u4f1a\u963b\u585e\u6574\u4e2a\u7ebf\u7a0b\uff0c\u6240\u4ee5\u8fd9\u91cc\u5fc5\u987b\u7528\u524d\u8005\uff0c\u963b\u585e\u5f53\u524d\u534f\u7a0b\uff0cCPU \u53ef\u4ee5\u5728\u7ebf\u7a0b\u5185\u7684\u5176\u5b83\u534f\u7a0b\u4e2d\u6267\u884c 2\u3001\u534f\u7a0b\u51fd\u6570\u7684 return \u503c\u53ef\u4ee5\u5728\u534f\u7a0b\u8fd0\u884c\u7ed3\u675f\u540e\u4fdd\u5b58\u5230\u5bf9\u5e94\u7684 task \u5bf9\u8c61\u7684 result \u65b9\u6cd5\u4e2d 3\u3001\u521b\u5efa\u4e24\u4e2a\u534f\u7a0b\u5bf9\u8c61\uff0c\u5728\u534f\u7a0b\u5185\u90e8\u5206\u522b\u963b\u585e 3 \u79d2\u548c 1 \u79d2 4\u3001\u521b\u5efa\u4e24\u4e2a\u4efb\u52a1\u5bf9\u8c61 5\u3001\u5c06\u4efb\u52a1\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\uff0casyncio.gather \u65b9\u6cd5\u521b\u5efa\u4efb\u52a1\u6536\u96c6\u5668\u3002\u6ce8\u610f\uff0casyncio.gather \u65b9\u6cd5\u4e2d\u53c2\u6570\u7684\u987a\u5e8f\u51b3\u5b9a\u4e86\u534f\u7a0b\u7684\u542f\u52a8\u987a\u5e8f 6\u3001\u5c06\u4efb\u52a1\u6536\u96c6\u5668\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165\u4e8b\u4ef6\u5faa\u73af\u7684 run_until_complete \u65b9\u6cd5\uff0c\u963b\u585e\u8fd0\u884c\uff0c\u76f4\u5230\u5168\u90e8\u4efb\u52a1\u5b8c\u6210 7\u3001\u4efb\u52a1\u7ed3\u675f\u540e\uff0c\u4e8b\u4ef6\u5faa\u73af\u505c\u6b62\uff0c\u6253\u5370\u4efb\u52a1\u7684 result \u65b9\u6cd5\u8fd4\u56de\u503c\uff0c\u5373\u534f\u7a0b\u51fd\u6570\u7684 return \u503c \u5230\u8fd9\u4e00\u6b65\uff0c\u5927\u5bb6\u5e94\u8be5\u53ef\u4ee5\u770b\u5f97\u51fa\uff0c\u4e0a\u9762\u7684\u4ee3\u7801\u5df2\u7ecf\u662f\u5f02\u6b65\u7f16\u7a0b\u7684\u7ed3\u6784\u4e86\uff0c\u5728\u4e8b\u4ef6\u5faa\u73af\u5185\u90e8\uff0c\u4e24\u4e2a\u534f\u7a0b\u662f\u4ea4\u66ff\u8fd0\u884c\u5b8c\u6210\u7684\u3002\u7b80\u5355\u53d9\u8ff0\u4e00\u4e0b\u7a0b\u5e8f\u534f\u7a0b\u90e8\u5206\u7684\u8fd0\u884c\u8fc7\u7a0b\uff1a -> \u9996\u5148\u8fd0\u884c task1 -> \u6253\u5370 [corowork] Start coroutine ONE -> \u9047\u5230 asyncio.sleep \u963b\u585e -> \u91ca\u653e CPU \u8f6c\u5230 task2 \u4e2d\u6267\u884c -> \u6253\u5370 [corowork] Start coroutine TWO -> \u518d\u6b21\u9047\u5230 asyncio.sleep \u963b\u585e -> \u8fd9\u6b21\u6ca1\u6709\u5176\u5b83\u534f\u7a0b\u53ef\u4ee5\u8fd0\u884c\u4e86\uff0c\u53ea\u80fd\u7b49\u963b\u585e\u7ed3\u675f -> task2 \u7684\u963b\u585e\u65f6\u95f4\u8f83\u77ed\uff0c\u963b\u585e 1 \u79d2\u540e\u5148\u7ed3\u675f\uff0c\u6253\u5370 [corowork] Stop coroutine TWO -> \u53c8\u8fc7\u4e86 2 \u79d2\uff0c\u963b\u585e 3 \u79d2\u7684 task1 \u4e5f\u7ed3\u675f\u4e86\u963b\u585e\uff0c\u6253\u5370 [corowork] Stop coroutine ONE -> \u81f3\u6b64\u4e24\u4e2a\u4efb\u52a1\u5168\u90e8\u5b8c\u6210\uff0c\u4e8b\u4ef6\u5faa\u73af\u505c\u6b62 -> \u6253\u5370\u4e24\u4e2a\u4efb\u52a1\u7684 result -> \u6253\u5370\u7a0b\u5e8f\u8fd0\u884c\u65f6\u95f4 -> \u7a0b\u5e8f\u5168\u90e8\u7ed3\u675f \u5f02\u6b65\u7f16\u7a0b","title":"asyncio\u6a21\u5757\u5f02\u6b65\u7f16\u7a0b"},{"location":"python/asyncio/#_1","text":"def spider(): #..... time.sleep(0.02) def main1(): for i in range(100): spider() def main2(): thread_list = [] for i in range(100): thread = threading.Thread(target = spider) thread.start() thread_list.append(thread) for t in thread_list: t.join() if __name__ == \"__main__\": start = time.time() main1() end = time.time() print(\"time1 :{:.4f}\".format(end-start)) start = time.time() main2() end = time.time() print(\"time2 :{:4f}\".format(end-start)) time1 :2.0523 time2 :0.037929","title":"\u591a\u7ebf\u7a0b\u4f8b\u5b50"},{"location":"python/asyncio/#yield","text":"def fib(n): a,b = 0,1 while b<n: a,b = b,a+b yield a print(fib(100)) for i in fib(100): print(i) <generator object fib at 0x000002B1A7AA1E60> 1 1 2 3 5 8 13 21 34 55 89","title":"yield"},{"location":"python/asyncio/#_2","text":"GEN_CREATED \u521b\u5efa\u5b8c\u6210\uff0c\u7b49\u5f85\u6267\u884c GEN_RUNNING \u89e3\u91ca\u5668\u6b63\u5728\u6267\u884c GEN_SUSPENDED \u5728 yield \u8868\u8fbe\u5f0f\u5904\u6682\u505c GEN_CLOSE \u6267\u884c\u7ed3\u675f\uff0c\u751f\u6210\u5668\u505c\u6b62 import inspect def generator(): i = \"\u6fc0\u6d3b\u751f\u6210\u5668\" while True: try: value = yield i except ValueError: print(\"OVER\") i = value g = generator() print(inspect.getgeneratorstate(g)) #\u67e5\u770b\u72b6\u6001 next(g) GEN_CREATED '\u6fc0\u6d3b\u751f\u6210\u5668' inspect.getgeneratorstate(g) #\u67e5\u770b\u751f\u6210\u5668\u72b6\u6001 'GEN_SUSPENDED' g.send(\"hello world\") 'hello world' \u6682\u505c\u72b6\u6001\u7684\u751f\u6210\u5668\u53ef\u4ee5\u4f7f\u7528 send \u65b9\u6cd5\u53d1\u9001\u6570\u636e\uff0c\u6b64\u65b9\u6cd5\u7684\u53c2\u6570\u5c31\u662f yield \u8868\u8fbe\u5f0f\u7684\u503c\uff0c\u4e5f\u5c31\u662f yield \u8868\u8fbe\u5f0f\u7b49\u53f7\u524d\u9762\u7684 value \u53d8\u91cf\u7684\u503c\u53d8\u6210 'Hello Shiyanlou'\uff0c\u7ee7\u7eed\u5411\u4e0b\u6267\u884c\u5b8c\u4e00\u6b21 while \u5faa\u73af\uff0c\u53d8\u91cf i \u88ab\u8d4b\u503c\uff0c\u7ee7\u7eed\u8fd0\u884c\u4e0b\u4e00\u6b21\u5faa\u73af\uff0cyield \u8868\u8fbe\u5f0f\u5f39\u51fa\u53d8\u91cf i g.throw(ValueError) #\u629b\u51fa\u5f02\u5e38 \u7ed3\u675f OVER 'hello world' g.close() inspect.getgeneratorstate(g) #\u5173\u95ed\u4e86 'GEN_CLOSED'","title":"\u534f\u7a0b"},{"location":"python/asyncio/#_3","text":"from functools import wraps def corcut(func): @wraps(func) def wrapper(*args,**kw): g = func(*args,**kw) next(g) return g return wrapper @corcut #\u88c5\u9970\u5668 def generator(): i = \"\u6fc0\u6d3b\u751f\u6210\u5668\" while True: try: value = yield i except ValueError: print(\"OVER\") i = value g = generator() print(inspect.getgeneratorstate(g)) #\u6b64\u65f6\u5df2\u7ecf\u7528\u88c5\u9970\u5668\u5c06\u751f\u6210\u5668\u6fc0\u6d3b\u4e86 GEN_SUSPENDED @corcut def generator(): l = [] while True: value = yield if value == \"CLOSE\": break l.append(value) return l g = generator() for i in ['a','b','CLOSE']: try: g.send(i) except StopIteration as e: value = e.value value ['a', 'b']","title":"\u9884\u6fc0\u534f\u7a0b"},{"location":"python/asyncio/#yield-from","text":"from itertools import chain c = chain({'one','two','three'},list(\"abc\")) for i in c: print(i) three two one a b c def chains1(*args): for i in args: for n in i: yield n def chains2(*args): for i in args: yield from i #i\u4e3a\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u907f\u514d\u5d4c\u5957\u5faa\u73af c1 = chains1({\"one\",\"two\",\"three\"},list(\"abc\")) for i in c1: print(i) print(\"\\n\") c2 = chains2({\"one\",\"two\",\"three\"},list(\"abc\")) for i in c2: print(i) three two one a b c three two one a b c","title":"yield from\u7528\u6cd5"},{"location":"python/asyncio/#_4","text":"from functools import wraps from faker import Faker import time def corout(func): @wraps(func) def wapper(*args,**kw): g = func(*args,**kw) next(g) return g return wapper def generator(): l = [] while True: i = yield if i == \"CLOSE\": break l.append(i) return sorted(l) @corout def generator2(): while True: l = yield from generator() print(\"\u6392\u5e8f\u540e\u7684\u5217\u8868\",l) print(\"-----------------\") if __name__ == \"__main__\": fake = Faker().country_code nest_country = [[fake() for i in range(3)] for j in range(3)] for country in nest_country: print('\u56fd\u5bb6\u4ee3\u53f7\u5217\u8868\uff1a', country) c = generator2() for i in country: c.send(i) c.send(\"CLOSE\") \u56fd\u5bb6\u4ee3\u53f7\u5217\u8868\uff1a ['AM', 'ZA', 'BG'] \u6392\u5e8f\u540e\u7684\u5217\u8868 ['AM', 'BG', 'ZA'] ----------------- \u56fd\u5bb6\u4ee3\u53f7\u5217\u8868\uff1a ['UG', 'BE', 'SI'] \u6392\u5e8f\u540e\u7684\u5217\u8868 ['BE', 'SI', 'UG'] ----------------- \u56fd\u5bb6\u4ee3\u53f7\u5217\u8868\uff1a ['SC', 'KI', 'KI'] \u6392\u5e8f\u540e\u7684\u5217\u8868 ['KI', 'KI', 'SC'] -----------------","title":"\u8f6c\u79fb\u63a7\u5236\u6743"},{"location":"python/asyncio/#asyncio","text":"import time import asyncio def one(): start = time.time() @asyncio.coroutine #1 def do_something(): #2 print(\"start ------\") time.sleep(0.1) #3 print(\"doing something\") loop = asyncio.get_event_loop() #4 coroutine = do_something() #5 loop.run_until_complete(coroutine) #6 end = time.time() print(\"\u6d88\u8017\u65f6\u95f4:{:.4f}\".format(end-start))#7 one() start ------ doing something \u6d88\u8017\u65f6\u95f4:0.1012 \u4ee3\u7801\u8bf4\u660e\uff1a 1\u3001\u4f7f\u7528\u534f\u7a0b\u88c5\u9970\u5668\u521b\u5efa\u534f\u7a0b\u51fd\u6570 2\u3001\u534f\u7a0b\u51fd\u6570 3\u3001\u6a21\u62df IO \u64cd\u4f5c 4\u3001\u521b\u5efa\u4e8b\u4ef6\u5faa\u73af\u3002\u6bcf\u4e2a\u7ebf\u7a0b\u4e2d\u53ea\u80fd\u6709\u4e00\u4e2a\u4e8b\u4ef6\u5faa\u73af\uff0cget_event_loop \u65b9\u6cd5\u4f1a\u83b7\u53d6\u5f53\u524d\u5df2\u7ecf\u5b58\u5728\u7684\u4e8b\u4ef6\u5faa\u73af\uff0c\u5982\u679c\u5f53\u524d\u7ebf\u7a0b\u4e2d\u6ca1\u6709\uff0c\u65b0\u5efa\u4e00\u4e2a 5\u3001\u8c03\u7528\u534f\u7a0b\u51fd\u6570\u83b7\u53d6\u534f\u7a0b\u5bf9\u8c61 6\u3001\u5c06\u534f\u7a0b\u5bf9\u8c61\u6ce8\u5165\u5230\u4e8b\u4ef6\u5faa\u73af\uff0c\u534f\u7a0b\u7684\u8fd0\u884c\u7531\u4e8b\u4ef6\u5faa\u73af\u63a7\u5236\u3002\u4e8b\u4ef6\u5faa\u73af\u7684 run_until_complete \u65b9\u6cd5\u4f1a\u963b\u585e\u8fd0\u884c\uff0c\u76f4\u5230\u4efb\u52a1\u5168\u90e8\u5b8c\u6210\u3002\u534f\u7a0b\u5bf9\u8c61\u4f5c\u4e3a run_until_complete \u65b9\u6cd5\u7684\u53c2\u6570\uff0cloop \u4f1a\u81ea\u52a8\u5c06\u534f\u7a0b\u5bf9\u8c61\u5305\u88c5\u6210\u4efb\u52a1\u6765\u8fd0\u884c\u3002\u540e\u9762\u6211\u4eec\u4f1a\u8bb2\u5230\u591a\u4e2a\u4efb\u52a1\u6ce8\u5165\u4e8b\u4ef6\u5faa\u73af\u7684\u60c5\u51b5 7\u3001\u6253\u5370\u7a0b\u5e8f\u8fd0\u884c\u8017\u65f6 import time import asyncio def two(): start = time.time() @asyncio.coroutine def do_something(): print(\"start ------\") time.sleep(0.1) print(\"doing something\") loop = asyncio.get_event_loop() coroutine = do_something() task = loop.create_task(coroutine) #1 print(\"task\u662f\u4e0d\u662fTask\u7684\u793a\u4f8b\uff1f\",isinstance(task,asyncio.Task)) #2 print(\"task state\",task._state) #3 loop.run_until_complete(task) #4 print(\"take state\",task._state) end = time.time() print(\"\u6d88\u8017\u65f6\u95f4:{:.4f}\".format(end-start)) two() task\u662f\u4e0d\u662fTask\u7684\u793a\u4f8b\uff1f True task state PENDING start ------ doing something take state FINISHED \u6d88\u8017\u65f6\u95f4:0.1013 1\u3001\u4e8b\u4ef6\u5faa\u73af\u7684 create_task \u65b9\u6cd5\u53ef\u4ee5\u521b\u5efa\u4efb\u52a1\uff0c\u53e6\u5916 asyncio.ensure_future \u65b9\u6cd5\u4e5f\u53ef\u4ee5\u521b\u5efa\u4efb\u52a1\uff0c\u53c2\u6570\u987b\u4e3a\u534f\u7a0b\u5bf9\u8c61 2\u3001task \u662f asyncio.Task \u7c7b\u7684\u5b9e\u4f8b\uff0c\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u534f\u7a0b\u5bf9\u8c61\u521b\u5efa\u4efb\u52a1\uff1f\u56e0\u4e3a\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d asyncio.Task \u505a\u4e86\u4e00\u4e9b\u5de5\u4f5c\uff0c\u5305\u62ec\u9884\u6fc0\u534f\u7a0b\u3001\u534f\u7a0b\u8fd0\u884c\u4e2d\u9047\u5230\u67d0\u4e9b\u5f02\u5e38\u65f6\u7684\u5904\u7406 3\u3001task \u5bf9\u8c61\u7684 _state \u5c5e\u6027\u4fdd\u5b58\u5f53\u524d\u4efb\u52a1\u7684\u8fd0\u884c\u72b6\u6001\uff0c\u4efb\u52a1\u7684\u8fd0\u884c\u72b6\u6001\u6709 PENDING \u548c FINISHED \u4e24\u79cd 4\u3001\u5c06\u4efb\u52a1\u6ce8\u5165\u4e8b\u4ef6\u5faa\u73af\uff0c\u963b\u585e\u8fd0\u884c","title":"asyncio\u6a21\u5757"},{"location":"python/asyncio/#async-await","text":"import functools def three(): start = time.time() #@asyncio.coroutine async def do_something(): #1 print(\"start doing\") time.sleep(0.1) print(\"done\") def callback(name,task): #2 print(\"call back:{}\".format(name)) print(\"call back:{}\".format(task._state)) loop = asyncio.get_event_loop() coroutine = do_something() task = loop.create_task(coroutine) task.add_done_callback(functools.partial(callback, 'vllbc')) #3 loop.run_until_complete(task) end = time.time() print(\"total time {:.4f}\".format(end-start)) three() start doing done call back:vllbc call back:FINISHED total time 0.1013 \u4ee3\u7801\u8bf4\u660e\uff1a 1\u3001\u4f7f\u7528 async \u5173\u952e\u5b57\u66ff\u4ee3 asyncio.coroutine \u88c5\u9970\u5668\u521b\u5efa\u534f\u7a0b\u51fd\u6570 2\u3001\u56de\u8c03\u51fd\u6570\uff0c\u534f\u7a0b\u7ec8\u6b62\u540e\u9700\u8981\u987a\u4fbf\u8fd0\u884c\u7684\u4ee3\u7801\u5199\u5165\u8fd9\u91cc\uff0c\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570\u6709\u8981\u6c42\uff0c\u6700\u540e\u4e00\u4e2a\u4f4d\u7f6e\u53c2\u6570\u987b\u4e3a task \u5bf9\u8c61 3\u3001task \u5bf9\u8c61\u7684 add_done_callback \u65b9\u6cd5\u53ef\u4ee5\u6dfb\u52a0\u56de\u8c03\u51fd\u6570\uff0c\u6ce8\u610f\u53c2\u6570\u5fc5\u987b\u662f\u56de\u8c03\u51fd\u6570\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4e0d\u80fd\u4f20\u5165\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570\uff0c\u8fd9\u4e00\u70b9\u9700\u8981\u901a\u8fc7 functools \u6a21\u5757\u7684 partial \u65b9\u6cd5\u89e3\u51b3\uff0c\u5c06\u56de\u8c03\u51fd\u6570\u548c\u5176\u53c2\u6570 name \u4f5c\u4e3a partial \u65b9\u6cd5\u7684\u53c2\u6570\uff0c\u6b64\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u5c31\u662f\u504f\u51fd\u6570\uff0c\u504f\u51fd\u6570\u53ef\u4f5c\u4e3a task.add_done_callback \u65b9\u6cd5\u7684\u53c2\u6570 def four(): start = time.time() async def do_something(name,t): print(\"start !>>\",name) await asyncio.sleep(t) #1 print('Stop coroutine', name) return 'Coroutine {} OK'.format(name) #2 loop = asyncio.get_event_loop() coroutine1 = do_something('wlb',3) #3 coroutine2 = do_something('yyh',1) task1 = loop.create_task(coroutine1) #4 task2 = loop.create_task(coroutine2) gather = asyncio.gather(task1,task2) #5 loop.run_until_complete(gather) print(\"task1\",task1.result()) print(\"task2\",task2.result()) #result = loop.run_until_complete(gather) #\u8fd9\u91ccresult\u5c31\u662f\u4e24\u4e2a\u8fd4\u56de\u503c\u7ec4\u6210\u7684\u5217\u8868 \u5373['task1 Coroutine wlb OK','task2 Coroutine yyh OK'] end = time.time() print(\"total time:{:.4f}\".format(end-start)) four() start !>> wlb start !>> yyh Stop coroutine yyh Stop coroutine wlb task1 Coroutine wlb OK task2 Coroutine yyh OK total time:3.0022 \u4ee3\u7801\u8bf4\u660e\uff1a 1\u3001await \u5173\u952e\u5b57\u7b49\u540c\u4e8e Python 3.4 \u4e2d\u7684 yield from \u8bed\u53e5\uff0c\u540e\u9762\u63a5\u534f\u7a0b\u5bf9\u8c61\u3002asyncio.sleep \u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u4e3a\u534f\u7a0b\u5bf9\u8c61\uff0c\u8fd9\u4e00\u6b65\u4e3a\u963b\u585e\u8fd0\u884c\u3002asyncio.sleep \u4e0e time.sleep \u662f\u4e0d\u540c\u7684\uff0c\u524d\u8005\u963b\u585e\u5f53\u524d\u534f\u7a0b\uff0c\u5373 corowork \u51fd\u6570\u7684\u8fd0\u884c\uff0c\u800c time.sleep \u4f1a\u963b\u585e\u6574\u4e2a\u7ebf\u7a0b\uff0c\u6240\u4ee5\u8fd9\u91cc\u5fc5\u987b\u7528\u524d\u8005\uff0c\u963b\u585e\u5f53\u524d\u534f\u7a0b\uff0cCPU \u53ef\u4ee5\u5728\u7ebf\u7a0b\u5185\u7684\u5176\u5b83\u534f\u7a0b\u4e2d\u6267\u884c 2\u3001\u534f\u7a0b\u51fd\u6570\u7684 return \u503c\u53ef\u4ee5\u5728\u534f\u7a0b\u8fd0\u884c\u7ed3\u675f\u540e\u4fdd\u5b58\u5230\u5bf9\u5e94\u7684 task \u5bf9\u8c61\u7684 result \u65b9\u6cd5\u4e2d 3\u3001\u521b\u5efa\u4e24\u4e2a\u534f\u7a0b\u5bf9\u8c61\uff0c\u5728\u534f\u7a0b\u5185\u90e8\u5206\u522b\u963b\u585e 3 \u79d2\u548c 1 \u79d2 4\u3001\u521b\u5efa\u4e24\u4e2a\u4efb\u52a1\u5bf9\u8c61 5\u3001\u5c06\u4efb\u52a1\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\uff0casyncio.gather \u65b9\u6cd5\u521b\u5efa\u4efb\u52a1\u6536\u96c6\u5668\u3002\u6ce8\u610f\uff0casyncio.gather \u65b9\u6cd5\u4e2d\u53c2\u6570\u7684\u987a\u5e8f\u51b3\u5b9a\u4e86\u534f\u7a0b\u7684\u542f\u52a8\u987a\u5e8f 6\u3001\u5c06\u4efb\u52a1\u6536\u96c6\u5668\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165\u4e8b\u4ef6\u5faa\u73af\u7684 run_until_complete \u65b9\u6cd5\uff0c\u963b\u585e\u8fd0\u884c\uff0c\u76f4\u5230\u5168\u90e8\u4efb\u52a1\u5b8c\u6210 7\u3001\u4efb\u52a1\u7ed3\u675f\u540e\uff0c\u4e8b\u4ef6\u5faa\u73af\u505c\u6b62\uff0c\u6253\u5370\u4efb\u52a1\u7684 result \u65b9\u6cd5\u8fd4\u56de\u503c\uff0c\u5373\u534f\u7a0b\u51fd\u6570\u7684 return \u503c \u5230\u8fd9\u4e00\u6b65\uff0c\u5927\u5bb6\u5e94\u8be5\u53ef\u4ee5\u770b\u5f97\u51fa\uff0c\u4e0a\u9762\u7684\u4ee3\u7801\u5df2\u7ecf\u662f\u5f02\u6b65\u7f16\u7a0b\u7684\u7ed3\u6784\u4e86\uff0c\u5728\u4e8b\u4ef6\u5faa\u73af\u5185\u90e8\uff0c\u4e24\u4e2a\u534f\u7a0b\u662f\u4ea4\u66ff\u8fd0\u884c\u5b8c\u6210\u7684\u3002\u7b80\u5355\u53d9\u8ff0\u4e00\u4e0b\u7a0b\u5e8f\u534f\u7a0b\u90e8\u5206\u7684\u8fd0\u884c\u8fc7\u7a0b\uff1a -> \u9996\u5148\u8fd0\u884c task1 -> \u6253\u5370 [corowork] Start coroutine ONE -> \u9047\u5230 asyncio.sleep \u963b\u585e -> \u91ca\u653e CPU \u8f6c\u5230 task2 \u4e2d\u6267\u884c -> \u6253\u5370 [corowork] Start coroutine TWO -> \u518d\u6b21\u9047\u5230 asyncio.sleep \u963b\u585e -> \u8fd9\u6b21\u6ca1\u6709\u5176\u5b83\u534f\u7a0b\u53ef\u4ee5\u8fd0\u884c\u4e86\uff0c\u53ea\u80fd\u7b49\u963b\u585e\u7ed3\u675f -> task2 \u7684\u963b\u585e\u65f6\u95f4\u8f83\u77ed\uff0c\u963b\u585e 1 \u79d2\u540e\u5148\u7ed3\u675f\uff0c\u6253\u5370 [corowork] Stop coroutine TWO -> \u53c8\u8fc7\u4e86 2 \u79d2\uff0c\u963b\u585e 3 \u79d2\u7684 task1 \u4e5f\u7ed3\u675f\u4e86\u963b\u585e\uff0c\u6253\u5370 [corowork] Stop coroutine ONE -> \u81f3\u6b64\u4e24\u4e2a\u4efb\u52a1\u5168\u90e8\u5b8c\u6210\uff0c\u4e8b\u4ef6\u5faa\u73af\u505c\u6b62 -> \u6253\u5370\u4e24\u4e2a\u4efb\u52a1\u7684 result -> \u6253\u5370\u7a0b\u5e8f\u8fd0\u884c\u65f6\u95f4 -> \u7a0b\u5e8f\u5168\u90e8\u7ed3\u675f","title":"async / await"},{"location":"python/asyncio/#_5","text":"","title":"\u5f02\u6b65\u7f16\u7a0b"},{"location":"python/jupyter/","text":"jupyter \u662fpython\u6570\u636e\u5206\u6790\u9886\u57df\u4e0d\u53ef\u7f3a\u5c11\u7684\u5229\u5668\uff0c\u800c\u6211\u4e5f\u5728\u4f7f\u7528\u8fc7\u540e\u7231\u4e0a\u4e86\u5b83\uff01 \u53ef\u4ee5\u7528 pip \u6216\u8005 anaconda \u6765\u5b89\u88c5 jupyter \u7136\u540e\u5c31\u53ef\u4ee5\u5728\u4efb\u610f\u76ee\u5f55\u91cc\u542f\u52a8 jupyter \u4e86 jupyter notebook \u4e4b\u540e\u4f1a\u6253\u5f00\u754c\u9762\uff0c\u5177\u4f53\u64cd\u4f5c\u4e0d\u518d\u8d58\u8ff0\uff0c\u4e0b\u9762\u5199\u4e00\u4e0b\u6211\u7684\u5b66\u4e60\u7b14\u8bb0\u3002 jupyter\u4e2d\u547d\u4ee4\u6a21\u5f0f m\u5207\u6362\u5230markdown\u6a21\u5f0f y\u5207\u6362\u56de\u6765 dd\u5220\u9664\u5f53\u524d\u884c esc\u5207\u6362\u5230\u547d\u4ee4\u6a21\u5f0f S\u4fdd\u5b58 j,k\u5206\u522b\u4e3a\u4e0b\uff0c\u4e0a\u79fb\u52a8\uff0c\u548cvim\u76f8\u540c l\u4e3a\u663e\u793a\u884c\u53f7\uff0c\u518d\u6309\u4e00\u904d\u53d6\u6d88\u663e\u793a \u6b64\u5916\uff0c plotly \u7b49\u5de5\u5177\u4e5f\u5c3d\u91cf\u5728 jupyter \u91cc\u9762\u4f7f\u7528\u4ee5\u65b9\u4fbf\u64cd\u4f5c\uff01","title":"Jupyter"},{"location":"python/plotly/","text":"plotly \u5b66\u4e60\uff1a import plotly.graph_objects as go \u662f\u753b\u56fe\u7684\u4e3b\u8981\u5e93 \u9009\u62e9\u7c7b\u578b go.Scatter() \u753b\u70b9\u6216\u8005\u753b\u7ebf \u5728 Scatter() \u4e2d\u4f20\u5165 mode='markers\u2019 \u5373\u53ef\u521b\u5efa\u6563\u70b9\u56fe \u9ed8\u8ba4 mode='lines' \u5373\u76f4\u7ebf\u56fe \u4e5f\u53ef\u4ee5 mode='lines+markers' \u8bbe\u4e3a\u6298\u7ebf\u56fe go.Bar() \u5efa\u7acb\u67f1\u72b6\u56fe go.Scatter() \u5efa\u7acb\u6563\u70b9\u6216\u8005\u6298\u7ebf\u56fe go.Scatter3d() \u5efa\u7acb3d\u6563\u70b9\u56fe\uff0c\u53ef\u4ee5\u4f20\u5165mode\u53c2\u6570\u540c\u4e0a \u5728\u521b\u5efa\u8fd9\u4e9b\u56fe\u8868\u7684\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u4ee5\u4f20\u5165marker\u6216line\u53c2\u6570\u4fee\u6539\u4e00\u4e9b\u7ec6\u8282 \u6563\u70b9\u56fe\u65f6\u4f20\u5165 marker={'size':3,'color':'red'} \u8bbe\u7f6e\u6563\u70b9 \u6298\u7ebf\u56fe\u65f6\uff0c\u4f20\u5165 line={\"dash\":\"dot}#\u8bbe\u7f6e\u4e3a\u865a\u7ebf \u8bbe\u7f6e\u7ebf ps:dash \u4e3adot\u65f6\u4e3a\u865a\u7ebf\uff0c\u4e3adash\u65f6\u662f\u7531\u77ed\u7ebf\u7ec4\u6210\u7684\u865a\u7ebf\uff0c\u4e3adashdot\u65f6\u4e3a\u7531\u70b9\u548c\u77ed\u7ebf\u7ec4\u6210\u7684\u865a\u7ebf \u6709\u65f6\u5019\u6570\u636e\u4e0d\u662f\u8fde\u7eed\u7684\uff0c\u4e2d\u95f4\u53ef\u80fd\u4f1a\u65ad\u5c42\uff0c\u8fd9\u65f6\u5019\u9700\u8981\u6307\u5b9a connectgaps \u53c2\u6570\uff0c\u4e3aTure\u65f6\uff0c\u5c06\u65ad\u70b9\u8fde\u8d77\u6765 \u200b \u4e5f\u53ef\u4ee5\u4f20\u5165name\u53c2\u6570\u4fee\u6539\u56fe\u4f8b\u540d\u79f0\u3002 \u56fe\u8868\u4f18\u5316 \u5728\u521b\u5efa\u5b8c\u56fe\u8868\u4e4b\u540e\u53ef\u4ee5\u5bf9\u5176\u8fdb\u884c\u4f18\u5316 fig = go...... fig.update_layout( title='title',#\u56fe\u8868\u6807\u9898 xaxis_title='xlable',#x\u8f74\u540d\u79f0 yaxis_title='ylable',#y\u8f74\u540d\u79f0 width= ,#\u753b\u5e03\u5bbd\u5ea6 height= ,#\u753b\u5e03\u9ad8\u5ea6 template= '''\u753b\u5e03\u98ce\u683c\u6709\u4ee5\u4e0b\u51e0\u79cd\u9009\u62e9\uff1aggplot2\uff0cseaborn\uff0csimple_white\uff0cplotly\uff0cplotly_white\uff0cplotly_dark\uff0cpresentation\uff0cxgridoff\uff0cygridoff\uff0cgridon\uff0cnone\u3002\u9ed8\u8ba4\u662fplotly''' ) \u989c\u8272\u5206\u7c7b import plotly.express as px fig = px.scatter(data,x=data[],y=data[],color='\u67d0\u4e00\u5217') fig = px.scatter_3d(data,x=data[],y=data[],z=data[],color='\u67d0\u5217') fg.show() ~~\u6ce8\u610f\u8fd9\u4e2ascatter\u7684s\u662f\u5c0f\u5199\u7684\uff0c\u4e0d\u8981\u51fa\u9519\u54e6~~ \u7528\u8fd9\u4e2a\u53ef\u4ee5\u663e\u793a\u6e10\u53d8\u7684\u989c\u8272\u4ee5\u66f4\u597d\u7684\u5206\u7c7b\u3002 \u76f4\u65b9\u56fe \u521b\u7acb\u76f4\u65b9\u56fe \u7528 go.Histogram(data[''],xbins={'size':10})#xibns\u4fee\u6539\u7ec4\u8ddd \u5373\u6bcf\u4e00\u4e2a\u67f1\u7684\u5bbd\u5ea6 fig = go.Figure(hist) fig.update_layout(bargap=0.1)#\u4fee\u6539\u81f3\u6bcf\u4e00\u6bb5\u56fe\u7684\u95f4\u8ddd\uff0c\u5373\u4fee\u6539\u6bcf\u4e2a\u67f1\u95f4\u7684\u8ddd\u79bb \u591a\u7ef4\u56fe\u8868 \u591a\u7ef4\u7684\u56fe\u8868\u7684\u8bdd\u7528 plotly.express \u91cc\u7684\u51fd\u6570 fg = px.scatter_matrix(data,dimensions=[''],color='\u67d0\u4e00\u5217') \u5176\u4e2d\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4f20\u5165\u7684\u5404\u5217\u540d\u5b57\u7684\u5217\u8868 plotly \u753b\u56fe\u7684\u4e00\u822c\u6b65\u9aa4 1.\u5bfc\u5165\u6a21\u5757\uff1a import plotly import plotly.graph_objects as go import pandas 2.\u7528pandas\u8bfb\u5165csv\u6587\u4ef6 data = pandas.read_csv('') 3.\u9009\u62e9\u5efa\u7acb\u7684\u56fe\u6807\u7c7b\u578b\uff0c\u662f\u67f1\u72b6\u56fe\uff0c\u8fd8\u662f\u6563\u70b9\u56fe\uff0c\u8fd8\u662f\u6298\u7ebf\u56fe\uff0c\u8fd8\u662f3d\u56fe\u3002 4.\u4ee5\u6298\u7ebf\u56fe\u4e3a\u4f8b scatter = go.Scatter(x='x\u8f74\u6570\u636e',y=\u2018y\u8f74\u6570\u636e\u2019\uff0cname='\u56fe\u4f8b\u540d\u79f0') fg = go.Figure(scatter) fg.show() ps:\u82e5\u8981\u5efa\u7acb\u591a\u4e2a\u56fe\u4f8b\u7684\u8868\uff0c\u9700\u8981\u4ee5\u4e0b\u64cd\u4f5c\u3002 scatter1=go..... scatter2=go..... ........ scattern=go..... fg = go.Figure((scatter1,scatter2......)) \u53ef\u4ee5\u7528\u5faa\u73af\u5199\u5165 \u6700\u540e fg.show() 5.\u6ce8\u610f\u7684\u5730\u65b9\uff1a \u67f1\u72b6\u56fe\u6ce8\u610f\u8981\u663e\u793a\u6bcf\u4e2a\u67f1\u5b50\u4e0a\u9762\u7684\u6570\u5b57\u7684\u8bdd\u8981\u52a0\u4e0a text \u53c2\u6570\uff0c\u7136\u540e\u4ee4 textposition \u53c2\u6570\u7684\u503c\u4e3a outside","title":"Plotly"},{"location":"python/plotly/#plotly","text":"import plotly.graph_objects as go \u662f\u753b\u56fe\u7684\u4e3b\u8981\u5e93","title":"plotly\u5b66\u4e60\uff1a"},{"location":"python/plotly/#_1","text":"go.Scatter() \u753b\u70b9\u6216\u8005\u753b\u7ebf \u5728 Scatter() \u4e2d\u4f20\u5165 mode='markers\u2019 \u5373\u53ef\u521b\u5efa\u6563\u70b9\u56fe \u9ed8\u8ba4 mode='lines' \u5373\u76f4\u7ebf\u56fe \u4e5f\u53ef\u4ee5 mode='lines+markers' \u8bbe\u4e3a\u6298\u7ebf\u56fe go.Bar() \u5efa\u7acb\u67f1\u72b6\u56fe go.Scatter() \u5efa\u7acb\u6563\u70b9\u6216\u8005\u6298\u7ebf\u56fe go.Scatter3d() \u5efa\u7acb3d\u6563\u70b9\u56fe\uff0c\u53ef\u4ee5\u4f20\u5165mode\u53c2\u6570\u540c\u4e0a \u5728\u521b\u5efa\u8fd9\u4e9b\u56fe\u8868\u7684\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u4ee5\u4f20\u5165marker\u6216line\u53c2\u6570\u4fee\u6539\u4e00\u4e9b\u7ec6\u8282 \u6563\u70b9\u56fe\u65f6\u4f20\u5165 marker={'size':3,'color':'red'} \u8bbe\u7f6e\u6563\u70b9 \u6298\u7ebf\u56fe\u65f6\uff0c\u4f20\u5165 line={\"dash\":\"dot}#\u8bbe\u7f6e\u4e3a\u865a\u7ebf \u8bbe\u7f6e\u7ebf ps:dash \u4e3adot\u65f6\u4e3a\u865a\u7ebf\uff0c\u4e3adash\u65f6\u662f\u7531\u77ed\u7ebf\u7ec4\u6210\u7684\u865a\u7ebf\uff0c\u4e3adashdot\u65f6\u4e3a\u7531\u70b9\u548c\u77ed\u7ebf\u7ec4\u6210\u7684\u865a\u7ebf \u6709\u65f6\u5019\u6570\u636e\u4e0d\u662f\u8fde\u7eed\u7684\uff0c\u4e2d\u95f4\u53ef\u80fd\u4f1a\u65ad\u5c42\uff0c\u8fd9\u65f6\u5019\u9700\u8981\u6307\u5b9a connectgaps \u53c2\u6570\uff0c\u4e3aTure\u65f6\uff0c\u5c06\u65ad\u70b9\u8fde\u8d77\u6765 \u200b \u4e5f\u53ef\u4ee5\u4f20\u5165name\u53c2\u6570\u4fee\u6539\u56fe\u4f8b\u540d\u79f0\u3002","title":"\u9009\u62e9\u7c7b\u578b"},{"location":"python/plotly/#_2","text":"\u5728\u521b\u5efa\u5b8c\u56fe\u8868\u4e4b\u540e\u53ef\u4ee5\u5bf9\u5176\u8fdb\u884c\u4f18\u5316 fig = go...... fig.update_layout( title='title',#\u56fe\u8868\u6807\u9898 xaxis_title='xlable',#x\u8f74\u540d\u79f0 yaxis_title='ylable',#y\u8f74\u540d\u79f0 width= ,#\u753b\u5e03\u5bbd\u5ea6 height= ,#\u753b\u5e03\u9ad8\u5ea6 template= '''\u753b\u5e03\u98ce\u683c\u6709\u4ee5\u4e0b\u51e0\u79cd\u9009\u62e9\uff1aggplot2\uff0cseaborn\uff0csimple_white\uff0cplotly\uff0cplotly_white\uff0cplotly_dark\uff0cpresentation\uff0cxgridoff\uff0cygridoff\uff0cgridon\uff0cnone\u3002\u9ed8\u8ba4\u662fplotly''' )","title":"\u56fe\u8868\u4f18\u5316"},{"location":"python/plotly/#_3","text":"import plotly.express as px fig = px.scatter(data,x=data[],y=data[],color='\u67d0\u4e00\u5217') fig = px.scatter_3d(data,x=data[],y=data[],z=data[],color='\u67d0\u5217') fg.show() ~~\u6ce8\u610f\u8fd9\u4e2ascatter\u7684s\u662f\u5c0f\u5199\u7684\uff0c\u4e0d\u8981\u51fa\u9519\u54e6~~ \u7528\u8fd9\u4e2a\u53ef\u4ee5\u663e\u793a\u6e10\u53d8\u7684\u989c\u8272\u4ee5\u66f4\u597d\u7684\u5206\u7c7b\u3002","title":"\u989c\u8272\u5206\u7c7b"},{"location":"python/plotly/#_4","text":"\u521b\u7acb\u76f4\u65b9\u56fe \u7528 go.Histogram(data[''],xbins={'size':10})#xibns\u4fee\u6539\u7ec4\u8ddd \u5373\u6bcf\u4e00\u4e2a\u67f1\u7684\u5bbd\u5ea6 fig = go.Figure(hist) fig.update_layout(bargap=0.1)#\u4fee\u6539\u81f3\u6bcf\u4e00\u6bb5\u56fe\u7684\u95f4\u8ddd\uff0c\u5373\u4fee\u6539\u6bcf\u4e2a\u67f1\u95f4\u7684\u8ddd\u79bb","title":"\u76f4\u65b9\u56fe"},{"location":"python/plotly/#_5","text":"\u591a\u7ef4\u7684\u56fe\u8868\u7684\u8bdd\u7528 plotly.express \u91cc\u7684\u51fd\u6570 fg = px.scatter_matrix(data,dimensions=[''],color='\u67d0\u4e00\u5217') \u5176\u4e2d\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4f20\u5165\u7684\u5404\u5217\u540d\u5b57\u7684\u5217\u8868 plotly \u753b\u56fe\u7684\u4e00\u822c\u6b65\u9aa4 1.\u5bfc\u5165\u6a21\u5757\uff1a import plotly import plotly.graph_objects as go import pandas 2.\u7528pandas\u8bfb\u5165csv\u6587\u4ef6 data = pandas.read_csv('') 3.\u9009\u62e9\u5efa\u7acb\u7684\u56fe\u6807\u7c7b\u578b\uff0c\u662f\u67f1\u72b6\u56fe\uff0c\u8fd8\u662f\u6563\u70b9\u56fe\uff0c\u8fd8\u662f\u6298\u7ebf\u56fe\uff0c\u8fd8\u662f3d\u56fe\u3002 4.\u4ee5\u6298\u7ebf\u56fe\u4e3a\u4f8b scatter = go.Scatter(x='x\u8f74\u6570\u636e',y=\u2018y\u8f74\u6570\u636e\u2019\uff0cname='\u56fe\u4f8b\u540d\u79f0') fg = go.Figure(scatter) fg.show() ps:\u82e5\u8981\u5efa\u7acb\u591a\u4e2a\u56fe\u4f8b\u7684\u8868\uff0c\u9700\u8981\u4ee5\u4e0b\u64cd\u4f5c\u3002 scatter1=go..... scatter2=go..... ........ scattern=go..... fg = go.Figure((scatter1,scatter2......)) \u53ef\u4ee5\u7528\u5faa\u73af\u5199\u5165 \u6700\u540e fg.show() 5.\u6ce8\u610f\u7684\u5730\u65b9\uff1a \u67f1\u72b6\u56fe\u6ce8\u610f\u8981\u663e\u793a\u6bcf\u4e2a\u67f1\u5b50\u4e0a\u9762\u7684\u6570\u5b57\u7684\u8bdd\u8981\u52a0\u4e0a text \u53c2\u6570\uff0c\u7136\u540e\u4ee4 textposition \u53c2\u6570\u7684\u503c\u4e3a outside","title":"\u591a\u7ef4\u56fe\u8868"},{"location":"python/skill/","text":"\u4e24\u4e2a\u6570\u7684\u4ea4\u6362 # a = 1 # b = 2 # temp = b # b = a # a = temp # print(a,b) a = 1 b = 2 a,b = b,a print(a,b) 2 1 \u683c\u5f0f\u5316\u5b57\u7b26\u4e32 a = 17 name = \"wlb\" # print('%s is %d years old' % (name,a)) # print('{} is {} years old'.format(name,a)) print(f'{name} is {a} years old') #\u660e\u663e\u8fd9\u4e2a\u65b9\u6cd5\u66f4\u7b80\u5355 wlb is 17 years old Yield\u7528\u6cd5 def fib(n): a = 0 b = 1 # lists = [] for _ in range(n): # lists.append(a) yield a a,b = b,a+b # return lists for i in fib(10): print(i) #\u6ce8\u91ca\u7684\u5185\u5bb9\u4e0eyield a\u6548\u679c\u76f8\u540c\uff0cyield\u76f8\u5f53\u4e8e\u4f7f\u5176\u6210\u4e3a\u4e00\u4e2a\u8fed\u4ee3\u5668 yield\u4e00\u4e2a\u6570\u540e\u4f1a\u7acb\u9a6c\u4f20\u9012\u51fa\u53bb\uff0c\u800creturn \u8981\u7b49\u5217\u8868\u90fd\u751f\u6210\u5b8c\u6bd5\u540e\u624d\u4f1a\u4f20\u51fa\u53bb #\u4ed6\u7684\u4f18\u52bf\u5728\u4e8e\u4e00\u4e9b\u8017\u65f6\u7684\u64cd\u4f5c 0 1 1 2 3 5 8 13 21 34 \u5217\u8868\u89e3\u6790\u5f0f lists = [f\"http://www.baidu.com/page{n}\" for n in range(21)] lists#\u6b64\u65b9\u6cd5\u5728\u722c\u866b\u6784\u9020urls\u4e2d\u975e\u5e38\u5e38\u7528 # lists = [f\"http://www.baidu.com/page{n}\" for n in range(21) if n%2==0] page\u5076\u6570 # alp = \"abcdefghigklmnopqrstuvwxyz\" # ALP = [n.upper() for n in alp] \u5c06\u5c0f\u5199\u8f6c\u6362\u4e3a\u5927\u5199 ['http://www.baidu.com/page0', 'http://www.baidu.com/page1', 'http://www.baidu.com/page2', 'http://www.baidu.com/page3', 'http://www.baidu.com/page4', 'http://www.baidu.com/page5', 'http://www.baidu.com/page6', 'http://www.baidu.com/page7', 'http://www.baidu.com/page8', 'http://www.baidu.com/page9', 'http://www.baidu.com/page10', 'http://www.baidu.com/page11', 'http://www.baidu.com/page12', 'http://www.baidu.com/page13', 'http://www.baidu.com/page14', 'http://www.baidu.com/page15', 'http://www.baidu.com/page16', 'http://www.baidu.com/page17', 'http://www.baidu.com/page18', 'http://www.baidu.com/page19', 'http://www.baidu.com/page20'] enumerate lists = ['apple','banana','cat','dog'] for index,name in enumerate(lists): print(index,name) 0 apple 1 banana 2 cat 3 dog \u5b57\u5178\u7684\u5408\u5e76 dic1 = {'qq':1683070754, 'phone':123456789 } dic2 = { 'height':180, 'handsome':True } dic3 = {**dic1,**dic2} #\u5408\u5e76\u4e24\u4e2a\u5b57\u5178 **\u53eb\u505a\u89e3\u5305 dic3 {'handsome': True, 'height': 180, 'phone': 123456789, 'qq': 1683070754} \u5e8f\u5217\u89e3\u5305 name = \"wang lingbo\" xing,ming = name.split(\" \") #split\u8fd4\u56de\u4e00\u4e2a\u5e8f\u5217\uff0c\u5206\u522b\u8d4b\u7ed9xing \u548cming print(xing,ming) wang lingbo \u533f\u540d\u51fd\u6570lambda lists = [1,2,3,4,5,6] maps = map(lambda x:x*x,lists) print(maps) print(list(maps)) <map object at 0x0000026D27397B38> [1, 4, 9, 16, 25, 36] \u88c5\u9970\u5668 def logging(level): def wapper(func): def inner_wapper(*args, **wbargs): print(f'{level} enter in {func.__name__}()') return func(*args, **wbargs) #\u4e0d\u5199return \u4e5f\u53ef\u4ee5 return inner_wapper return wapper @logging('inner') def say(a): print('hello! {}'.format(a)) say('wlb') inner enter in say() hello! wlb import time def print_time(func): def wapper(*args,**wbargs): print(f'{func.__name__}()\u8c03\u7528\u4e8e{time.asctime(time.localtime(time.time()))}') return func(*args,**wbargs) #\u4e0d\u5199return \u4e5f\u53ef\u4ee5 return wapper @print_time def my_name(name): print(f'look!{name}') my_name(\"wlb\") my_name()\u8c03\u7528\u4e8eSun Nov 15 19:14:25 2020 look!wlb m,< /,?,....................... ,;;;;; ,?>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>,/>> ; ;kllllllllllllllllllllllllllllllllllll# map list(map(abs,[-1,-2,-3,-4,-5])) #\u4e5f\u53ef\u4ee5\u81ea\u5df1\u5b9a\u4e49\u51fd\u6570\u6216\u8005\u7528\u533f\u540d\u51fd\u6570 [1, 2, 3, 4, 5] join() # lists = ['1','2','3','4','5'] # ''.join(lists) lists = [1,2,3,4,5] ''.join(list(map(str,lists))) #join\u53ea\u80fd\u662f\u5b57\u7b26\u4e32\u5217\u8868\uff0c\u6240\u4ee5\u8981map\u8f6c\u6362\u4e00\u4e0b '12345' \u5c06\u591a\u7ef4\u6570\u7ec4\u8f6c\u6362\u4e3a\u4e00\u7ef4 ab = [[1, 2, 3], [5, 8], [7, 8, 9]] print([i for item in ab for i in item]) #\u5229\u7528\u5217\u8868\u89e3\u6790\u5f0f [1, 2, 3, 5, 8, 7, 8, 9] \u5c06\u4e00\u4e2a\u5217\u8868\u5012\u5e8f lists = [2,4,3,2,5,4] lists[::-1] # list(reversed(lists)) [4, 5, 2, 3, 4, 2] \u68c0\u67e5\u4e24\u4e2a\u5217\u8868\u4e2d\u6240\u6709\u7684\u6570\u662f\u5426\u4e00\u6837 lists = [1,1,1,1] lists[1:] == lists[:-1] True","title":"\u6280\u5de7"},{"location":"python/skill/#_1","text":"# a = 1 # b = 2 # temp = b # b = a # a = temp # print(a,b) a = 1 b = 2 a,b = b,a print(a,b) 2 1","title":"\u4e24\u4e2a\u6570\u7684\u4ea4\u6362"},{"location":"python/skill/#_2","text":"a = 17 name = \"wlb\" # print('%s is %d years old' % (name,a)) # print('{} is {} years old'.format(name,a)) print(f'{name} is {a} years old') #\u660e\u663e\u8fd9\u4e2a\u65b9\u6cd5\u66f4\u7b80\u5355 wlb is 17 years old","title":"\u683c\u5f0f\u5316\u5b57\u7b26\u4e32"},{"location":"python/skill/#yield","text":"def fib(n): a = 0 b = 1 # lists = [] for _ in range(n): # lists.append(a) yield a a,b = b,a+b # return lists for i in fib(10): print(i) #\u6ce8\u91ca\u7684\u5185\u5bb9\u4e0eyield a\u6548\u679c\u76f8\u540c\uff0cyield\u76f8\u5f53\u4e8e\u4f7f\u5176\u6210\u4e3a\u4e00\u4e2a\u8fed\u4ee3\u5668 yield\u4e00\u4e2a\u6570\u540e\u4f1a\u7acb\u9a6c\u4f20\u9012\u51fa\u53bb\uff0c\u800creturn \u8981\u7b49\u5217\u8868\u90fd\u751f\u6210\u5b8c\u6bd5\u540e\u624d\u4f1a\u4f20\u51fa\u53bb #\u4ed6\u7684\u4f18\u52bf\u5728\u4e8e\u4e00\u4e9b\u8017\u65f6\u7684\u64cd\u4f5c 0 1 1 2 3 5 8 13 21 34","title":"Yield\u7528\u6cd5"},{"location":"python/skill/#_3","text":"lists = [f\"http://www.baidu.com/page{n}\" for n in range(21)] lists#\u6b64\u65b9\u6cd5\u5728\u722c\u866b\u6784\u9020urls\u4e2d\u975e\u5e38\u5e38\u7528 # lists = [f\"http://www.baidu.com/page{n}\" for n in range(21) if n%2==0] page\u5076\u6570 # alp = \"abcdefghigklmnopqrstuvwxyz\" # ALP = [n.upper() for n in alp] \u5c06\u5c0f\u5199\u8f6c\u6362\u4e3a\u5927\u5199 ['http://www.baidu.com/page0', 'http://www.baidu.com/page1', 'http://www.baidu.com/page2', 'http://www.baidu.com/page3', 'http://www.baidu.com/page4', 'http://www.baidu.com/page5', 'http://www.baidu.com/page6', 'http://www.baidu.com/page7', 'http://www.baidu.com/page8', 'http://www.baidu.com/page9', 'http://www.baidu.com/page10', 'http://www.baidu.com/page11', 'http://www.baidu.com/page12', 'http://www.baidu.com/page13', 'http://www.baidu.com/page14', 'http://www.baidu.com/page15', 'http://www.baidu.com/page16', 'http://www.baidu.com/page17', 'http://www.baidu.com/page18', 'http://www.baidu.com/page19', 'http://www.baidu.com/page20']","title":"\u5217\u8868\u89e3\u6790\u5f0f"},{"location":"python/skill/#enumerate","text":"lists = ['apple','banana','cat','dog'] for index,name in enumerate(lists): print(index,name) 0 apple 1 banana 2 cat 3 dog","title":"enumerate"},{"location":"python/skill/#_4","text":"dic1 = {'qq':1683070754, 'phone':123456789 } dic2 = { 'height':180, 'handsome':True } dic3 = {**dic1,**dic2} #\u5408\u5e76\u4e24\u4e2a\u5b57\u5178 **\u53eb\u505a\u89e3\u5305 dic3 {'handsome': True, 'height': 180, 'phone': 123456789, 'qq': 1683070754}","title":"\u5b57\u5178\u7684\u5408\u5e76"},{"location":"python/skill/#_5","text":"name = \"wang lingbo\" xing,ming = name.split(\" \") #split\u8fd4\u56de\u4e00\u4e2a\u5e8f\u5217\uff0c\u5206\u522b\u8d4b\u7ed9xing \u548cming print(xing,ming) wang lingbo","title":"\u5e8f\u5217\u89e3\u5305"},{"location":"python/skill/#lambda","text":"lists = [1,2,3,4,5,6] maps = map(lambda x:x*x,lists) print(maps) print(list(maps)) <map object at 0x0000026D27397B38> [1, 4, 9, 16, 25, 36]","title":"\u533f\u540d\u51fd\u6570lambda"},{"location":"python/skill/#_6","text":"def logging(level): def wapper(func): def inner_wapper(*args, **wbargs): print(f'{level} enter in {func.__name__}()') return func(*args, **wbargs) #\u4e0d\u5199return \u4e5f\u53ef\u4ee5 return inner_wapper return wapper @logging('inner') def say(a): print('hello! {}'.format(a)) say('wlb') inner enter in say() hello! wlb import time def print_time(func): def wapper(*args,**wbargs): print(f'{func.__name__}()\u8c03\u7528\u4e8e{time.asctime(time.localtime(time.time()))}') return func(*args,**wbargs) #\u4e0d\u5199return \u4e5f\u53ef\u4ee5 return wapper @print_time def my_name(name): print(f'look!{name}') my_name(\"wlb\") my_name()\u8c03\u7528\u4e8eSun Nov 15 19:14:25 2020 look!wlb m,< /,?,....................... ,;;;;; ,?>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>,/>> ; ;kllllllllllllllllllllllllllllllllllll# map list(map(abs,[-1,-2,-3,-4,-5])) #\u4e5f\u53ef\u4ee5\u81ea\u5df1\u5b9a\u4e49\u51fd\u6570\u6216\u8005\u7528\u533f\u540d\u51fd\u6570 [1, 2, 3, 4, 5]","title":"\u88c5\u9970\u5668"},{"location":"python/skill/#join","text":"# lists = ['1','2','3','4','5'] # ''.join(lists) lists = [1,2,3,4,5] ''.join(list(map(str,lists))) #join\u53ea\u80fd\u662f\u5b57\u7b26\u4e32\u5217\u8868\uff0c\u6240\u4ee5\u8981map\u8f6c\u6362\u4e00\u4e0b '12345'","title":"join()"},{"location":"python/skill/#_7","text":"ab = [[1, 2, 3], [5, 8], [7, 8, 9]] print([i for item in ab for i in item]) #\u5229\u7528\u5217\u8868\u89e3\u6790\u5f0f [1, 2, 3, 5, 8, 7, 8, 9]","title":"\u5c06\u591a\u7ef4\u6570\u7ec4\u8f6c\u6362\u4e3a\u4e00\u7ef4"},{"location":"python/skill/#_8","text":"lists = [2,4,3,2,5,4] lists[::-1] # list(reversed(lists)) [4, 5, 2, 3, 4, 2]","title":"\u5c06\u4e00\u4e2a\u5217\u8868\u5012\u5e8f"},{"location":"python/skill/#_9","text":"lists = [1,1,1,1] lists[1:] == lists[:-1] True","title":"\u68c0\u67e5\u4e24\u4e2a\u5217\u8868\u4e2d\u6240\u6709\u7684\u6570\u662f\u5426\u4e00\u6837"},{"location":"python/thread/","text":"import threading import time \u7b80\u5355\u7684\u521b\u5efa def run(n): print(\"task\", n) time.sleep(1) print('2s') time.sleep(1) print('1s') time.sleep(1) print('0s') time.sleep(1) if __name__ == '__main__': t1 = threading.Thread(target=run, args=(\"t1\",)) t2 = threading.Thread(target=run, args=(\"t2\",)) t1.start() t2.start() \u901a\u8fc7\u7c7b\u521b\u5efa class MyThread(threading.Thread): def __init__(self, n): super(MyThread, self).__init__() # \u91cd\u6784run\u51fd\u6570\u5fc5\u987b\u8981\u5199 self.n = n def run(self): print(\"task\", self.n) time.sleep(1) print('2s') time.sleep(1) print('1s') time.sleep(1) print('0s') time.sleep(1) if __name__ == \"__main__\": t1 = MyThread(\"t1\") t2 = MyThread(\"t2\") t1.start() t2.start() \u5bf9\u6bd4\u6ca1\u6709join()\u548cjoin()\u7684\u533a\u522b def run(n): print(\"task\", n) time.sleep(1) #\u6b64\u65f6\u5b50\u7ebf\u7a0b\u505c1s print('3') time.sleep(1) print('2') time.sleep(1) print('1') if __name__ == '__main__': t = threading.Thread(target=run, args=(\"t1\",)) t.setDaemon(True) #\u628a\u5b50\u8fdb\u7a0b\u8bbe\u7f6e\u4e3a\u5b88\u62a4\u7ebf\u7a0b\uff0c\u5fc5\u987b\u5728start()\u4e4b\u524d\u8bbe\u7f6e t.start() print(\"end\") def run(n): print(\"task\", n) time.sleep(1) #\u6b64\u65f6\u5b50\u7ebf\u7a0b\u505c1s print('3') time.sleep(1) print('2') time.sleep(1) print('1') if __name__ == '__main__': t = threading.Thread(target=run, args=(\"t1\",)) t.setDaemon(True) #\u628a\u5b50\u8fdb\u7a0b\u8bbe\u7f6e\u4e3a\u5b88\u62a4\u7ebf\u7a0b\uff0c\u5fc5\u987b\u5728start()\u4e4b\u524d\u8bbe\u7f6e t.start() t.join() # \u8bbe\u7f6e\u4e3b\u7ebf\u7a0b\u7b49\u5f85\u5b50\u7ebf\u7a0b\u7ed3\u675f print(\"end\") \u9501\u7684\u5e94\u7528 def run(n, semaphore): semaphore.acquire() #\u52a0\u9501 time.sleep(1) print(\"run the thread:%s\\n\" % n) semaphore.release() #\u91ca\u653e if __name__ == '__main__': num = 0 semaphore = threading.BoundedSemaphore(5) # \u6700\u591a\u5141\u8bb85\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8fd0\u884c for i in range(22): t = threading.Thread(target=run, args=(\"t-%s\" % i, semaphore)) t.start() while threading.active_count() != 1: pass # print threading.active_count() else: print('-----all threads done-----') \u4e8b\u4ef6\u7c7b event = threading.Event() def lighter(): count = 0 event.set() #\u521d\u59cb\u503c\u4e3a\u7eff\u706f while True: if 5 < count <=10 : event.clear() # \u7ea2\u706f\uff0c\u6e05\u9664\u6807\u5fd7\u4f4d print(\"\\33[41;1mred light is on...\\033[0m\") elif count > 10: event.set() # \u7eff\u706f\uff0c\u8bbe\u7f6e\u6807\u5fd7\u4f4d count = 0 else: print(\"\\33[42;1mgreen light is on...\\033[0m\") time.sleep(1) count += 1 def car(name): while True: if event.is_set(): #\u5224\u65ad\u662f\u5426\u8bbe\u7f6e\u4e86\u6807\u5fd7\u4f4d\uff08\u7eff\u706f\uff09 print(\"[%s] running...\"%name) time.sleep(1) else: print(\"[%s] sees red light,waiting...\"%name) event.wait()#\u5982\u679c\u53d8\u4e3a\u7eff\u706f print(\"[%s] green light is on,start going...\"%name) light = threading.Thread(target=lighter,) light.start() car = threading.Thread(target=car,args=(\"MINI\",)) car.start() queue\u961f\u5217 import threading import queue,time q=queue.Queue(maxsize=10) def Producer(name): count=1 while True: q.put(\"\u9aa8\u5934 %s\"%count) print(\"{}\u751f\u4ea7\u4e86\u9aa8\u5934\".format(name),count) count+=1 time.sleep(1) def Consumer(name): while True: print(\"[%s] \u53d6\u5230 [%s] \u5e76\u4e14\u5403\u4e86\u5b83\u3002\u3002\u3002\"%(name,q.get())) time.sleep(1) p=threading.Thread(target=Producer,args=('wlb',)) c=threading.Thread(target=Consumer,args=(\"dog\",)) c1=threading.Thread(target=Consumer,args=(\"cat\",)) p.start() c.start() c1.start() \u4e92\u65a5\u9501 \u7531\u4e8e\u7ebf\u7a0b\u4e4b\u95f4\u662f\u8fdb\u884c\u968f\u673a\u8c03\u5ea6\uff0c\u5e76\u4e14\u6bcf\u4e2a\u7ebf\u7a0b\u53ef\u80fd\u53ea\u6267\u884cn\u6761\u6267\u884c\u4e4b\u540e\uff0c\u5f53\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u4fee\u6539\u540c\u4e00\u6761\u6570\u636e\u65f6\u53ef\u80fd\u4f1a\u51fa\u73b0\u810f\u6570\u636e\uff0c\u6240\u4ee5\uff0c\u51fa\u73b0\u4e86\u7ebf\u7a0b\u9501\uff0c\u5373\u540c\u4e00\u65f6\u523b\u5141\u8bb8\u4e00\u4e2a\u7ebf\u7a0b\u6267\u884c\u64cd\u4f5c\u3002\u7ebf\u7a0b\u9501\u7528\u4e8e\u9501\u5b9a\u8d44\u6e90\uff0c\u4f60\u53ef\u4ee5\u5b9a\u4e49\u591a\u4e2a\u9501, \u50cf\u4e0b\u9762\u7684\u4ee3\u7801, \u5f53\u4f60\u9700\u8981\u72ec\u5360\u67d0\u4e00\u8d44\u6e90\u65f6\uff0c\u4efb\u4f55\u4e00\u4e2a\u9501\u90fd\u53ef\u4ee5\u9501\u8fd9\u4e2a\u8d44\u6e90\uff0c\u5c31\u597d\u6bd4\u4f60\u7528\u4e0d\u540c\u7684\u9501\u90fd\u53ef\u4ee5\u628a\u76f8\u540c\u7684\u4e00\u4e2a\u95e8\u9501\u4f4f\u662f\u4e00\u4e2a\u9053\u7406\u3002 \u7531\u4e8e\u7ebf\u7a0b\u4e4b\u95f4\u662f\u8fdb\u884c\u968f\u673a\u8c03\u5ea6\uff0c\u5982\u679c\u6709\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u64cd\u4f5c\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5982\u679c\u6ca1\u6709\u5f88\u597d\u5730\u4fdd\u62a4\u8be5\u5bf9\u8c61\uff0c\u4f1a\u9020\u6210\u7a0b\u5e8f\u7ed3\u679c\u7684\u4e0d\u53ef\u9884\u671f\uff0c\u6211\u4eec\u4e5f\u79f0\u6b64\u4e3a\u201c\u7ebf\u7a0b\u4e0d\u5b89\u5168\u201d\u3002 \u4e3a\u4e86\u65b9\u5f0f\u4e0a\u9762\u60c5\u51b5\u7684\u53d1\u751f\uff0c\u5c31\u51fa\u73b0\u4e86\u4e92\u65a5\u9501(Lock) from threading import Thread,Lock import os,time def work(): global n lock.acquire() temp=n time.sleep(0.1) n=temp-1 lock.release() if __name__ == '__main__': lock=Lock() n=100 l=[] for i in range(100): p=Thread(target=work) l.append(p) p.start() for p in l: p.join() \u4fe1\u53f7\u91cf \u4e92\u65a5\u9501\u540c\u65f6\u53ea\u5141\u8bb8\u4e00\u4e2a\u7ebf\u7a0b\u66f4\u6539\u6570\u636e\uff0c\u800cSemaphore\u662f\u540c\u65f6\u5141\u8bb8\u4e00\u5b9a\u6570\u91cf\u7684\u7ebf\u7a0b\u66f4\u6539\u6570\u636e \uff0c\u6bd4\u5982\u5395\u6240\u67093\u4e2a\u5751\uff0c\u90a3\u6700\u591a\u53ea\u5141\u8bb83\u4e2a\u4eba\u4e0a\u5395\u6240\uff0c\u540e\u9762\u7684\u4eba\u53ea\u80fd\u7b49\u91cc\u9762\u6709\u4eba\u51fa\u6765\u4e86\u624d\u80fd\u518d\u8fdb\u53bb\u3002 import threading import time def run(n, semaphore): semaphore.acquire() #\u52a0\u9501 time.sleep(1) print(\"run the thread:%s\\n\" % n) semaphore.release() #\u91ca\u653e if __name__ == '__main__': num = 0 semaphore = threading.BoundedSemaphore(5) # \u6700\u591a\u5141\u8bb85\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8fd0\u884c for i in range(22): t = threading.Thread(target=run, args=(\"t-%s\" % i, semaphore)) t.start() while threading.active_count() != 1: pass # print threading.active_count() else: print('-----all threads done-----') GIL\uff08Global Interpreter Lock\uff09\u5168\u5c40\u89e3\u91ca\u5668\u9501 \u5728\u975epython\u73af\u5883\u4e2d\uff0c\u5355\u6838\u60c5\u51b5\u4e0b\uff0c\u540c\u65f6\u53ea\u80fd\u6709\u4e00\u4e2a\u4efb\u52a1\u6267\u884c\u3002\u591a\u6838\u65f6\u53ef\u4ee5\u652f\u6301\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u6267\u884c\u3002\u4f46\u662f\u5728python\u4e2d\uff0c\u65e0\u8bba\u6709\u591a\u5c11\u6838\uff0c\u540c\u65f6\u53ea\u80fd\u6267\u884c\u4e00\u4e2a\u7ebf\u7a0b\u3002\u7a76\u5176\u539f\u56e0\uff0c\u8fd9\u5c31\u662f\u7531\u4e8eGIL\u7684\u5b58\u5728\u5bfc\u81f4\u7684\u3002 GIL\u7684\u5168\u79f0\u662fGlobal Interpreter Lock(\u5168\u5c40\u89e3\u91ca\u5668\u9501)\uff0c\u6765\u6e90\u662fpython\u8bbe\u8ba1\u4e4b\u521d\u7684\u8003\u8651\uff0c\u4e3a\u4e86\u6570\u636e\u5b89\u5168\u6240\u505a\u7684\u51b3\u5b9a\u3002\u67d0\u4e2a\u7ebf\u7a0b\u60f3\u8981\u6267\u884c\uff0c\u5fc5\u987b\u5148\u62ff\u5230GIL\uff0c\u6211\u4eec\u53ef\u4ee5\u628aGIL\u770b\u4f5c\u662f\u201c\u901a\u884c\u8bc1\u201d\uff0c\u5e76\u4e14\u5728\u4e00\u4e2apython\u8fdb\u7a0b\u4e2d\uff0cGIL\u53ea\u6709\u4e00\u4e2a\u3002\u62ff\u4e0d\u5230\u901a\u884c\u8bc1\u7684\u7ebf\u7a0b\uff0c\u5c31\u4e0d\u5141\u8bb8\u8fdb\u5165CPU\u6267\u884c\u3002GIL\u53ea\u5728cpython\u4e2d\u624d\u6709\uff0c\u56e0\u4e3acpython\u8c03\u7528\u7684\u662fc\u8bed\u8a00\u7684\u539f\u751f\u7ebf\u7a0b\uff0c\u6240\u4ee5\u4ed6\u4e0d\u80fd\u76f4\u63a5\u64cd\u4f5ccpu\uff0c\u53ea\u80fd\u5229\u7528GIL\u4fdd\u8bc1\u540c\u4e00\u65f6\u95f4\u53ea\u80fd\u6709\u4e00\u4e2a\u7ebf\u7a0b\u62ff\u5230\u6570\u636e\u3002\u800c\u5728pypy\u548cjpython\u4e2d\u662f\u6ca1\u6709GIL\u7684\u3002 Python\u591a\u7ebf\u7a0b\u7684\u5de5\u4f5c\u8fc7\u7a0b\uff1a python\u5728\u4f7f\u7528\u591a\u7ebf\u7a0b\u7684\u65f6\u5019\uff0c\u8c03\u7528\u7684\u662fc\u8bed\u8a00\u7684\u539f\u751f\u7ebf\u7a0b\u3002 \u62ff\u5230\u516c\u5171\u6570\u636e \u7533\u8bf7gil python\u89e3\u91ca\u5668\u8c03\u7528os\u539f\u751f\u7ebf\u7a0b os\u64cd\u4f5ccpu\u6267\u884c\u8fd0\u7b97 \u5f53\u8be5\u7ebf\u7a0b\u6267\u884c\u65f6\u95f4\u5230\u540e\uff0c\u65e0\u8bba\u8fd0\u7b97\u662f\u5426\u5df2\u7ecf\u6267\u884c\u5b8c\uff0cgil\u90fd\u88ab\u8981\u6c42\u91ca\u653e \u8fdb\u800c\u7531\u5176\u4ed6\u8fdb\u7a0b\u91cd\u590d\u4e0a\u9762\u7684\u8fc7\u7a0b \u7b49\u5176\u4ed6\u8fdb\u7a0b\u6267\u884c\u5b8c\u540e\uff0c\u53c8\u4f1a\u5207\u6362\u5230\u4e4b\u524d\u7684\u7ebf\u7a0b\uff08\u4ece\u4ed6\u8bb0\u5f55\u7684\u4e0a\u4e0b\u6587\u7ee7\u7eed\u6267\u884c\uff09\uff0c\u6574\u4e2a\u8fc7\u7a0b\u662f\u6bcf\u4e2a\u7ebf\u7a0b\u6267\u884c\u81ea\u5df1\u7684\u8fd0\u7b97\uff0c\u5f53\u6267\u884c\u65f6\u95f4\u5230\u5c31\u8fdb\u884c\u5207\u6362\uff08context switch\uff09\u3002","title":"\u591a\u7ebf\u7a0b"},{"location":"python/thread/#_1","text":"def run(n): print(\"task\", n) time.sleep(1) print('2s') time.sleep(1) print('1s') time.sleep(1) print('0s') time.sleep(1) if __name__ == '__main__': t1 = threading.Thread(target=run, args=(\"t1\",)) t2 = threading.Thread(target=run, args=(\"t2\",)) t1.start() t2.start()","title":"\u7b80\u5355\u7684\u521b\u5efa"},{"location":"python/thread/#_2","text":"class MyThread(threading.Thread): def __init__(self, n): super(MyThread, self).__init__() # \u91cd\u6784run\u51fd\u6570\u5fc5\u987b\u8981\u5199 self.n = n def run(self): print(\"task\", self.n) time.sleep(1) print('2s') time.sleep(1) print('1s') time.sleep(1) print('0s') time.sleep(1) if __name__ == \"__main__\": t1 = MyThread(\"t1\") t2 = MyThread(\"t2\") t1.start() t2.start()","title":"\u901a\u8fc7\u7c7b\u521b\u5efa"},{"location":"python/thread/#joinjoin","text":"def run(n): print(\"task\", n) time.sleep(1) #\u6b64\u65f6\u5b50\u7ebf\u7a0b\u505c1s print('3') time.sleep(1) print('2') time.sleep(1) print('1') if __name__ == '__main__': t = threading.Thread(target=run, args=(\"t1\",)) t.setDaemon(True) #\u628a\u5b50\u8fdb\u7a0b\u8bbe\u7f6e\u4e3a\u5b88\u62a4\u7ebf\u7a0b\uff0c\u5fc5\u987b\u5728start()\u4e4b\u524d\u8bbe\u7f6e t.start() print(\"end\") def run(n): print(\"task\", n) time.sleep(1) #\u6b64\u65f6\u5b50\u7ebf\u7a0b\u505c1s print('3') time.sleep(1) print('2') time.sleep(1) print('1') if __name__ == '__main__': t = threading.Thread(target=run, args=(\"t1\",)) t.setDaemon(True) #\u628a\u5b50\u8fdb\u7a0b\u8bbe\u7f6e\u4e3a\u5b88\u62a4\u7ebf\u7a0b\uff0c\u5fc5\u987b\u5728start()\u4e4b\u524d\u8bbe\u7f6e t.start() t.join() # \u8bbe\u7f6e\u4e3b\u7ebf\u7a0b\u7b49\u5f85\u5b50\u7ebf\u7a0b\u7ed3\u675f print(\"end\")","title":"\u5bf9\u6bd4\u6ca1\u6709join()\u548cjoin()\u7684\u533a\u522b"},{"location":"python/thread/#_3","text":"def run(n, semaphore): semaphore.acquire() #\u52a0\u9501 time.sleep(1) print(\"run the thread:%s\\n\" % n) semaphore.release() #\u91ca\u653e if __name__ == '__main__': num = 0 semaphore = threading.BoundedSemaphore(5) # \u6700\u591a\u5141\u8bb85\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8fd0\u884c for i in range(22): t = threading.Thread(target=run, args=(\"t-%s\" % i, semaphore)) t.start() while threading.active_count() != 1: pass # print threading.active_count() else: print('-----all threads done-----')","title":"\u9501\u7684\u5e94\u7528"},{"location":"python/thread/#_4","text":"event = threading.Event() def lighter(): count = 0 event.set() #\u521d\u59cb\u503c\u4e3a\u7eff\u706f while True: if 5 < count <=10 : event.clear() # \u7ea2\u706f\uff0c\u6e05\u9664\u6807\u5fd7\u4f4d print(\"\\33[41;1mred light is on...\\033[0m\") elif count > 10: event.set() # \u7eff\u706f\uff0c\u8bbe\u7f6e\u6807\u5fd7\u4f4d count = 0 else: print(\"\\33[42;1mgreen light is on...\\033[0m\") time.sleep(1) count += 1 def car(name): while True: if event.is_set(): #\u5224\u65ad\u662f\u5426\u8bbe\u7f6e\u4e86\u6807\u5fd7\u4f4d\uff08\u7eff\u706f\uff09 print(\"[%s] running...\"%name) time.sleep(1) else: print(\"[%s] sees red light,waiting...\"%name) event.wait()#\u5982\u679c\u53d8\u4e3a\u7eff\u706f print(\"[%s] green light is on,start going...\"%name) light = threading.Thread(target=lighter,) light.start() car = threading.Thread(target=car,args=(\"MINI\",)) car.start()","title":"\u4e8b\u4ef6\u7c7b"},{"location":"python/thread/#queue","text":"import threading import queue,time q=queue.Queue(maxsize=10) def Producer(name): count=1 while True: q.put(\"\u9aa8\u5934 %s\"%count) print(\"{}\u751f\u4ea7\u4e86\u9aa8\u5934\".format(name),count) count+=1 time.sleep(1) def Consumer(name): while True: print(\"[%s] \u53d6\u5230 [%s] \u5e76\u4e14\u5403\u4e86\u5b83\u3002\u3002\u3002\"%(name,q.get())) time.sleep(1) p=threading.Thread(target=Producer,args=('wlb',)) c=threading.Thread(target=Consumer,args=(\"dog\",)) c1=threading.Thread(target=Consumer,args=(\"cat\",)) p.start() c.start() c1.start()","title":"queue\u961f\u5217"},{"location":"python/thread/#_5","text":"\u7531\u4e8e\u7ebf\u7a0b\u4e4b\u95f4\u662f\u8fdb\u884c\u968f\u673a\u8c03\u5ea6\uff0c\u5e76\u4e14\u6bcf\u4e2a\u7ebf\u7a0b\u53ef\u80fd\u53ea\u6267\u884cn\u6761\u6267\u884c\u4e4b\u540e\uff0c\u5f53\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u4fee\u6539\u540c\u4e00\u6761\u6570\u636e\u65f6\u53ef\u80fd\u4f1a\u51fa\u73b0\u810f\u6570\u636e\uff0c\u6240\u4ee5\uff0c\u51fa\u73b0\u4e86\u7ebf\u7a0b\u9501\uff0c\u5373\u540c\u4e00\u65f6\u523b\u5141\u8bb8\u4e00\u4e2a\u7ebf\u7a0b\u6267\u884c\u64cd\u4f5c\u3002\u7ebf\u7a0b\u9501\u7528\u4e8e\u9501\u5b9a\u8d44\u6e90\uff0c\u4f60\u53ef\u4ee5\u5b9a\u4e49\u591a\u4e2a\u9501, \u50cf\u4e0b\u9762\u7684\u4ee3\u7801, \u5f53\u4f60\u9700\u8981\u72ec\u5360\u67d0\u4e00\u8d44\u6e90\u65f6\uff0c\u4efb\u4f55\u4e00\u4e2a\u9501\u90fd\u53ef\u4ee5\u9501\u8fd9\u4e2a\u8d44\u6e90\uff0c\u5c31\u597d\u6bd4\u4f60\u7528\u4e0d\u540c\u7684\u9501\u90fd\u53ef\u4ee5\u628a\u76f8\u540c\u7684\u4e00\u4e2a\u95e8\u9501\u4f4f\u662f\u4e00\u4e2a\u9053\u7406\u3002 \u7531\u4e8e\u7ebf\u7a0b\u4e4b\u95f4\u662f\u8fdb\u884c\u968f\u673a\u8c03\u5ea6\uff0c\u5982\u679c\u6709\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u64cd\u4f5c\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5982\u679c\u6ca1\u6709\u5f88\u597d\u5730\u4fdd\u62a4\u8be5\u5bf9\u8c61\uff0c\u4f1a\u9020\u6210\u7a0b\u5e8f\u7ed3\u679c\u7684\u4e0d\u53ef\u9884\u671f\uff0c\u6211\u4eec\u4e5f\u79f0\u6b64\u4e3a\u201c\u7ebf\u7a0b\u4e0d\u5b89\u5168\u201d\u3002 \u4e3a\u4e86\u65b9\u5f0f\u4e0a\u9762\u60c5\u51b5\u7684\u53d1\u751f\uff0c\u5c31\u51fa\u73b0\u4e86\u4e92\u65a5\u9501(Lock) from threading import Thread,Lock import os,time def work(): global n lock.acquire() temp=n time.sleep(0.1) n=temp-1 lock.release() if __name__ == '__main__': lock=Lock() n=100 l=[] for i in range(100): p=Thread(target=work) l.append(p) p.start() for p in l: p.join()","title":"\u4e92\u65a5\u9501"},{"location":"python/thread/#_6","text":"\u4e92\u65a5\u9501\u540c\u65f6\u53ea\u5141\u8bb8\u4e00\u4e2a\u7ebf\u7a0b\u66f4\u6539\u6570\u636e\uff0c\u800cSemaphore\u662f\u540c\u65f6\u5141\u8bb8\u4e00\u5b9a\u6570\u91cf\u7684\u7ebf\u7a0b\u66f4\u6539\u6570\u636e \uff0c\u6bd4\u5982\u5395\u6240\u67093\u4e2a\u5751\uff0c\u90a3\u6700\u591a\u53ea\u5141\u8bb83\u4e2a\u4eba\u4e0a\u5395\u6240\uff0c\u540e\u9762\u7684\u4eba\u53ea\u80fd\u7b49\u91cc\u9762\u6709\u4eba\u51fa\u6765\u4e86\u624d\u80fd\u518d\u8fdb\u53bb\u3002 import threading import time def run(n, semaphore): semaphore.acquire() #\u52a0\u9501 time.sleep(1) print(\"run the thread:%s\\n\" % n) semaphore.release() #\u91ca\u653e if __name__ == '__main__': num = 0 semaphore = threading.BoundedSemaphore(5) # \u6700\u591a\u5141\u8bb85\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8fd0\u884c for i in range(22): t = threading.Thread(target=run, args=(\"t-%s\" % i, semaphore)) t.start() while threading.active_count() != 1: pass # print threading.active_count() else: print('-----all threads done-----')","title":"\u4fe1\u53f7\u91cf"},{"location":"python/thread/#gilglobal-interpreter-lock","text":"\u5728\u975epython\u73af\u5883\u4e2d\uff0c\u5355\u6838\u60c5\u51b5\u4e0b\uff0c\u540c\u65f6\u53ea\u80fd\u6709\u4e00\u4e2a\u4efb\u52a1\u6267\u884c\u3002\u591a\u6838\u65f6\u53ef\u4ee5\u652f\u6301\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u6267\u884c\u3002\u4f46\u662f\u5728python\u4e2d\uff0c\u65e0\u8bba\u6709\u591a\u5c11\u6838\uff0c\u540c\u65f6\u53ea\u80fd\u6267\u884c\u4e00\u4e2a\u7ebf\u7a0b\u3002\u7a76\u5176\u539f\u56e0\uff0c\u8fd9\u5c31\u662f\u7531\u4e8eGIL\u7684\u5b58\u5728\u5bfc\u81f4\u7684\u3002 GIL\u7684\u5168\u79f0\u662fGlobal Interpreter Lock(\u5168\u5c40\u89e3\u91ca\u5668\u9501)\uff0c\u6765\u6e90\u662fpython\u8bbe\u8ba1\u4e4b\u521d\u7684\u8003\u8651\uff0c\u4e3a\u4e86\u6570\u636e\u5b89\u5168\u6240\u505a\u7684\u51b3\u5b9a\u3002\u67d0\u4e2a\u7ebf\u7a0b\u60f3\u8981\u6267\u884c\uff0c\u5fc5\u987b\u5148\u62ff\u5230GIL\uff0c\u6211\u4eec\u53ef\u4ee5\u628aGIL\u770b\u4f5c\u662f\u201c\u901a\u884c\u8bc1\u201d\uff0c\u5e76\u4e14\u5728\u4e00\u4e2apython\u8fdb\u7a0b\u4e2d\uff0cGIL\u53ea\u6709\u4e00\u4e2a\u3002\u62ff\u4e0d\u5230\u901a\u884c\u8bc1\u7684\u7ebf\u7a0b\uff0c\u5c31\u4e0d\u5141\u8bb8\u8fdb\u5165CPU\u6267\u884c\u3002GIL\u53ea\u5728cpython\u4e2d\u624d\u6709\uff0c\u56e0\u4e3acpython\u8c03\u7528\u7684\u662fc\u8bed\u8a00\u7684\u539f\u751f\u7ebf\u7a0b\uff0c\u6240\u4ee5\u4ed6\u4e0d\u80fd\u76f4\u63a5\u64cd\u4f5ccpu\uff0c\u53ea\u80fd\u5229\u7528GIL\u4fdd\u8bc1\u540c\u4e00\u65f6\u95f4\u53ea\u80fd\u6709\u4e00\u4e2a\u7ebf\u7a0b\u62ff\u5230\u6570\u636e\u3002\u800c\u5728pypy\u548cjpython\u4e2d\u662f\u6ca1\u6709GIL\u7684\u3002 Python\u591a\u7ebf\u7a0b\u7684\u5de5\u4f5c\u8fc7\u7a0b\uff1a python\u5728\u4f7f\u7528\u591a\u7ebf\u7a0b\u7684\u65f6\u5019\uff0c\u8c03\u7528\u7684\u662fc\u8bed\u8a00\u7684\u539f\u751f\u7ebf\u7a0b\u3002 \u62ff\u5230\u516c\u5171\u6570\u636e \u7533\u8bf7gil python\u89e3\u91ca\u5668\u8c03\u7528os\u539f\u751f\u7ebf\u7a0b os\u64cd\u4f5ccpu\u6267\u884c\u8fd0\u7b97 \u5f53\u8be5\u7ebf\u7a0b\u6267\u884c\u65f6\u95f4\u5230\u540e\uff0c\u65e0\u8bba\u8fd0\u7b97\u662f\u5426\u5df2\u7ecf\u6267\u884c\u5b8c\uff0cgil\u90fd\u88ab\u8981\u6c42\u91ca\u653e \u8fdb\u800c\u7531\u5176\u4ed6\u8fdb\u7a0b\u91cd\u590d\u4e0a\u9762\u7684\u8fc7\u7a0b \u7b49\u5176\u4ed6\u8fdb\u7a0b\u6267\u884c\u5b8c\u540e\uff0c\u53c8\u4f1a\u5207\u6362\u5230\u4e4b\u524d\u7684\u7ebf\u7a0b\uff08\u4ece\u4ed6\u8bb0\u5f55\u7684\u4e0a\u4e0b\u6587\u7ee7\u7eed\u6267\u884c\uff09\uff0c\u6574\u4e2a\u8fc7\u7a0b\u662f\u6bcf\u4e2a\u7ebf\u7a0b\u6267\u884c\u81ea\u5df1\u7684\u8fd0\u7b97\uff0c\u5f53\u6267\u884c\u65f6\u95f4\u5230\u5c31\u8fdb\u884c\u5207\u6362\uff08context switch\uff09\u3002","title":"GIL\uff08Global Interpreter Lock\uff09\u5168\u5c40\u89e3\u91ca\u5668\u9501"},{"location":"pytorch/","text":"\u6559\u7ec3\uff0c\u6211\u60f3\u5b66\u4e60 pytorch \u6211\u9009\u62e9 pytorch \u4f5c\u4e3a\u6211\u5b66\u4e60\u673a\u5668\u5b66\u4e60\u548c\u6df1\u5ea6\u5b66\u4e60\u7684\u5de5\u5177\u3002 \u4e3b\u8981\u662f\u6700\u8fd1\u5f88\u706b\u54c8\u54c8\u54c8\u3002 \u4e4b\u524d\u5b66\u4e60\u4e86 pandas \uff0c\u5b66\u4e60 pytorch \u5e94\u8be5\u4f1a\u7b80\u5355\u4e00\u70b9\u70b9\u5427\u3002 \u76ee\u524d\u5c31\u662f\u4e00\u4e2a\u7eaf\u5c0f\u767d\uff0c\u5565\u672f\u8bed\u90fd\u4e0d\u61c2\u6b38\u3002 \u5e0c\u671b\u53ef\u4ee5\u901a\u8fc7AI\u5b66\u4e60\u8def\u7ebf\u8ba9\u81ea\u5df1\u66f4\u5389\u5bb3\u70b9\u5427\u3002 \u4e00\u8d77\u52a0\u6cb9\uff01","title":"\u4ecb\u7ecd"},{"location":"pytorch/#pytorch","text":"\u6211\u9009\u62e9 pytorch \u4f5c\u4e3a\u6211\u5b66\u4e60\u673a\u5668\u5b66\u4e60\u548c\u6df1\u5ea6\u5b66\u4e60\u7684\u5de5\u5177\u3002 \u4e3b\u8981\u662f\u6700\u8fd1\u5f88\u706b\u54c8\u54c8\u54c8\u3002 \u4e4b\u524d\u5b66\u4e60\u4e86 pandas \uff0c\u5b66\u4e60 pytorch \u5e94\u8be5\u4f1a\u7b80\u5355\u4e00\u70b9\u70b9\u5427\u3002 \u76ee\u524d\u5c31\u662f\u4e00\u4e2a\u7eaf\u5c0f\u767d\uff0c\u5565\u672f\u8bed\u90fd\u4e0d\u61c2\u6b38\u3002 \u5e0c\u671b\u53ef\u4ee5\u901a\u8fc7AI\u5b66\u4e60\u8def\u7ebf\u8ba9\u81ea\u5df1\u66f4\u5389\u5bb3\u70b9\u5427\u3002 \u4e00\u8d77\u52a0\u6cb9\uff01","title":"\u6559\u7ec3\uff0c\u6211\u60f3\u5b66\u4e60pytorch"},{"location":"pytorch/regression/","text":"\u7b80\u5355\u7684\u56de\u5f52 import torch import torch.nn import torch.nn.functional as F from torch.autograd import Variable import plotly.graph_objects as go import matplotlib.pyplot as plt \u751f\u6210\u6570\u636e x = torch.unsqueeze(torch.linspace(-1,1,100),dim=1) y = x.pow(2)+torch.rand(x.size())*0.2 x = Variable(x) y = Variable(y) # plt.scatter(x.numpy(), y.numpy()) # plt.show() # scatter = go.Scatter(x=x.squeeze(1).data.numpy(),y=y.squeeze(1).data.numpy(),mode='markers') # fig = go.Figure(scatter) # fig.show() \u6784\u5efa\u795e\u7ecf\u7f51\u7edc class Net(torch.nn.Module): #\u7ee7\u627f def __init__(self,n_feature,n_hidden,n_output): super(Net,self).__init__() self.hidden = torch.nn.Linear(n_feature,n_hidden) #\u4ece\u7279\u5f81\u5230\u9690\u85cf\u5c42 self.predict = torch.nn.Linear(n_hidden,n_output) #\u4ece\u9690\u85cf\u5c42\u5230\u8f93\u51fa def forward(self,x): x = F.relu(self.hidden(x)) #\u6fc0\u6d3b\u51fd\u6570 x = self.predict(x) #\u9884\u6d4b\u503c return x \u635f\u5931\u51fd\u6570 optimzer = torch.optim.SGD(net.parameters(),lr=0.5) #\u8bbe\u7f6e\u5b66\u4e60\u7387\u4e3a0.5, loss_func = torch.nn.MSELoss()#\u8bbe\u7f6e\u635f\u5931\u51fd\u6570 \u5f00\u59cb\u8bad\u7ec3 # plt.ion() for t in range(1,201): #\u8bad\u7ec3200\u6b21 prediction = net(x) #\u5f97\u5230\u9884\u6d4b\u503c loss = loss_func(prediction,y) #\u901a\u8fc7\u635f\u5931\u51fd\u6570\u5f97\u5230\u635f\u5931 optimzer.zero_grad() #\u68af\u5ea6\u8bbe\u7f6e\u4e3a0 loss.backward() #\u53cd\u5411\u4f20\u64ad optimzer.step() if t%10==0: scat1 = go.Scatter(x=x.squeeze(1).data.numpy(),y=y.squeeze(1).data.numpy(),mode='markers',name='nature') scat2 = go.Scatter(x=x.squeeze(1).data.numpy(),y=prediction.squeeze(1).data.numpy(),name='prediction') fig = go.Figure([scat1,scat2]) fig.update_layout( title='loss = %.4f' % loss.item() #\u56fe\u8868\u7684\u6807\u9898\u4e3a\u6bcf\u6b21\u7684\u635f\u5931 ) fig.show() # plt.cla() # plt.scatter(x.data.numpy(), y.data.numpy()) # plt.plot(x.data.numpy(),prediction.data.numpy(),'r-',lw=5) # plt.text(0.5, 0, 'Loss=%.4f' % loss.item(), fontdict={'size': 20, 'color': 'red'}) # plt.pause(0.1) # plt.ioff() # plt.show()","title":"regression"},{"location":"pytorch/regression/#_1","text":"import torch import torch.nn import torch.nn.functional as F from torch.autograd import Variable import plotly.graph_objects as go import matplotlib.pyplot as plt","title":"\u7b80\u5355\u7684\u56de\u5f52"},{"location":"pytorch/regression/#_2","text":"x = torch.unsqueeze(torch.linspace(-1,1,100),dim=1) y = x.pow(2)+torch.rand(x.size())*0.2 x = Variable(x) y = Variable(y) # plt.scatter(x.numpy(), y.numpy()) # plt.show() # scatter = go.Scatter(x=x.squeeze(1).data.numpy(),y=y.squeeze(1).data.numpy(),mode='markers') # fig = go.Figure(scatter) # fig.show()","title":"\u751f\u6210\u6570\u636e"},{"location":"pytorch/regression/#_3","text":"class Net(torch.nn.Module): #\u7ee7\u627f def __init__(self,n_feature,n_hidden,n_output): super(Net,self).__init__() self.hidden = torch.nn.Linear(n_feature,n_hidden) #\u4ece\u7279\u5f81\u5230\u9690\u85cf\u5c42 self.predict = torch.nn.Linear(n_hidden,n_output) #\u4ece\u9690\u85cf\u5c42\u5230\u8f93\u51fa def forward(self,x): x = F.relu(self.hidden(x)) #\u6fc0\u6d3b\u51fd\u6570 x = self.predict(x) #\u9884\u6d4b\u503c return x","title":"\u6784\u5efa\u795e\u7ecf\u7f51\u7edc"},{"location":"pytorch/regression/#_4","text":"optimzer = torch.optim.SGD(net.parameters(),lr=0.5) #\u8bbe\u7f6e\u5b66\u4e60\u7387\u4e3a0.5, loss_func = torch.nn.MSELoss()#\u8bbe\u7f6e\u635f\u5931\u51fd\u6570","title":"\u635f\u5931\u51fd\u6570"},{"location":"pytorch/regression/#_5","text":"# plt.ion() for t in range(1,201): #\u8bad\u7ec3200\u6b21 prediction = net(x) #\u5f97\u5230\u9884\u6d4b\u503c loss = loss_func(prediction,y) #\u901a\u8fc7\u635f\u5931\u51fd\u6570\u5f97\u5230\u635f\u5931 optimzer.zero_grad() #\u68af\u5ea6\u8bbe\u7f6e\u4e3a0 loss.backward() #\u53cd\u5411\u4f20\u64ad optimzer.step() if t%10==0: scat1 = go.Scatter(x=x.squeeze(1).data.numpy(),y=y.squeeze(1).data.numpy(),mode='markers',name='nature') scat2 = go.Scatter(x=x.squeeze(1).data.numpy(),y=prediction.squeeze(1).data.numpy(),name='prediction') fig = go.Figure([scat1,scat2]) fig.update_layout( title='loss = %.4f' % loss.item() #\u56fe\u8868\u7684\u6807\u9898\u4e3a\u6bcf\u6b21\u7684\u635f\u5931 ) fig.show() # plt.cla() # plt.scatter(x.data.numpy(), y.data.numpy()) # plt.plot(x.data.numpy(),prediction.data.numpy(),'r-',lw=5) # plt.text(0.5, 0, 'Loss=%.4f' % loss.item(), fontdict={'size': 20, 'color': 'red'}) # plt.pause(0.1) # plt.ioff() # plt.show()","title":"\u5f00\u59cb\u8bad\u7ec3"},{"location":"pytorch/regression2/","text":"\u4e00\u4e2a\u7ebf\u6027\u56de\u5f52\u7684\u795e\u7ecf\u7f51\u7edc\u6a21\u578b import torch import numpy as np import pandas as pd import plotly.graph_objects as go import torch.nn import torch.nn.functional as F from torch.autograd import Variable x = torch.unsqueeze(torch.linspace(-10,10,100),dim=1) y = x*2+10+torch.rand(x.size()) # scatter = go.Scatter(x = torch.squeeze(x),y = torch.squeeze(y),mode = 'markers') # fig = go.Figure(scatter) # fig.show() class Net(torch.nn.Module): def __init__(self): super(Net,self).__init__() self.hidden = torch.nn.Linear(1,10) self.linser = torch.nn.Linear(10,1) def forward(self,x): x = F.relu(self.hidden(x)) out = self.linser(x) return out x = Variable(x) y = Variable(y) net = Net() net Net( (hidden): Linear(in_features=1, out_features=10, bias=True) (linser): Linear(in_features=10, out_features=1, bias=True) ) net.parameters() <generator object Module.parameters at 0x000001DCE4384570> loss_fun = torch.nn.MSELoss() optim = torch.optim.SGD(net.parameters(),lr=1e-2) print(loss_fun,optim) MSELoss() SGD ( Parameter Group 0 dampening: 0 lr: 0.01 momentum: 0 nesterov: False weight_decay: 0 ) for i in range(1000): predict = net(x) loss = loss_fun(predict,y) optim.zero_grad() loss.backward() optim.step() if i%50 == 0: print(f\"\u635f\u5931\u7387\u4e3a{loss.item():.4f}\") # scatter1 = go.Scatter(x=x.squeeze(1).data.numpy(),y=y.squeeze(1).data.numpy(),mode='markers') # scatter2 = go.Scatter(x=x.squeeze(1).data.numpy(),y=predict.squeeze(1).data.numpy(),mode='lines') # fig = go.Figure([scatter1,scatter2]) # fig.update_layout(title=f'\u635f\u5931\u7387\u4e3a{loss.item()}') # fig.show() \u635f\u5931\u7387\u4e3a237.3235 \u635f\u5931\u7387\u4e3a18.0279 \u635f\u5931\u7387\u4e3a12.1344 \u635f\u5931\u7387\u4e3a8.4456 \u635f\u5931\u7387\u4e3a6.4861 \u635f\u5931\u7387\u4e3a5.1898 \u635f\u5931\u7387\u4e3a4.2126 \u635f\u5931\u7387\u4e3a3.4631 \u635f\u5931\u7387\u4e3a2.8457 \u635f\u5931\u7387\u4e3a2.3588 \u635f\u5931\u7387\u4e3a1.8926 \u635f\u5931\u7387\u4e3a1.5829 \u635f\u5931\u7387\u4e3a1.3023 \u635f\u5931\u7387\u4e3a1.0384 \u635f\u5931\u7387\u4e3a0.9485 \u635f\u5931\u7387\u4e3a0.8678 \u635f\u5931\u7387\u4e3a0.7937 \u635f\u5931\u7387\u4e3a0.6795 \u635f\u5931\u7387\u4e3a0.5726 \u635f\u5931\u7387\u4e3a0.5546 arrays = torch.Tensor([5]).unsqueeze(1) net(arrays) tensor([[21.3448]], grad_fn=<AddmmBackward>)","title":"\u7ebf\u6027\u56de\u5f52\u6a21\u578b"},{"location":"pytorch/regression2/#_1","text":"import torch import numpy as np import pandas as pd import plotly.graph_objects as go import torch.nn import torch.nn.functional as F from torch.autograd import Variable x = torch.unsqueeze(torch.linspace(-10,10,100),dim=1) y = x*2+10+torch.rand(x.size()) # scatter = go.Scatter(x = torch.squeeze(x),y = torch.squeeze(y),mode = 'markers') # fig = go.Figure(scatter) # fig.show() class Net(torch.nn.Module): def __init__(self): super(Net,self).__init__() self.hidden = torch.nn.Linear(1,10) self.linser = torch.nn.Linear(10,1) def forward(self,x): x = F.relu(self.hidden(x)) out = self.linser(x) return out x = Variable(x) y = Variable(y) net = Net() net Net( (hidden): Linear(in_features=1, out_features=10, bias=True) (linser): Linear(in_features=10, out_features=1, bias=True) ) net.parameters() <generator object Module.parameters at 0x000001DCE4384570> loss_fun = torch.nn.MSELoss() optim = torch.optim.SGD(net.parameters(),lr=1e-2) print(loss_fun,optim) MSELoss() SGD ( Parameter Group 0 dampening: 0 lr: 0.01 momentum: 0 nesterov: False weight_decay: 0 ) for i in range(1000): predict = net(x) loss = loss_fun(predict,y) optim.zero_grad() loss.backward() optim.step() if i%50 == 0: print(f\"\u635f\u5931\u7387\u4e3a{loss.item():.4f}\") # scatter1 = go.Scatter(x=x.squeeze(1).data.numpy(),y=y.squeeze(1).data.numpy(),mode='markers') # scatter2 = go.Scatter(x=x.squeeze(1).data.numpy(),y=predict.squeeze(1).data.numpy(),mode='lines') # fig = go.Figure([scatter1,scatter2]) # fig.update_layout(title=f'\u635f\u5931\u7387\u4e3a{loss.item()}') # fig.show() \u635f\u5931\u7387\u4e3a237.3235 \u635f\u5931\u7387\u4e3a18.0279 \u635f\u5931\u7387\u4e3a12.1344 \u635f\u5931\u7387\u4e3a8.4456 \u635f\u5931\u7387\u4e3a6.4861 \u635f\u5931\u7387\u4e3a5.1898 \u635f\u5931\u7387\u4e3a4.2126 \u635f\u5931\u7387\u4e3a3.4631 \u635f\u5931\u7387\u4e3a2.8457 \u635f\u5931\u7387\u4e3a2.3588 \u635f\u5931\u7387\u4e3a1.8926 \u635f\u5931\u7387\u4e3a1.5829 \u635f\u5931\u7387\u4e3a1.3023 \u635f\u5931\u7387\u4e3a1.0384 \u635f\u5931\u7387\u4e3a0.9485 \u635f\u5931\u7387\u4e3a0.8678 \u635f\u5931\u7387\u4e3a0.7937 \u635f\u5931\u7387\u4e3a0.6795 \u635f\u5931\u7387\u4e3a0.5726 \u635f\u5931\u7387\u4e3a0.5546 arrays = torch.Tensor([5]).unsqueeze(1) net(arrays) tensor([[21.3448]], grad_fn=<AddmmBackward>)","title":"\u4e00\u4e2a\u7ebf\u6027\u56de\u5f52\u7684\u795e\u7ecf\u7f51\u7edc\u6a21\u578b"},{"location":"pytorch/start/","text":"\u5f00\u59cb\uff01 \u7528 import torch \u5bfc\u5165 pytorch \u5e93 \u4e0d\u8981\u6253\u6210 import pytorch \u54e6~ \u4e0b\u9762\u662f\u6211\u7684\u5b66\u4e60\u8bb0\u5f55\uff1a import torch#\u5bfc\u5165\u6a21\u5757 x = torch.rand(5,3)#\u751f\u6210\u968f\u673a\u5f20\u91cf x tensor([[0.8241, 0.9623, 0.8265], [0.8875, 0.6775, 0.0678], [0.8438, 0.5565, 0.0824], [0.7778, 0.7368, 0.5326], [0.6096, 0.5767, 0.5788]]) x = x.new_ones(5,3,dtype=torch.double)#\u751f\u6210\u503c\u4e3a1\u7684\u5f20\u91cf\uff0c\u5e76\u5b9a\u4e49\u6570\u636e\u7c7b\u578b x tensor([[1., 1., 1.], [1., 1., 1.], [1., 1., 1.], [1., 1., 1.], [1., 1., 1.]], dtype=torch.float64) x = torch.randn_like(x,dtype=torch.float)#\u6539\u53d8\u6570\u636e\u7c7b\u578b\uff0c\u4e0d\u6539\u53d8\u6570 x tensor([[-1.1167, 0.1029, 0.5996], [-1.2067, 1.4284, -1.0661], [-0.0320, -0.3634, 1.4178], [ 0.2564, -1.0210, -2.3204], [-0.0476, -0.2605, -0.1166]]) x.size()#\u83b7\u53d6\u5c3a\u5bf8 torch.Size([5, 3]) y = torch.rand(5,3) torch.add(x,y)#\u4e5f\u53ef\u4ee5\u5199\u6210x+y tensor([[-0.8348, 0.5407, 0.6893], [-0.9977, 1.4544, -0.6345], [ 0.7664, -0.3510, 2.3684], [ 0.4159, -0.4354, -1.6096], [ 0.0588, -0.1941, 0.5014]]) result = torch.empty(5,3)#\u7a7a\u5f20\u91cf torch.add(x,y,out = result)#\u628a\u8fd0\u7b97\u7ed3\u679c\u50a8\u5b58\u5728result\u91cc tensor([[-0.8348, 0.5407, 0.6893], [-0.9977, 1.4544, -0.6345], [ 0.7664, -0.3510, 2.3684], [ 0.4159, -0.4354, -1.6096], [ 0.0588, -0.1941, 0.5014]]) x,x[:,1]#\u7c7b\u4f3c\u4e8enumpy\u7684\u5207\u7247\u64cd\u4f5c,\u53d6\u7b2c\u4e8c\u5217 (tensor([[-1.1167, 0.1029, 0.5996], [-1.2067, 1.4284, -1.0661], [-0.0320, -0.3634, 1.4178], [ 0.2564, -1.0210, -2.3204], [-0.0476, -0.2605, -0.1166]]), tensor([ 0.1029, 1.4284, -0.3634, -1.0210, -0.2605])) x = torch.rand(4,4) y = x.view(16)#\u7c7b\u4f3c\u4e8enumpy\u7684resize()\u4f46\u7528\u6cd5\u4e0d\u592a\u76f8\u540c z = x.view(-1,8) x.size(),y.size(),z.size() (torch.Size([4, 4]), torch.Size([16]), torch.Size([2, 8])) x = torch.rand(1) print(x) print(x.item())#\u53d6\u503c tensor([0.5160]) 0.5160175561904907 import numpy as np a = torch.ones(5) a tensor([1., 1., 1., 1., 1.]) b=a.numpy()#\u5c06\u5f20\u91cf\u8f6c\u6362\u4e3anumpy\u7684array b array([1., 1., 1., 1., 1.], dtype=float32) a.add_(1) #a\u81ea\u52a01\uff0cb\u4e5f\u8ddf\u7740\u6539\u53d8 a,b (tensor([2., 2., 2., 2., 2.]), array([2., 2., 2., 2., 2.], dtype=float32)) a = np.ones(5) b=torch.from_numpy(a)#\u5c06array\u8f6c\u6362\u4e3a\u5f20\u91cf np.add(a,1,out=a) a,b (array([2., 2., 2., 2., 2.]), tensor([2., 2., 2., 2., 2.], dtype=torch.float64)) x = torch.ones(2,2,requires_grad=True)#requires_grad\u53c2\u6570\u7528\u4e8e\u8bf4\u660e\u5f53\u524d\u91cf\u662f\u5426\u9700\u8981\u5728\u8ba1\u7b97\u4e2d\u4fdd\u7559\u5bf9\u5e94\u7684\u68af\u5ea6\u4fe1\u606f\u4ee5\u7ebf\u6027\u56de\u5f52\u4e3a\u4f8b\uff0c\u4e3a\u4e86\u5f97\u5230\u6700\u5408\u9002\u7684\u53c2\u6570\u503c\uff0c\u6211\u4eec\u9700\u8981\u8bbe\u7f6e\u4e00\u4e2a\u76f8\u5173\u7684\u635f\u5931\u51fd\u6570\uff0c\u6839\u636e\u68af\u5ea6\u56de\u4f20\u7684\u601d\u8def\u8fdb\u884c\u8bad\u7ec3\u3002 x tensor([[1., 1.], [1., 1.]], requires_grad=True) y = x+2 y tensor([[3., 3.], [3., 3.]], grad_fn=<AddBackward0>) y.grad_fn#\u7528\u4e8e\u6307\u5bfc\u53cd\u5411\u4f20\u64ad\uff0c\u6211\u73b0\u5728\u4e5f\u4e0d\u592a\u61c2 <AddBackward0 at 0x25b91b2c710> z = y*y*3 out = torch.mean(z) z,out (tensor([[27., 27.], [27., 27.]], grad_fn=<MulBackward0>), tensor(27., grad_fn=<MeanBackward0>)) a = torch.randn(2,2) print(a) print(a.requires_grad) a.requires_grad_(True)#\u4fee\u6539requires_grad\u7684\u503c print(a.requires_grad) b=(a*a).sum() print(b.grad_fn) tensor([[-0.6831, 1.5310], [-0.5836, 0.4117]]) False True <SumBackward0 object at 0x0000025B91B39828> \u548c numpy \u7684\u4e92\u76f8\u8f6c\u6362: import numpy as np import torch a = torch.Tensor([]) b=a.numpy()#a\u4e3a\u5f20\u91cf a = np.arange.randn() b = torch.from_numpy(a)#a\u4e3aarray","title":"start"},{"location":"pytorch/start/#_1","text":"\u7528 import torch \u5bfc\u5165 pytorch \u5e93 \u4e0d\u8981\u6253\u6210 import pytorch \u54e6~ \u4e0b\u9762\u662f\u6211\u7684\u5b66\u4e60\u8bb0\u5f55\uff1a import torch#\u5bfc\u5165\u6a21\u5757 x = torch.rand(5,3)#\u751f\u6210\u968f\u673a\u5f20\u91cf x tensor([[0.8241, 0.9623, 0.8265], [0.8875, 0.6775, 0.0678], [0.8438, 0.5565, 0.0824], [0.7778, 0.7368, 0.5326], [0.6096, 0.5767, 0.5788]]) x = x.new_ones(5,3,dtype=torch.double)#\u751f\u6210\u503c\u4e3a1\u7684\u5f20\u91cf\uff0c\u5e76\u5b9a\u4e49\u6570\u636e\u7c7b\u578b x tensor([[1., 1., 1.], [1., 1., 1.], [1., 1., 1.], [1., 1., 1.], [1., 1., 1.]], dtype=torch.float64) x = torch.randn_like(x,dtype=torch.float)#\u6539\u53d8\u6570\u636e\u7c7b\u578b\uff0c\u4e0d\u6539\u53d8\u6570 x tensor([[-1.1167, 0.1029, 0.5996], [-1.2067, 1.4284, -1.0661], [-0.0320, -0.3634, 1.4178], [ 0.2564, -1.0210, -2.3204], [-0.0476, -0.2605, -0.1166]]) x.size()#\u83b7\u53d6\u5c3a\u5bf8 torch.Size([5, 3]) y = torch.rand(5,3) torch.add(x,y)#\u4e5f\u53ef\u4ee5\u5199\u6210x+y tensor([[-0.8348, 0.5407, 0.6893], [-0.9977, 1.4544, -0.6345], [ 0.7664, -0.3510, 2.3684], [ 0.4159, -0.4354, -1.6096], [ 0.0588, -0.1941, 0.5014]]) result = torch.empty(5,3)#\u7a7a\u5f20\u91cf torch.add(x,y,out = result)#\u628a\u8fd0\u7b97\u7ed3\u679c\u50a8\u5b58\u5728result\u91cc tensor([[-0.8348, 0.5407, 0.6893], [-0.9977, 1.4544, -0.6345], [ 0.7664, -0.3510, 2.3684], [ 0.4159, -0.4354, -1.6096], [ 0.0588, -0.1941, 0.5014]]) x,x[:,1]#\u7c7b\u4f3c\u4e8enumpy\u7684\u5207\u7247\u64cd\u4f5c,\u53d6\u7b2c\u4e8c\u5217 (tensor([[-1.1167, 0.1029, 0.5996], [-1.2067, 1.4284, -1.0661], [-0.0320, -0.3634, 1.4178], [ 0.2564, -1.0210, -2.3204], [-0.0476, -0.2605, -0.1166]]), tensor([ 0.1029, 1.4284, -0.3634, -1.0210, -0.2605])) x = torch.rand(4,4) y = x.view(16)#\u7c7b\u4f3c\u4e8enumpy\u7684resize()\u4f46\u7528\u6cd5\u4e0d\u592a\u76f8\u540c z = x.view(-1,8) x.size(),y.size(),z.size() (torch.Size([4, 4]), torch.Size([16]), torch.Size([2, 8])) x = torch.rand(1) print(x) print(x.item())#\u53d6\u503c tensor([0.5160]) 0.5160175561904907 import numpy as np a = torch.ones(5) a tensor([1., 1., 1., 1., 1.]) b=a.numpy()#\u5c06\u5f20\u91cf\u8f6c\u6362\u4e3anumpy\u7684array b array([1., 1., 1., 1., 1.], dtype=float32) a.add_(1) #a\u81ea\u52a01\uff0cb\u4e5f\u8ddf\u7740\u6539\u53d8 a,b (tensor([2., 2., 2., 2., 2.]), array([2., 2., 2., 2., 2.], dtype=float32)) a = np.ones(5) b=torch.from_numpy(a)#\u5c06array\u8f6c\u6362\u4e3a\u5f20\u91cf np.add(a,1,out=a) a,b (array([2., 2., 2., 2., 2.]), tensor([2., 2., 2., 2., 2.], dtype=torch.float64)) x = torch.ones(2,2,requires_grad=True)#requires_grad\u53c2\u6570\u7528\u4e8e\u8bf4\u660e\u5f53\u524d\u91cf\u662f\u5426\u9700\u8981\u5728\u8ba1\u7b97\u4e2d\u4fdd\u7559\u5bf9\u5e94\u7684\u68af\u5ea6\u4fe1\u606f\u4ee5\u7ebf\u6027\u56de\u5f52\u4e3a\u4f8b\uff0c\u4e3a\u4e86\u5f97\u5230\u6700\u5408\u9002\u7684\u53c2\u6570\u503c\uff0c\u6211\u4eec\u9700\u8981\u8bbe\u7f6e\u4e00\u4e2a\u76f8\u5173\u7684\u635f\u5931\u51fd\u6570\uff0c\u6839\u636e\u68af\u5ea6\u56de\u4f20\u7684\u601d\u8def\u8fdb\u884c\u8bad\u7ec3\u3002 x tensor([[1., 1.], [1., 1.]], requires_grad=True) y = x+2 y tensor([[3., 3.], [3., 3.]], grad_fn=<AddBackward0>) y.grad_fn#\u7528\u4e8e\u6307\u5bfc\u53cd\u5411\u4f20\u64ad\uff0c\u6211\u73b0\u5728\u4e5f\u4e0d\u592a\u61c2 <AddBackward0 at 0x25b91b2c710> z = y*y*3 out = torch.mean(z) z,out (tensor([[27., 27.], [27., 27.]], grad_fn=<MulBackward0>), tensor(27., grad_fn=<MeanBackward0>)) a = torch.randn(2,2) print(a) print(a.requires_grad) a.requires_grad_(True)#\u4fee\u6539requires_grad\u7684\u503c print(a.requires_grad) b=(a*a).sum() print(b.grad_fn) tensor([[-0.6831, 1.5310], [-0.5836, 0.4117]]) False True <SumBackward0 object at 0x0000025B91B39828> \u548c numpy \u7684\u4e92\u76f8\u8f6c\u6362: import numpy as np import torch a = torch.Tensor([]) b=a.numpy()#a\u4e3a\u5f20\u91cf a = np.arange.randn() b = torch.from_numpy(a)#a\u4e3aarray","title":"\u5f00\u59cb\uff01"},{"location":"pytorch/think/","text":"\u4e00\u4e9b\u601d\u8003 \u770b\u4e86\u4e00\u4e9b\u673a\u5668\u5b66\u4e60\u7684\u6559\u7a0b\uff0c\u53d1\u73b0\u6570\u5b66\u5728\u8fd9\u4e00\u5757\u975e\u5e38\u91cd\u8981\uff0c\u60f3\u5b66\u597d\u5fc5\u987b\u5148\u628a\u6570\u5b66\u5b66\u597d\uff0c\u6240\u4ee5\u5148\u4e0d\u7740\u6025\u5b66\u4e60\u66f4\u52a0\u6df1\u5965\u7684\u5185\u5bb9\uff0c\u5148\u628a\u4ee5\u76ee\u524d\u7684\u6570\u5b66\u77e5\u8bc6\u53ef\u4ee5\u5b9e\u73b0\u7684\u4e1c\u897f\u53bb\u5b9e\u73b0\u4e00\u4e0b\u5427\u3002 \u4e86\u89e3\u4e86\u4e00\u4e9b\u77e5\u8bc6\uff0c\u6bd4\u5982\u68af\u5ea6\u4e0b\u964d\uff0c\u68af\u5ea6\u4e0b\u964d\u5c5e\u4e8e\u4e00\u79cd\u4f18\u5316\u65b9\u6cd5\uff0c\u4e3b\u8981\u7528\u4e8e\u795e\u7ecf\u7f51\u7edc\u9886\u57df\u91cc\u3002\u68af\u5ea6\u4e0b\u964d\u91cc\u9762\u7684\u68af\u5ea6\u5c31\u662f\u6240\u5b66\u7684\u6c42\u5bfc\u6c42\u5fae\u5206\u3002 \u6709\u4e2a\u8bef\u5dee\u65b9\u7a0b\uff0c\u7528\u4e8e\u6bd4\u8f83\u8ba1\u7b97\u51fa\u6765\u7684\u503c\uff08\u9884\u6d4b\u503c\uff09\u4e0e\u6570\u636e\u96c6(\u5b9e\u9645\u503c)\u4e2d\u7684\u503c\u6709\u591a\u5927\u5dee\u522b\u3002 \u7c7b\u4f3c\u4e8e\u9ad8\u4e2d\u7ebf\u6027\u56de\u5f52\u5b66\u7684\u90a3\u4e2a\u8bef\u5dee\u65b9\u7a0b\uff0c\u4e0d\u8fc7\u8fd9\u4e2a\u80af\u5b9a\u66f4\u52a0\u590d\u6742\u3002 \u5e38\u7528\u5e73\u65b9\u5dee \u6700\u7ec8\u7b80\u5316\u6210\u6700\u540e\u7684\u90a3\u6837 \u5728\u6700\u7b80\u5355\u7684\u4e8c\u6b21\u51fd\u6570\u4e2d\uff0c\u5c31\u662f\u6c42\u5bfc\u6570\u4e3a0\u7684\u70b9\uff0c\u4e5f\u5c31\u662f\u6781\u503c\u3002 \u5728\u4efb\u610f\u4e00\u70b9\u505a\u5207\u7ebf\uff0c\u5982\u679c\u5bfc\u6570\u503c\u4e0d\u4e3a0\uff0c\u5219\u6cbf\u7740\u8fc7\u8fd9\u70b9\u7684\u5207\u7ebf\u4e0b\u964d\uff0c\u7136\u540e\u518d\u627e\u4e00\u4e2a\u70b9\uff0c\u6700\u540e\u4e0b\u964d\u5230\u5bfc\u6570\u4e3a0\u7684\u70b9\uff0c\u6211\u7406\u89e3\u7684\u8fd9\u5c31\u662f\u68af\u5ea6\u4e0b\u964d\u7684\u6982\u5ff5\u3002 \u5f53\u7136\u8fd9\u662f\u6700\u7b80\u5355\u7684\uff0c\u795e\u7ecf\u7f51\u7edc\u4e2d\u7684W\u53ef\u4e0d\u6b62\u4e00\u4e2a \u800c\u4e14\u4e5f\u4e0d\u6b62\u4e00\u4e2a\u5bfc\u6570\u4e3a0\u7684\u70b9\uff0c\u8fd9\u65f6\u5019\u6709\u5168\u5c40\u6700\u4f18\u7684\u70b9\uff0c\u4e5f\u6709\u5c40\u90e8\u6700\u4f18\u7684\u70b9\u3002 W\u7684\u521d\u59cb\u70b9\u4e0d\u540c\uff0c\u5bf9\u5e94\u7684\u6700\u4f18\u89e3\u4e5f\u4e0d\u4e00\u6837\u3002 \u8fd8\u6709\u4e00\u4e2a\u91cd\u8981\u6982\u5ff5\uff0c\u53eb\u505a\u6fc0\u6d3b\u51fd\u6570\u3002 \u5b83\u7528\u6765\u89e3\u51b3\u7ebf\u6027\u65b9\u7a0b\u65e0\u6cd5\u89e3\u51b3\u7684\u95ee\u9898\u3002 \u4e00\u822c\u7ebf\u6027\u65b9\u7a0b\u53ef\u4ee5\u7528 y=Wx \u6765\u8868\u793a \u6fc0\u6d3b\u51fd\u6570\u5c31\u662f\u901a\u8fc7\u4e00\u4e9b\u624b\u6bb5\uff0c\u628a\u5b83\u63b0\u5f2f \u5e38\u7528\u7684\u6709 \u7ebf\u6027\u6574\u6d41\u51fd\u6570``Sigmoid\u51fd\u6570``\u53cc\u66f2\u6b63\u5207\u51fd\u6570 \u7b49 \u4ed6\u4eec\u4f7f\u8f93\u51fa\u7ed3\u679cy\u53d8\u5f2f\u4e86 \u8fd8\u6709 \u8bef\u5dee\u53cd\u5411\u4f20\u64ad \uff0c\u6211\u7406\u89e3\u5c31\u662f\u5c06\u8bef\u5dee\u53cd\u5411\u4f20\u64ad\u56de\u53bb\uff0c\u518d\u8fdb\u884c\u8bad\u7ec3\uff0c\u76f4\u5230\u8bef\u5dee\u6700\u5c0f\uff0c\u901a\u8fc7\u8fd9\u4e2a\u8fc7\u7a0b\u8fbe\u5230\u8bad\u7ec3\u7684\u76ee\u7684\u3002","title":"\u4e00\u4e9b\u601d\u8003"},{"location":"pytorch/think/#_1","text":"\u770b\u4e86\u4e00\u4e9b\u673a\u5668\u5b66\u4e60\u7684\u6559\u7a0b\uff0c\u53d1\u73b0\u6570\u5b66\u5728\u8fd9\u4e00\u5757\u975e\u5e38\u91cd\u8981\uff0c\u60f3\u5b66\u597d\u5fc5\u987b\u5148\u628a\u6570\u5b66\u5b66\u597d\uff0c\u6240\u4ee5\u5148\u4e0d\u7740\u6025\u5b66\u4e60\u66f4\u52a0\u6df1\u5965\u7684\u5185\u5bb9\uff0c\u5148\u628a\u4ee5\u76ee\u524d\u7684\u6570\u5b66\u77e5\u8bc6\u53ef\u4ee5\u5b9e\u73b0\u7684\u4e1c\u897f\u53bb\u5b9e\u73b0\u4e00\u4e0b\u5427\u3002 \u4e86\u89e3\u4e86\u4e00\u4e9b\u77e5\u8bc6\uff0c\u6bd4\u5982\u68af\u5ea6\u4e0b\u964d\uff0c\u68af\u5ea6\u4e0b\u964d\u5c5e\u4e8e\u4e00\u79cd\u4f18\u5316\u65b9\u6cd5\uff0c\u4e3b\u8981\u7528\u4e8e\u795e\u7ecf\u7f51\u7edc\u9886\u57df\u91cc\u3002\u68af\u5ea6\u4e0b\u964d\u91cc\u9762\u7684\u68af\u5ea6\u5c31\u662f\u6240\u5b66\u7684\u6c42\u5bfc\u6c42\u5fae\u5206\u3002 \u6709\u4e2a\u8bef\u5dee\u65b9\u7a0b\uff0c\u7528\u4e8e\u6bd4\u8f83\u8ba1\u7b97\u51fa\u6765\u7684\u503c\uff08\u9884\u6d4b\u503c\uff09\u4e0e\u6570\u636e\u96c6(\u5b9e\u9645\u503c)\u4e2d\u7684\u503c\u6709\u591a\u5927\u5dee\u522b\u3002 \u7c7b\u4f3c\u4e8e\u9ad8\u4e2d\u7ebf\u6027\u56de\u5f52\u5b66\u7684\u90a3\u4e2a\u8bef\u5dee\u65b9\u7a0b\uff0c\u4e0d\u8fc7\u8fd9\u4e2a\u80af\u5b9a\u66f4\u52a0\u590d\u6742\u3002 \u5e38\u7528\u5e73\u65b9\u5dee \u6700\u7ec8\u7b80\u5316\u6210\u6700\u540e\u7684\u90a3\u6837 \u5728\u6700\u7b80\u5355\u7684\u4e8c\u6b21\u51fd\u6570\u4e2d\uff0c\u5c31\u662f\u6c42\u5bfc\u6570\u4e3a0\u7684\u70b9\uff0c\u4e5f\u5c31\u662f\u6781\u503c\u3002 \u5728\u4efb\u610f\u4e00\u70b9\u505a\u5207\u7ebf\uff0c\u5982\u679c\u5bfc\u6570\u503c\u4e0d\u4e3a0\uff0c\u5219\u6cbf\u7740\u8fc7\u8fd9\u70b9\u7684\u5207\u7ebf\u4e0b\u964d\uff0c\u7136\u540e\u518d\u627e\u4e00\u4e2a\u70b9\uff0c\u6700\u540e\u4e0b\u964d\u5230\u5bfc\u6570\u4e3a0\u7684\u70b9\uff0c\u6211\u7406\u89e3\u7684\u8fd9\u5c31\u662f\u68af\u5ea6\u4e0b\u964d\u7684\u6982\u5ff5\u3002 \u5f53\u7136\u8fd9\u662f\u6700\u7b80\u5355\u7684\uff0c\u795e\u7ecf\u7f51\u7edc\u4e2d\u7684W\u53ef\u4e0d\u6b62\u4e00\u4e2a \u800c\u4e14\u4e5f\u4e0d\u6b62\u4e00\u4e2a\u5bfc\u6570\u4e3a0\u7684\u70b9\uff0c\u8fd9\u65f6\u5019\u6709\u5168\u5c40\u6700\u4f18\u7684\u70b9\uff0c\u4e5f\u6709\u5c40\u90e8\u6700\u4f18\u7684\u70b9\u3002 W\u7684\u521d\u59cb\u70b9\u4e0d\u540c\uff0c\u5bf9\u5e94\u7684\u6700\u4f18\u89e3\u4e5f\u4e0d\u4e00\u6837\u3002 \u8fd8\u6709\u4e00\u4e2a\u91cd\u8981\u6982\u5ff5\uff0c\u53eb\u505a\u6fc0\u6d3b\u51fd\u6570\u3002 \u5b83\u7528\u6765\u89e3\u51b3\u7ebf\u6027\u65b9\u7a0b\u65e0\u6cd5\u89e3\u51b3\u7684\u95ee\u9898\u3002 \u4e00\u822c\u7ebf\u6027\u65b9\u7a0b\u53ef\u4ee5\u7528 y=Wx \u6765\u8868\u793a \u6fc0\u6d3b\u51fd\u6570\u5c31\u662f\u901a\u8fc7\u4e00\u4e9b\u624b\u6bb5\uff0c\u628a\u5b83\u63b0\u5f2f \u5e38\u7528\u7684\u6709 \u7ebf\u6027\u6574\u6d41\u51fd\u6570``Sigmoid\u51fd\u6570``\u53cc\u66f2\u6b63\u5207\u51fd\u6570 \u7b49 \u4ed6\u4eec\u4f7f\u8f93\u51fa\u7ed3\u679cy\u53d8\u5f2f\u4e86 \u8fd8\u6709 \u8bef\u5dee\u53cd\u5411\u4f20\u64ad \uff0c\u6211\u7406\u89e3\u5c31\u662f\u5c06\u8bef\u5dee\u53cd\u5411\u4f20\u64ad\u56de\u53bb\uff0c\u518d\u8fdb\u884c\u8bad\u7ec3\uff0c\u76f4\u5230\u8bef\u5dee\u6700\u5c0f\uff0c\u901a\u8fc7\u8fd9\u4e2a\u8fc7\u7a0b\u8fbe\u5230\u8bad\u7ec3\u7684\u76ee\u7684\u3002","title":"\u4e00\u4e9b\u601d\u8003"},{"location":"sf/","text":"\u8fd9\u91cc\u5c5e\u4e8e\u7b97\u6cd5 \u6211\u9ad8\u4e2d\u6ca1\u6709\u53c2\u52a0\u7b97\u6cd5\u6bd4\u8d5b\uff0c\u521a\u521a\u8fdb\u5165\u5927\u5b66\u624d\u5f00\u59cb\u5165\u95e8\u7b97\u6cd5\uff0c\u6240\u4ee5\u6211\u7684\u7b97\u6cd5\u5f88\u83dc\uff0c\u8fd8\u5728\u52aa\u529b\u7684\u5b66\u4e60\u4e2d\uff0c\u5e0c\u671b\u4ee5\u540e\u53ef\u4ee5\u4f1a\u6709\u66f4\u8fdb\u4e00\u6b65\u7684\u6210\u957f\uff0c\u53ef\u4ee5\u53bb\u53c2\u52a0\u6bd4\u8d5b \u5982\u679c\u6709\u95ee\u9898\uff0c\u6b22\u8fce\u5927\u4f6c\u7ed9\u6211\u63d0\u51fa\uff0c\u56e0\u4e3a\u6211\u7684\u7b97\u6cd5\u6c34\u5e73\u5b9e\u5728\u662f\u592a\u4f4e\u4e86\u3002 \u8054\u7cfb\u65b9\u5f0f\uff1a qq\uff1a1683070754 \u90ae\u7bb1\uff1a1683070754@qq.com \u8c22\u8c22\u5404\u4f4d\u7684\u6307\u5bfc\uff01\uff01","title":"\u4ecb\u7ecd"},{"location":"sf/#_1","text":"\u6211\u9ad8\u4e2d\u6ca1\u6709\u53c2\u52a0\u7b97\u6cd5\u6bd4\u8d5b\uff0c\u521a\u521a\u8fdb\u5165\u5927\u5b66\u624d\u5f00\u59cb\u5165\u95e8\u7b97\u6cd5\uff0c\u6240\u4ee5\u6211\u7684\u7b97\u6cd5\u5f88\u83dc\uff0c\u8fd8\u5728\u52aa\u529b\u7684\u5b66\u4e60\u4e2d\uff0c\u5e0c\u671b\u4ee5\u540e\u53ef\u4ee5\u4f1a\u6709\u66f4\u8fdb\u4e00\u6b65\u7684\u6210\u957f\uff0c\u53ef\u4ee5\u53bb\u53c2\u52a0\u6bd4\u8d5b \u5982\u679c\u6709\u95ee\u9898\uff0c\u6b22\u8fce\u5927\u4f6c\u7ed9\u6211\u63d0\u51fa\uff0c\u56e0\u4e3a\u6211\u7684\u7b97\u6cd5\u6c34\u5e73\u5b9e\u5728\u662f\u592a\u4f4e\u4e86\u3002","title":"\u8fd9\u91cc\u5c5e\u4e8e\u7b97\u6cd5"},{"location":"sf/#_2","text":"","title":"\u8054\u7cfb\u65b9\u5f0f\uff1a"},{"location":"sf/#qq1683070754","text":"","title":"qq\uff1a1683070754"},{"location":"sf/#1683070754qqcom","text":"\u8c22\u8c22\u5404\u4f4d\u7684\u6307\u5bfc\uff01\uff01","title":"\u90ae\u7bb1\uff1a1683070754@qq.com"},{"location":"sf/1/","text":"\u524d\u51e0\u5929\u5728\u6d1b\u8c37\u521a\u5237\u7684\u4e00\u4e2a\u9898\u76ee ~~\u5f53\u65f6\u5728\u4e00\u4e9b\u5730\u65b9\u8e29\u4e86\u5751\uff0c\u5199\u51fa\u6765\u5438\u53d6\u6559\u8bad~~ \u6d1b\u8c37\u94fe\u63a5 \uff1ahttps://www.luogu.com.cn/problem/P1055 \u5f53\u65f6\u83b7\u53d6\u8f93\u5165\u7684\u65f6\u5019\u662f\u7528%d\u6765\u83b7\u53d6\u7684\uff0c\u540e\u6765\u53d1\u73b0\u6570\u636e\u5341\u5206\u5f02\u5e38\uff0c\u901a\u8fc7\u6d4b\u8bd5\u53d1\u73b0 -\u53f7\u88ab\u8bc6\u522b\u6210\u4e86\u7b26\u53f7\uff0c\u6240\u4ee5\u83b7\u53d6\u7684\u8f93\u5165\u5f02\u5e38 \u7ecf\u8fc7\u5f88\u4e45\u7684\u601d\u8003 \u7136\u540e\u6211\u604d\u7136\u5927\u609f\uff0c\u7528%c\u83b7\u53d6\u5c31\u597d\u4e86\u554a\uff01 \u5148\u8d34\u4e0a\u4ee3\u7801 #include <iostream> #include <stdlib.h> #include <cstdio> using namespace std; int main(){ char temp; char num[9]; scanf(\"%c-%c%c%c-%c%c%c%c%c-%c\",&num[0],&num[1],&num[2],&num[3],&num[4],&num[5],&num[6],&num[7],&num[8],&temp); int sum = 0; int X = 'X'; for(int n =1;n<=9;n++){ sum=sum+((num[n-1]-48)*n); } if(sum%11 == 10){ if(temp=='X'){ printf(\"Right\"); } else { printf(\"%c-%c%c%c-%c%c%c%c%c-%c\",num[0],num[1],num[2],num[3],num[4],num[5],num[6],num[7],num[8],'X'); } } else if(sum%11 == (int)temp-48){ printf(\"Right\"); } else if(sum%11 != (int)temp-48) { printf(\"%c-%c%c%c-%c%c%c%c%c-%c\",num[0],num[1],num[2],num[3],num[4],num[5],num[6],num[7],num[8],(char)((sum%11)+48)); } system(\"pause\"); return 0; } \u867d\u7136\u6211\u5199\u7684\u5f88\u81c3\u80bf\uff0c\u4f46\u81f3\u5c11AC\u4e86 \u540e\u6765\u4e5f\u6ca1\u60f3\u7740\u4f18\u5316\u4ee3\u7801\u3002 \u603b\u4e4b\u6211\u5c31\u662f\u901a\u8fc7\u5b57\u7b26\u83b7\u53d6\u8f93\u5165\u7136\u540e\u8f6c\u6362\u6210\u6574\u6570\u578b\u5728\u8fdb\u884c\u5224\u65ad \u603b\u4f53\u7684\u96be\u70b9\u5c31\u5728\u8fd9\uff0c\u666e\u53ca\u9898\u7684\u96be\u5ea6\uff0c\u540e\u9762\u5c31\u5f88\u7b80\u5355\u4e86\uff01 \u6211\u83b7\u5f97\u7684\u6536\u83b7\u5982\u4e0b\uff1a \u83b7\u53d6\u8f93\u5165\u65f6\u8981\u7075\u6d3b\u5224\u65ad\u662f\u5b57\u7b26\u8fd8\u662f\u6574\u6570 \u7075\u6d3b\u4f7f\u7528\u6570\u7ec4 \u8981\u53ca\u65f6\u4f18\u5316\u4ee3\u7801 \u5411\u5927\u4f6c\u5b66\u4e60\uff01","title":"isbn\u53f7\u7801"},{"location":"sf/2/","text":"\u6211\u505a\u7684\u7b2c\u4e00\u4e2a\u6253\u8868\u9898 \u4eca\u5929\u5728\u6d1b\u8c37\u5237\u9898\uff0c\u4ece\u9898\u5355\u91cc\u9762\u5f00\u59cb\u4e00\u70b9\u4e00\u70b9\u5237\uff0c\u7136\u540e\u53d1\u73b0\u4e86\u8fd9\u9053\u9898 \u9636\u4e58\u4e4b\u548c \u9898\u76ee\u7684\u8981\u6c42\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u5c061-n\u7684\u6240\u6709\u6570\u7684\u9636\u4e58\u76f8\u52a0\u8d77\u6765\u3002 \u56e0\u4e3a\u4e4b\u524d\u505a\u8fc7\u8fd9\u6837\u7684\u9898\u76ee\uff0c\u6240\u4ee5\u4e00\u5f00\u59cb\u76f4\u63a5\u60f3\u5f53\u7136\u7684\u53bb\u4e0a\u624b\u4e86\u3002 \u5f00\u59cb\u6211\u662f\u8fd9\u6837\u5199\u7684\uff1a #include <iostream> #include <cstdio> using namespace std; int re_jie(int n){ if(n==1){ return 1; } else if(n==0){ return 0; } else{ return n*re_jie(n-1); } } int main(){ int i; long long sum; cin>>i; for(int n=1;n<=i;n++){ sum+=re_jie(n); } cout<<sum; return 0; } \u672c\u4ee5\u4e3a\u8fd9\u4e2a\u9898\u5c31\u8fd9\u6837A\u8fc7\u53bb\u4e86 \u7ed3\u679c\u540e\u4e24\u4e2aWA\u4e86\uff0c\u7136\u540e\u6211\u518d\u4ed4\u7ec6\u4e00\u770b\u53d1\u73b0\u8fd9\u662f\u4e00\u4e2a\u666e\u53ca\u9898\uff0c\u6240\u4ee5\u80af\u5b9a\u4e0d\u53ef\u80fd\u8fd9\u4e48\u7b80\u5355\u7684\u3002 \u4e8e\u662f\u6211\u6709\u770b\u4e86\u770b\u9898\uff0c\u53d1\u73b0\u4e86\u4e0b\u9762\u7684\u63d0\u793a\u3002 \u539f\u6765\u8fd9\u4e2a\u9898\u8f93\u5165\u5927\u4e8e20\u4ee5\u540e\u6570\u636e\u8303\u56f4\u5c31\u8d85\u4e86\uff0c\u8fd9\u65f6\u5019\u6211\u610f\u8bc6\u5230\u8fd9\u662f\u4e2a\u9ad8\u7cbe\u5ea6\u95ee\u9898\u4e86\u3002 \u4e00\u770b\u9898\u76ee\u7684\u9650\u5236\uff0cn<=50 \u6570\u636e\u91cf\u4e0d\u662f\u5f88\u5927\u554a\u3002 \u4e8e\u662f\u60f3\u8d77\u4e86\u7f51\u4e0a\u5e38\u8bf4\u7684\u6253\u8868\u4e86\u3002 \u867d\u7136\u6211\u77e5\u9053\u4ec0\u4e48\u662f\u6253\u8868\uff0c\u4f46\u4e5f\u4e00\u76f4\u6ca1\u6709\u7528\u5230\u8fc7\u3002 \u53c8\u60f3\u8d77\u6765python\u91cc\u81ea\u5e26\u9ad8\u7cbe\u5ea6\u6570\u636e\u7c7b\u578b\uff0c\u4e8e\u662f\u6211\u60f3\u8d77\u4e86\u7528python\u5b9e\u73b0\u6253\u8868\u7684\u4efb\u52a1 python\u4ee3\u7801\u5982\u4e0b def re_jie(n): if n==1: return 1 else: return n*re_jie(n-1) def re_sum(m): sum=0 for i in range(1,m+1): sum+=re_jie(i) return sum for a in range(1,51): print('\"{}\",'.format(re_sum(a))) \u6700\u540e\u5f97\u5230\u7684\u5c31\u662f\u6240\u6709\u7684\u7ed3\u679c \u7136\u540e\u5c06\u8fd9\u4e9b\u7ed3\u679c\u590d\u5236\u5230cpp\u7a0b\u5e8f\u4e2d\u53bb #include <iostream> #include <cstdio> #include <stdlib.h> #include <string> using namespace std; int main(){ string st[60] = {\"0\", \"1\", \"3\", \"9\", \"33\", \"153\", \"873\", \"5913\", \"46233\", \"409113\", \"4037913\", \"43954713\", \"522956313\", \"6749977113\", \"93928268313\", \"1401602636313\", \"22324392524313\", \"378011820620313\", \"6780385526348313\", \"128425485935180313\", \"2561327494111820313\", \"53652269665821260313\", \"1177652997443428940313\", \"27029669736328405580313\", \"647478071469567844940313\", \"16158688114800553828940313\", \"419450149241406189412940313\", \"11308319599659758350180940313\", \"316196664211373618851684940313\", \"9157958657951075573395300940313\", \"274410818470142134209703780940313\", \"8497249472648064951935266660940313\", \"271628086406341595119153278820940313\", \"8954945705218228090637347680100940313\", \"304187744744822368938255957323620940313\", \"10637335711130967298604907294846820940313\", \"382630662501032184766604355445682020940313\", \"14146383753727377231082583937026584420940313\", \"537169001220328488991089808037100875620940313\", \"20935051082417771847631371547939998232420940313\", \"836850334330315506193242641144055892504420940313\", \"34289376947494122614363304694584807557656420940313\", \"1439295494700374021157505910939096377494040420940313\", \"61854558558074209658512637979453093884758552420940313\", \"2720126133346522977702138448994068984204397080420940313\", \"122342346998826717539665299944651784048588130840420940313\", \"5624964506810915667389970728744906677010239883800420940313\", \"264248206017979096310354325882356886646207872272920420940313\", \"12678163798554051767172643373255731925167694226950680420940313\", \"620960027832821612639424806694551108812720525606160920420940313\", \"31035053229546199656252032972759319953190362094566672920420940313\"}; int n; cin>>n; cout<<st[n]; system(\"pause\"); return 0; } \u6700\u540eAC\u6210\u529f\u4e86\uff0c\u7b2c\u4e00\u6b21\u505a\u6253\u8868\u9898\uff0c\u611f\u89c9\u826f\u597d\uff0c\u5341\u5206\u8212\u723d\u554a\uff01\u3002 \u6700\u540e\u603b\u7ed3\u4e00\u4e0b \u6570\u636e\u8fc7\u5927\u7684\u8bb0\u5f97\u4f7f\u7528\u9ad8\u7cbe\u5ea6 \u6570\u636e\u91cf\u4e0d\u5927\u7684\u7528\u6253\u8868\u6bd4\u8f83\u5feb","title":"\u6211\u505a\u7684\u7b2c\u4e00\u4e2a\u6253\u8868\u9898"},{"location":"sf/2/#_1","text":"\u4eca\u5929\u5728\u6d1b\u8c37\u5237\u9898\uff0c\u4ece\u9898\u5355\u91cc\u9762\u5f00\u59cb\u4e00\u70b9\u4e00\u70b9\u5237\uff0c\u7136\u540e\u53d1\u73b0\u4e86\u8fd9\u9053\u9898 \u9636\u4e58\u4e4b\u548c \u9898\u76ee\u7684\u8981\u6c42\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u5c061-n\u7684\u6240\u6709\u6570\u7684\u9636\u4e58\u76f8\u52a0\u8d77\u6765\u3002 \u56e0\u4e3a\u4e4b\u524d\u505a\u8fc7\u8fd9\u6837\u7684\u9898\u76ee\uff0c\u6240\u4ee5\u4e00\u5f00\u59cb\u76f4\u63a5\u60f3\u5f53\u7136\u7684\u53bb\u4e0a\u624b\u4e86\u3002 \u5f00\u59cb\u6211\u662f\u8fd9\u6837\u5199\u7684\uff1a #include <iostream> #include <cstdio> using namespace std; int re_jie(int n){ if(n==1){ return 1; } else if(n==0){ return 0; } else{ return n*re_jie(n-1); } } int main(){ int i; long long sum; cin>>i; for(int n=1;n<=i;n++){ sum+=re_jie(n); } cout<<sum; return 0; } \u672c\u4ee5\u4e3a\u8fd9\u4e2a\u9898\u5c31\u8fd9\u6837A\u8fc7\u53bb\u4e86 \u7ed3\u679c\u540e\u4e24\u4e2aWA\u4e86\uff0c\u7136\u540e\u6211\u518d\u4ed4\u7ec6\u4e00\u770b\u53d1\u73b0\u8fd9\u662f\u4e00\u4e2a\u666e\u53ca\u9898\uff0c\u6240\u4ee5\u80af\u5b9a\u4e0d\u53ef\u80fd\u8fd9\u4e48\u7b80\u5355\u7684\u3002 \u4e8e\u662f\u6211\u6709\u770b\u4e86\u770b\u9898\uff0c\u53d1\u73b0\u4e86\u4e0b\u9762\u7684\u63d0\u793a\u3002 \u539f\u6765\u8fd9\u4e2a\u9898\u8f93\u5165\u5927\u4e8e20\u4ee5\u540e\u6570\u636e\u8303\u56f4\u5c31\u8d85\u4e86\uff0c\u8fd9\u65f6\u5019\u6211\u610f\u8bc6\u5230\u8fd9\u662f\u4e2a\u9ad8\u7cbe\u5ea6\u95ee\u9898\u4e86\u3002 \u4e00\u770b\u9898\u76ee\u7684\u9650\u5236\uff0cn<=50 \u6570\u636e\u91cf\u4e0d\u662f\u5f88\u5927\u554a\u3002 \u4e8e\u662f\u60f3\u8d77\u4e86\u7f51\u4e0a\u5e38\u8bf4\u7684\u6253\u8868\u4e86\u3002 \u867d\u7136\u6211\u77e5\u9053\u4ec0\u4e48\u662f\u6253\u8868\uff0c\u4f46\u4e5f\u4e00\u76f4\u6ca1\u6709\u7528\u5230\u8fc7\u3002 \u53c8\u60f3\u8d77\u6765python\u91cc\u81ea\u5e26\u9ad8\u7cbe\u5ea6\u6570\u636e\u7c7b\u578b\uff0c\u4e8e\u662f\u6211\u60f3\u8d77\u4e86\u7528python\u5b9e\u73b0\u6253\u8868\u7684\u4efb\u52a1 python\u4ee3\u7801\u5982\u4e0b def re_jie(n): if n==1: return 1 else: return n*re_jie(n-1) def re_sum(m): sum=0 for i in range(1,m+1): sum+=re_jie(i) return sum for a in range(1,51): print('\"{}\",'.format(re_sum(a))) \u6700\u540e\u5f97\u5230\u7684\u5c31\u662f\u6240\u6709\u7684\u7ed3\u679c \u7136\u540e\u5c06\u8fd9\u4e9b\u7ed3\u679c\u590d\u5236\u5230cpp\u7a0b\u5e8f\u4e2d\u53bb #include <iostream> #include <cstdio> #include <stdlib.h> #include <string> using namespace std; int main(){ string st[60] = {\"0\", \"1\", \"3\", \"9\", \"33\", \"153\", \"873\", \"5913\", \"46233\", \"409113\", \"4037913\", \"43954713\", \"522956313\", \"6749977113\", \"93928268313\", \"1401602636313\", \"22324392524313\", \"378011820620313\", \"6780385526348313\", \"128425485935180313\", \"2561327494111820313\", \"53652269665821260313\", \"1177652997443428940313\", \"27029669736328405580313\", \"647478071469567844940313\", \"16158688114800553828940313\", \"419450149241406189412940313\", \"11308319599659758350180940313\", \"316196664211373618851684940313\", \"9157958657951075573395300940313\", \"274410818470142134209703780940313\", \"8497249472648064951935266660940313\", \"271628086406341595119153278820940313\", \"8954945705218228090637347680100940313\", \"304187744744822368938255957323620940313\", \"10637335711130967298604907294846820940313\", \"382630662501032184766604355445682020940313\", \"14146383753727377231082583937026584420940313\", \"537169001220328488991089808037100875620940313\", \"20935051082417771847631371547939998232420940313\", \"836850334330315506193242641144055892504420940313\", \"34289376947494122614363304694584807557656420940313\", \"1439295494700374021157505910939096377494040420940313\", \"61854558558074209658512637979453093884758552420940313\", \"2720126133346522977702138448994068984204397080420940313\", \"122342346998826717539665299944651784048588130840420940313\", \"5624964506810915667389970728744906677010239883800420940313\", \"264248206017979096310354325882356886646207872272920420940313\", \"12678163798554051767172643373255731925167694226950680420940313\", \"620960027832821612639424806694551108812720525606160920420940313\", \"31035053229546199656252032972759319953190362094566672920420940313\"}; int n; cin>>n; cout<<st[n]; system(\"pause\"); return 0; } \u6700\u540eAC\u6210\u529f\u4e86\uff0c\u7b2c\u4e00\u6b21\u505a\u6253\u8868\u9898\uff0c\u611f\u89c9\u826f\u597d\uff0c\u5341\u5206\u8212\u723d\u554a\uff01\u3002 \u6700\u540e\u603b\u7ed3\u4e00\u4e0b \u6570\u636e\u8fc7\u5927\u7684\u8bb0\u5f97\u4f7f\u7528\u9ad8\u7cbe\u5ea6 \u6570\u636e\u91cf\u4e0d\u5927\u7684\u7528\u6253\u8868\u6bd4\u8f83\u5feb","title":"\u6211\u505a\u7684\u7b2c\u4e00\u4e2a\u6253\u8868\u9898"},{"location":"sf/3/","text":"\u4f4d\u8fd0\u7b97\u7684\u4e00\u4e2a\u5e94\u7528 \u7ffb\u4e86\u7ffb\u4ee5\u524d\u7528python\u5237leetcode\u7684\u8bb0\u5f55\uff0c\u6700\u540e\u5237\u7684\u4e00\u9053\u9898\u662f\u8fd9\u6837\u7684 https://leetcode-cn.com/problems/single-number/ \u53eb\u53ea\u51fa\u73b0\u4e00\u6b21\u7684\u6570\u5b57\uff0c\u5f53\u65f6\u770b\u9898\u611f\u89c9\u975e\u5e38\u7b80\u5355\u554a\uff01\u76f4\u63a5\u641e\u5c31\u884c\u4e86 \u5f53\u65f6\u4e00\u5f00\u59cb\u6211\u7684\u505a\u6cd5\u662f\u8fd9\u6837\u7684 class Solution: def singleNumber(self, nums): for i in set(nums): if nums.count(i) ==1: return i \u4fe1\u5fc3\u6ee1\u6ee1\u7684\u63d0\u4ea4\uff0c\u7ed3\u679c\u53d1\u73b0TLE\u4e86\u3002\u3002 \u7136\u540e\u770b\u8d85\u65f6\u6848\u4f8b\u7684\u8f93\u5165\uff0c\u6ca1\u6709\u4e00\u4e2a\u6570\u5b57\u91cd\u590d\uff0c\u4e5f\u5c31\u662f\u8bf4\u6211\u7684set\u8ddf\u6ca1\u6709\u4e00\u6837\uff0c\u6240\u4ee5\u8bf4\u80af\u5b9a\u4e0d\u80fd\u8fd9\u4e48\u505a\u3002 \u7136\u540e\u53c8\u60f3\u5230\u4e86\u54c8\u5e0c\u8868 class Solution: def singleNumber(self, nums): dic={} for num in nums: if num in dic.keys(): dic[num]+=1 else: dic[num]=1 for i in dic.keys(): if dic[i] ==1: return i \u8fd9\u6837\u4e5f\u7b97\u662fAC\u4e86\u3002\u672c\u4ee5\u4e3a\u8fd9\u4e2a\u9898\u5c31\u8fd9\u4e48\u7ed3\u675f\u4e86\uff0c\u7ed3\u679c\u65e0\u610f\u4e2d\u770b\u5230\u4e86\u522b\u7684\u9898\u89e3\u9707\u60ca\u4e86 \u4ee3\u7801\u6570\u91cf\u6bd4\u6211\u77ed\u7684\u591a\u5f97\u591a\u3002 \u7136\u540e\u5c31\u8ba4\u8bc6\u5230\u4e86\u4f4d\u8fd0\u7b97\u7684\u9b54\u529b\u3002\u3002 \u5148\u4e0a\u4ee3\u7801\uff1a class Solution: def singleNumber(self, nums): a = 0 for i in nums: a^=i return a \u7b80\u5355\u7684\u4e00\u4e2a\u5f02\u6216\u8fd0\u7b97\u5c31\u8fbe\u5230\u4e86\u76ee\u7684 \u771f\u662f\u592a\u795e\u5947\u4e86\uff01 \u627e\u5230\u76f8\u5173\u8d44\u6599 \u4ea4\u6362\u5f8b\uff1aa ^ b ^ c <=> a ^ c ^ b \u4efb\u4f55\u6570\u4e8e0\u5f02\u6216\u4e3a\u4efb\u4f55\u6570 0 ^ n => n \u76f8\u540c\u7684\u6570\u5f02\u6216\u4e3a0: n ^ n => 0 \u4e5f\u5c31\u662f\u8bf4\u76f8\u540c\u7684\u6570\u5c31\u5f02\u6216\u4e3a0\u4e86\uff0c\u8fbe\u5230\u4e86\u53bb\u91cd\u7684\u76ee\u7684\u3002","title":"\u4f4d\u8fd0\u7b97\u7684\u5e94\u7528"},{"location":"sf/3/#_1","text":"\u7ffb\u4e86\u7ffb\u4ee5\u524d\u7528python\u5237leetcode\u7684\u8bb0\u5f55\uff0c\u6700\u540e\u5237\u7684\u4e00\u9053\u9898\u662f\u8fd9\u6837\u7684 https://leetcode-cn.com/problems/single-number/ \u53eb\u53ea\u51fa\u73b0\u4e00\u6b21\u7684\u6570\u5b57\uff0c\u5f53\u65f6\u770b\u9898\u611f\u89c9\u975e\u5e38\u7b80\u5355\u554a\uff01\u76f4\u63a5\u641e\u5c31\u884c\u4e86 \u5f53\u65f6\u4e00\u5f00\u59cb\u6211\u7684\u505a\u6cd5\u662f\u8fd9\u6837\u7684 class Solution: def singleNumber(self, nums): for i in set(nums): if nums.count(i) ==1: return i \u4fe1\u5fc3\u6ee1\u6ee1\u7684\u63d0\u4ea4\uff0c\u7ed3\u679c\u53d1\u73b0TLE\u4e86\u3002\u3002 \u7136\u540e\u770b\u8d85\u65f6\u6848\u4f8b\u7684\u8f93\u5165\uff0c\u6ca1\u6709\u4e00\u4e2a\u6570\u5b57\u91cd\u590d\uff0c\u4e5f\u5c31\u662f\u8bf4\u6211\u7684set\u8ddf\u6ca1\u6709\u4e00\u6837\uff0c\u6240\u4ee5\u8bf4\u80af\u5b9a\u4e0d\u80fd\u8fd9\u4e48\u505a\u3002 \u7136\u540e\u53c8\u60f3\u5230\u4e86\u54c8\u5e0c\u8868 class Solution: def singleNumber(self, nums): dic={} for num in nums: if num in dic.keys(): dic[num]+=1 else: dic[num]=1 for i in dic.keys(): if dic[i] ==1: return i \u8fd9\u6837\u4e5f\u7b97\u662fAC\u4e86\u3002\u672c\u4ee5\u4e3a\u8fd9\u4e2a\u9898\u5c31\u8fd9\u4e48\u7ed3\u675f\u4e86\uff0c\u7ed3\u679c\u65e0\u610f\u4e2d\u770b\u5230\u4e86\u522b\u7684\u9898\u89e3\u9707\u60ca\u4e86 \u4ee3\u7801\u6570\u91cf\u6bd4\u6211\u77ed\u7684\u591a\u5f97\u591a\u3002 \u7136\u540e\u5c31\u8ba4\u8bc6\u5230\u4e86\u4f4d\u8fd0\u7b97\u7684\u9b54\u529b\u3002\u3002 \u5148\u4e0a\u4ee3\u7801\uff1a class Solution: def singleNumber(self, nums): a = 0 for i in nums: a^=i return a \u7b80\u5355\u7684\u4e00\u4e2a\u5f02\u6216\u8fd0\u7b97\u5c31\u8fbe\u5230\u4e86\u76ee\u7684 \u771f\u662f\u592a\u795e\u5947\u4e86\uff01 \u627e\u5230\u76f8\u5173\u8d44\u6599 \u4ea4\u6362\u5f8b\uff1aa ^ b ^ c <=> a ^ c ^ b \u4efb\u4f55\u6570\u4e8e0\u5f02\u6216\u4e3a\u4efb\u4f55\u6570 0 ^ n => n \u76f8\u540c\u7684\u6570\u5f02\u6216\u4e3a0: n ^ n => 0 \u4e5f\u5c31\u662f\u8bf4\u76f8\u540c\u7684\u6570\u5c31\u5f02\u6216\u4e3a0\u4e86\uff0c\u8fbe\u5230\u4e86\u53bb\u91cd\u7684\u76ee\u7684\u3002","title":"\u4f4d\u8fd0\u7b97\u7684\u4e00\u4e2a\u5e94\u7528"},{"location":"sf/4/","text":"\u4f4d\u8fd0\u7b97\u7684\u5e94\u7528\uff082\uff09 \u4e5f\u662fleetcode\u4e0a\u7684\u4e00\u4e2a\u9898\u76ee\uff0c\u9898\u76ee\u662f\u8fd9\u6837\u7684 https://leetcode-cn.com/problems/number-of-1-bits/ \u8bdd\u4e0d\u591a\u8bf4 \u76f4\u63a5\u4e0a\u4ee3\u7801 class Solution { public: int hammingWeight(uint32_t n) { int count = 0; while(n>0){ if((n&1)==1){ //\u5982\u679c\u672b\u4f4d\u4e3a1 count++; } n=(n>>1); //\u6bcf\u6b21\u5411\u53f3\u79fb\u52a8\u4e00\u4f4d } return count; } };","title":"\u4f4d\u8fd0\u7b97\u7684\u5e94\u7528(2)"},{"location":"sf/4/#2","text":"\u4e5f\u662fleetcode\u4e0a\u7684\u4e00\u4e2a\u9898\u76ee\uff0c\u9898\u76ee\u662f\u8fd9\u6837\u7684 https://leetcode-cn.com/problems/number-of-1-bits/ \u8bdd\u4e0d\u591a\u8bf4 \u76f4\u63a5\u4e0a\u4ee3\u7801 class Solution { public: int hammingWeight(uint32_t n) { int count = 0; while(n>0){ if((n&1)==1){ //\u5982\u679c\u672b\u4f4d\u4e3a1 count++; } n=(n>>1); //\u6bcf\u6b21\u5411\u53f3\u79fb\u52a8\u4e00\u4f4d } return count; } };","title":"\u4f4d\u8fd0\u7b97\u7684\u5e94\u7528\uff082\uff09"},{"location":"spider/base/","text":"\u722c\u866b \u722c\u866b\u662f\u6211\u6bd4\u8f83\u64c5\u957f\u7684\u4e3b\u9898\uff0c\u800c\u4e14\u5b83\u5165\u95e8\u4e5f\u662f\u6bd4\u8f83\u7b80\u5355\u7684\u3002 \u722c\u866b\u7684\u6838\u5fc3\u5e93\u662f requests \u5e93 \u53ef\u4ee5\u901a\u8fc7 pip install requests \u6765\u5b89\u88c5 \u6700\u7b80\u5355\u7684\u722c\u866b\u7a0b\u5e8f\uff1a import requests headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.198 Safari'} res = requests.get(\"http://www.baidu.com\",headers=headers) res.encoding = 'utf-8'#\u6ce8\u610f\u4e71\u7801\u95ee\u9898 print(res.text) #print(res.headers)\u8fd4\u56de\u5934 \u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u5148\u5bfc\u5165requests\u5e93\uff0c\u7136\u540e\u8c03\u7528requests\u5e93\u4e2d\u7684get()\u65b9\u6cd5\uff0c\u5bf9\u7f51\u7ad9\u8fdb\u884cget\u8bf7\u6c42\uff0c\u7136\u540e\u5c06\u8fd4\u56de\u7684\u5185\u5bb9\u6253\u5370\u51fa\u6765 \u5f53\u7136\u6709\u65f6\u5019\u6211\u4eec\u722c\u866b\u8981\u4f2a\u88c5\u4e00\u4e0b\uff0c\u5728\u8bf7\u6c42\u7684\u65f6\u5019\u52a0\u5165\u5934headers \u89e3\u6790\u7f51\u9875 \u5728\u83b7\u5f97\u4e86\u7f51\u9875\u7684\u5185\u5bb9\u540e\uff0c\u53d1\u73b0\u5927\u90e8\u5206\u90fd\u662f\u4ee3\u7801\uff0c\u90a3\u6211\u4eec\u600e\u4e48\u6837\u6765\u83b7\u5f97\u81ea\u5df1\u60f3\u8981\u7684\u90a3\u90e8\u5206\u5185\u5bb9\u5462\uff0c\u8fd9\u65f6\u5019\u5c31\u8981\u7528\u5230\u7f51\u9875\u89e3\u6790\u5e93\u4e86 \u8fd9\u91cc\u5462\u6211\u63a8\u8350\u4f7f\u7528\u7684\u662f lxml ,\u5373\u4f7f\u7528 xpath \u8bed\u6cd5\uff0c\u4e5f\u662f\u6211\u4e2a\u4eba\u5e38\u7528\u7684\uff0c\u56e0\u4e3a\u5b83\u7684\u901f\u5ea6\u6bd4\u8f83\u5feb\uff0c\u8bed\u6cd5\u4e5f\u4e0d\u96be\u3002 pip install lxml \u8fdb\u884c\u5b89\u88c5 from lxml import etree import requests res = requests.get('https://inkplatform.gitbook.io/andrew-pytorch/') sele = etree.HTML(res.text) nav = sele.xpath('//*[@id=\"ke-cheng-yi-shen-jing-wang-luo-yu-shen-du-xue-xi\"]/div[1]/span/span/span/text()') print(nav) \u8fd9\u6837\u901a\u8fc7xpath\u8bed\u6cd5\u6765\u83b7\u5f97\u4e00\u4e9b\u5185\u5bb9 \u4f7f\u7528API API\u5c31\u662f\u5f00\u53d1\u8005\u5236\u4f5c\u7684\u5916\u90e8\u63a5\u53e3\uff0c\u8fd9\u90e8\u5206\u7684\u5185\u5bb9\u53ef\u4ee5\u767e\u5ea6\u4e00\u4e0b \u4e00\u822c\u7684API\u53ef\u4ee5\u901a\u8fc7\u6293\u5305\u83b7\u5f97 \u8fd9\u91cc\u76f4\u63a5\u653e\u6211\u6293bilibili cos\u533a\u56fe\u7247\u7684\u4f8b\u5b50\u5427 API\u662f\u6211\u6293\u5305\u6293\u6765\u7684\u3002 import requests import json headers = {'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36'} #\u6a21\u62df\u6d4f\u89c8\u5668 urls = [f'https://api.vc.bilibili.com/link_draw/v2/Photo/list?category=cos&type=hot&page_num={f}&page_size=50' for f in range(1,25)] #\u5217\u8868\u89e3\u6790\u5f0f\u6784\u5efaurls def get_photo(url): res = requests.get(url,headers=headers) jsons = json.loads(res.text) lists = jsons['data']['items'][0]['item']['pictures'] #\u89e3\u6790json url_list=[] for list in lists: url_list.append(list['img_src']) for urld in url_list: ress = requests.get(urld,headers=headers) fp = open(f'meizitu\\\\{urld[-20:]}','wb') fp.write(ress.content) print(\"OK\") fp.close() #main for url in urls: try: get_photo(url) except IndexError: pass POST\u8bf7\u6c42 \u4f7f\u7528 requests.post(url,data=params,headers=headers) params\u4e3a\u4f20\u5165\u7684\u53c2\u6570 \u6216\u8005\u83b7\u53d6cookie \u7136\u540e\u5728headers\u91cc\u9762\u4f20\u5165 \u4f9d\u65e7\u7528\u6211\u722c\u8fc7\u7684\u4f8b\u5b50 import requests import json import time params={ 'account':\"youraccount\", 'password':\"yourpassword\", \"phoneVersion\":19, \"platform\":1, \"deviceCode\":355757010701395, \"versionNumber\":\"9.4.0\", \"channel\":\"ppMarket\", \"phoneBrand\":\"samsung\", \"phoneModel\":\"SM-G955F\" } res=requests.post(\"http://120.55.151.61/V2/StudentSkip/loginCheckV4.action\",params) \u5176\u5b9e\u8ddfget\u5dee\u4e0d\u591a selenium selenium\u662f\u81ea\u52a8\u5316\u5de5\u5177\uff0c\u53ef\u4ee5\u914d\u5408\u5404\u6d4f\u89c8\u5668\u4f7f\u7528\u3002 \u7528\u6765\u6a21\u62df\u4eba\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982\u8bf4\u8f93\u5165\u8d26\u53f7\u5bc6\u7801\uff0c\u70b9\u51fb\u6309\u94ae\uff0c\u8fd8\u53ef\u4ee5\u83b7\u53d6\u6570\u636e\u3002 \u4e14\u4e5f\u652f\u6301xpath\u8bed\u6cd5\u662f\u722c\u53d6\u5f02\u6b65\u52a0\u8f7d\u7f51\u9875\u6216\u9700\u8981\u7528\u5230\u767b\u5f55\u65f6\u7684\u5229\u5668\uff0c\u867d\u7136\u53ef\u4ee5\u6293\u5305\uff0c\u4f46\u4e0d\u5982\u8fd9\u6837\u6765\u7684\u76f4\u63a5\u3002 \u8bb0\u5f55\u4e00\u4e0b\u9047\u5230\u7684\u5751\uff1a \u5728\u83b7\u53d6\u67d0\u4e2a\u5143\u7d20\u65f6\uff0c\u4f8b\u5982\u7528class\u83b7\u53d6\u7684\u8bdd\uff0c\u8981\u7528 browser.find_element_by_class_name \u6ce8\u610f\u6ce8\u610f\u6ce8\u610f element\u4e0d\u8981\u52a0s \u4e0d\u7136\u5c31\u8fd4\u56de\u4e00\u4e2a\u5217\u8868\u4e86 2020 11.19\u8e29\u5751\u4e86\uff0c\u7279\u6765\u8bb0\u5f55\uff01 Scrapy Scrapy\u662f\u4e00\u4e2a\u722c\u866b\u6846\u67b6","title":"\u57fa\u7840"},{"location":"spider/base/#_1","text":"\u722c\u866b\u662f\u6211\u6bd4\u8f83\u64c5\u957f\u7684\u4e3b\u9898\uff0c\u800c\u4e14\u5b83\u5165\u95e8\u4e5f\u662f\u6bd4\u8f83\u7b80\u5355\u7684\u3002 \u722c\u866b\u7684\u6838\u5fc3\u5e93\u662f requests \u5e93 \u53ef\u4ee5\u901a\u8fc7 pip install requests \u6765\u5b89\u88c5","title":"\u722c\u866b"},{"location":"spider/base/#_2","text":"import requests headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.198 Safari'} res = requests.get(\"http://www.baidu.com\",headers=headers) res.encoding = 'utf-8'#\u6ce8\u610f\u4e71\u7801\u95ee\u9898 print(res.text) #print(res.headers)\u8fd4\u56de\u5934 \u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u5148\u5bfc\u5165requests\u5e93\uff0c\u7136\u540e\u8c03\u7528requests\u5e93\u4e2d\u7684get()\u65b9\u6cd5\uff0c\u5bf9\u7f51\u7ad9\u8fdb\u884cget\u8bf7\u6c42\uff0c\u7136\u540e\u5c06\u8fd4\u56de\u7684\u5185\u5bb9\u6253\u5370\u51fa\u6765 \u5f53\u7136\u6709\u65f6\u5019\u6211\u4eec\u722c\u866b\u8981\u4f2a\u88c5\u4e00\u4e0b\uff0c\u5728\u8bf7\u6c42\u7684\u65f6\u5019\u52a0\u5165\u5934headers","title":"\u6700\u7b80\u5355\u7684\u722c\u866b\u7a0b\u5e8f\uff1a"},{"location":"spider/base/#_3","text":"\u5728\u83b7\u5f97\u4e86\u7f51\u9875\u7684\u5185\u5bb9\u540e\uff0c\u53d1\u73b0\u5927\u90e8\u5206\u90fd\u662f\u4ee3\u7801\uff0c\u90a3\u6211\u4eec\u600e\u4e48\u6837\u6765\u83b7\u5f97\u81ea\u5df1\u60f3\u8981\u7684\u90a3\u90e8\u5206\u5185\u5bb9\u5462\uff0c\u8fd9\u65f6\u5019\u5c31\u8981\u7528\u5230\u7f51\u9875\u89e3\u6790\u5e93\u4e86 \u8fd9\u91cc\u5462\u6211\u63a8\u8350\u4f7f\u7528\u7684\u662f lxml ,\u5373\u4f7f\u7528 xpath \u8bed\u6cd5\uff0c\u4e5f\u662f\u6211\u4e2a\u4eba\u5e38\u7528\u7684\uff0c\u56e0\u4e3a\u5b83\u7684\u901f\u5ea6\u6bd4\u8f83\u5feb\uff0c\u8bed\u6cd5\u4e5f\u4e0d\u96be\u3002 pip install lxml \u8fdb\u884c\u5b89\u88c5 from lxml import etree import requests res = requests.get('https://inkplatform.gitbook.io/andrew-pytorch/') sele = etree.HTML(res.text) nav = sele.xpath('//*[@id=\"ke-cheng-yi-shen-jing-wang-luo-yu-shen-du-xue-xi\"]/div[1]/span/span/span/text()') print(nav) \u8fd9\u6837\u901a\u8fc7xpath\u8bed\u6cd5\u6765\u83b7\u5f97\u4e00\u4e9b\u5185\u5bb9","title":"\u89e3\u6790\u7f51\u9875"},{"location":"spider/base/#api","text":"API\u5c31\u662f\u5f00\u53d1\u8005\u5236\u4f5c\u7684\u5916\u90e8\u63a5\u53e3\uff0c\u8fd9\u90e8\u5206\u7684\u5185\u5bb9\u53ef\u4ee5\u767e\u5ea6\u4e00\u4e0b \u4e00\u822c\u7684API\u53ef\u4ee5\u901a\u8fc7\u6293\u5305\u83b7\u5f97 \u8fd9\u91cc\u76f4\u63a5\u653e\u6211\u6293bilibili cos\u533a\u56fe\u7247\u7684\u4f8b\u5b50\u5427 API\u662f\u6211\u6293\u5305\u6293\u6765\u7684\u3002 import requests import json headers = {'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36'} #\u6a21\u62df\u6d4f\u89c8\u5668 urls = [f'https://api.vc.bilibili.com/link_draw/v2/Photo/list?category=cos&type=hot&page_num={f}&page_size=50' for f in range(1,25)] #\u5217\u8868\u89e3\u6790\u5f0f\u6784\u5efaurls def get_photo(url): res = requests.get(url,headers=headers) jsons = json.loads(res.text) lists = jsons['data']['items'][0]['item']['pictures'] #\u89e3\u6790json url_list=[] for list in lists: url_list.append(list['img_src']) for urld in url_list: ress = requests.get(urld,headers=headers) fp = open(f'meizitu\\\\{urld[-20:]}','wb') fp.write(ress.content) print(\"OK\") fp.close() #main for url in urls: try: get_photo(url) except IndexError: pass","title":"\u4f7f\u7528API"},{"location":"spider/base/#post","text":"\u4f7f\u7528 requests.post(url,data=params,headers=headers) params\u4e3a\u4f20\u5165\u7684\u53c2\u6570 \u6216\u8005\u83b7\u53d6cookie \u7136\u540e\u5728headers\u91cc\u9762\u4f20\u5165 \u4f9d\u65e7\u7528\u6211\u722c\u8fc7\u7684\u4f8b\u5b50 import requests import json import time params={ 'account':\"youraccount\", 'password':\"yourpassword\", \"phoneVersion\":19, \"platform\":1, \"deviceCode\":355757010701395, \"versionNumber\":\"9.4.0\", \"channel\":\"ppMarket\", \"phoneBrand\":\"samsung\", \"phoneModel\":\"SM-G955F\" } res=requests.post(\"http://120.55.151.61/V2/StudentSkip/loginCheckV4.action\",params) \u5176\u5b9e\u8ddfget\u5dee\u4e0d\u591a","title":"POST\u8bf7\u6c42"},{"location":"spider/base/#selenium","text":"selenium\u662f\u81ea\u52a8\u5316\u5de5\u5177\uff0c\u53ef\u4ee5\u914d\u5408\u5404\u6d4f\u89c8\u5668\u4f7f\u7528\u3002 \u7528\u6765\u6a21\u62df\u4eba\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982\u8bf4\u8f93\u5165\u8d26\u53f7\u5bc6\u7801\uff0c\u70b9\u51fb\u6309\u94ae\uff0c\u8fd8\u53ef\u4ee5\u83b7\u53d6\u6570\u636e\u3002 \u4e14\u4e5f\u652f\u6301xpath\u8bed\u6cd5\u662f\u722c\u53d6\u5f02\u6b65\u52a0\u8f7d\u7f51\u9875\u6216\u9700\u8981\u7528\u5230\u767b\u5f55\u65f6\u7684\u5229\u5668\uff0c\u867d\u7136\u53ef\u4ee5\u6293\u5305\uff0c\u4f46\u4e0d\u5982\u8fd9\u6837\u6765\u7684\u76f4\u63a5\u3002 \u8bb0\u5f55\u4e00\u4e0b\u9047\u5230\u7684\u5751\uff1a \u5728\u83b7\u53d6\u67d0\u4e2a\u5143\u7d20\u65f6\uff0c\u4f8b\u5982\u7528class\u83b7\u53d6\u7684\u8bdd\uff0c\u8981\u7528 browser.find_element_by_class_name \u6ce8\u610f\u6ce8\u610f\u6ce8\u610f element\u4e0d\u8981\u52a0s \u4e0d\u7136\u5c31\u8fd4\u56de\u4e00\u4e2a\u5217\u8868\u4e86 2020 11.19\u8e29\u5751\u4e86\uff0c\u7279\u6765\u8bb0\u5f55\uff01","title":"selenium"},{"location":"spider/base/#scrapy","text":"Scrapy\u662f\u4e00\u4e2a\u722c\u866b\u6846\u67b6","title":"Scrapy"},{"location":"spider/thread_spider/","text":"\u591a\u7ebf\u7a0b\u722c\u866b \u591a\u7ebf\u7a0b\u722c\u866b\u793a\u4f8b\u3002 \u524d\u51e0\u5929\u722c\u8d77\u70b9\u7684\u4e66\uff0c\u4fdd\u5b58\u5230\u6570\u636e\u5e93\u91cc\uff0c\u867d\u7136\u4ee3\u7801\u5f88\u7b80\u5355\u3002 \u4f46\u4ece\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u5b66\u5230\u4e86\u600e\u4e48\u6837\u5c06\u591a\u7ebf\u7a0b\u548c\u722c\u866b\u914d\u5408\u4ee5\u63d0\u9ad8\u6548\u7387\u3002 import queue import requests from lxml import etree import pymysql import logging from threading import Thread,Lock from queue import Queue import time # logging.basicConfig(level=logging.DEBUG, # format='%(asctime)s - %(filename)s[line:%(lineno)d] - %(levelname)s: %(message)s') # logger = logging.getLogger('qidian') # class Qidian_Spider: # def __init__(self): # self.conn,self.cur = self.connet_mysql() # self.urls = self.create_urls() # self.headers = {'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36'} # def connet_mysql(self): # conn = pymysql.connect(host='localhost',user='root',passwd='xwh5201314',db='spider',port=3306,charset='utf8') # cur = conn.cursor() # return conn,cur # def create_urls(self): # urls = ['https://www.qidian.com/rank/collect?page={}'.format(i) for i in range(1,6)] # return urls # def insert_data1(self,url): # self.conn,self.cur = self.connet_mysql() # res = requests.get(url,headers=self.headers) # sel = etree.HTML(res.text) # infos = sel.xpath('//*[@id=\"rank-view-list\"]/div/ul/li') # titles = [] # authors = [] # classess = [] # for info in infos: # title = info.xpath('div[2]/h4/a/text()')[0] # author = info.xpath('div[2]/p[1]/a[1]/text()')[0] # classes = info.xpath('div[2]/p[1]/a[2]/text()')[0] # self.cur.execute(\"insert into qidian (title,author,classes) values('{}','{}','{}');\".format(str(title),str(author),str(classes))) # # logger.info(\"---ok\") # self.conn.commit() # def insert_data(self,url): # self.conn,self.cur = self.connet_mysql() # # logger.info(\"start\") # res = requests.get(url,headers=self.headers) # sel = etree.HTML(res.text) # infos = sel.xpath('//*[@id=\"rank-view-list\"]/div/ul/li') # titles = [] # authors = [] # classess = [] # for info in infos: # title = info.xpath('div[2]/h4/a/text()')[0] # author = info.xpath('div[2]/p[1]/a[1]/text()')[0] # classes = info.xpath('div[2]/p[1]/a[2]/text()')[0] # self.cur.execute(\"insert into qidian (title,author,classes) values('{}','{}','{}');\".format(str(title),str(author),str(classes))) # # logger.info(\"---ok\") # self.conn.commit() # def run(self): # print(\"\u6b63\u5e38\u7a0b\u5e8f\u5f00\u59cb\") # for url in self.urls: # # logger.info(\"Start---\") # self.insert_data1(url) # # logger.info(\"one OK\") # self.cur.close() # mains = Qidian_Spider() # start = time.time() # mains.run() # print(f\"\u6b63\u5e38\u8017\u65f6{time.time()-start:.4f}s\") conn = pymysql.connect(host='localhost',user='root',passwd='xwh5201314',db='spider',port=3306,charset='utf8') cur = conn.cursor() headers = {'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36'} lock = Lock() print('\u591a\u7ebf\u7a0b\u5f00\u59cb') def duo_spider(queues): while queues.empty() is not True: res = requests.get(queues.get(),headers=headers) sel = etree.HTML(res.text) infos = sel.xpath('//*[@id=\"rank-view-list\"]/div/ul/li') for info in infos: title = info.xpath('div[2]/h4/a/text()')[0] author = info.xpath('div[2]/p[1]/a[1]/text()')[0] classes = info.xpath('div[2]/p[1]/a[2]/text()')[0] lock.acquire() cur.execute(\"insert into qidian (title,author,classes) values('{}','{}','{}');\".format(str(title),str(author),str(classes))) conn.commit() lock.release() queues.task_done() urls = ['https://www.qidian.com/rank/collect?page={}'.format(i) for i in range(1,6)] start = time.time() in_q = Queue() for u in urls: in_q.put(u) for _ in range(10): thread = Thread(target=duo_spider,args=(in_q,)) thread.daemon = True thread.start() in_q.join() print(f\"\u591a\u7ebf\u7a0b\u8017\u65f6{time.time()-start:.4f}s\") \u6ce8\u610f\u7684\u662f\uff0c\u8981\u5728\u7ed3\u675f\u540e\u8fd0\u884c queues.task_done() \u4e0d\u7136\u4f1a\u5f15\u53d1\u6570\u636e\u5e93\u9519\u8bef \u8fd8\u6709\u8981\u52a0\u4e0a\u4e00\u4e2a\u4e92\u65a5\u9501\uff0c\u56e0\u4e3a\u591a\u4e2a\u7ebf\u7a0b\u5171\u540c\u4fee\u6539\u540c\u4e00\u4e2a\u6570\u636e\u5e93\uff0c\u4e0d\u52a0\u9501\u4f1a\u5f15\u53d1\u9519\u8bef\u3002\u8fd9\u4e00\u70b9\u4e5f\u8981\u6ce8\u610f \u901a\u8fc7\u5bf9\u6bd4\u6b63\u5e38\u7a0b\u5e8f\u548c\u591a\u7ebf\u7a0b\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u53d1\u73b0\u6548\u7387\u786e\u5b9e\u5feb\u4e86\u4e0d\u5c11\uff0c\u7528queue\u961f\u5217\u7684\u539f\u56e0\u662f\u5b89\u5168\u7cfb\u6570\u9ad8\u3002","title":"\u591a\u7ebf\u7a0b\u722c\u866b"},{"location":"spider/thread_spider/#_1","text":"\u591a\u7ebf\u7a0b\u722c\u866b\u793a\u4f8b\u3002 \u524d\u51e0\u5929\u722c\u8d77\u70b9\u7684\u4e66\uff0c\u4fdd\u5b58\u5230\u6570\u636e\u5e93\u91cc\uff0c\u867d\u7136\u4ee3\u7801\u5f88\u7b80\u5355\u3002 \u4f46\u4ece\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u5b66\u5230\u4e86\u600e\u4e48\u6837\u5c06\u591a\u7ebf\u7a0b\u548c\u722c\u866b\u914d\u5408\u4ee5\u63d0\u9ad8\u6548\u7387\u3002 import queue import requests from lxml import etree import pymysql import logging from threading import Thread,Lock from queue import Queue import time # logging.basicConfig(level=logging.DEBUG, # format='%(asctime)s - %(filename)s[line:%(lineno)d] - %(levelname)s: %(message)s') # logger = logging.getLogger('qidian') # class Qidian_Spider: # def __init__(self): # self.conn,self.cur = self.connet_mysql() # self.urls = self.create_urls() # self.headers = {'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36'} # def connet_mysql(self): # conn = pymysql.connect(host='localhost',user='root',passwd='xwh5201314',db='spider',port=3306,charset='utf8') # cur = conn.cursor() # return conn,cur # def create_urls(self): # urls = ['https://www.qidian.com/rank/collect?page={}'.format(i) for i in range(1,6)] # return urls # def insert_data1(self,url): # self.conn,self.cur = self.connet_mysql() # res = requests.get(url,headers=self.headers) # sel = etree.HTML(res.text) # infos = sel.xpath('//*[@id=\"rank-view-list\"]/div/ul/li') # titles = [] # authors = [] # classess = [] # for info in infos: # title = info.xpath('div[2]/h4/a/text()')[0] # author = info.xpath('div[2]/p[1]/a[1]/text()')[0] # classes = info.xpath('div[2]/p[1]/a[2]/text()')[0] # self.cur.execute(\"insert into qidian (title,author,classes) values('{}','{}','{}');\".format(str(title),str(author),str(classes))) # # logger.info(\"---ok\") # self.conn.commit() # def insert_data(self,url): # self.conn,self.cur = self.connet_mysql() # # logger.info(\"start\") # res = requests.get(url,headers=self.headers) # sel = etree.HTML(res.text) # infos = sel.xpath('//*[@id=\"rank-view-list\"]/div/ul/li') # titles = [] # authors = [] # classess = [] # for info in infos: # title = info.xpath('div[2]/h4/a/text()')[0] # author = info.xpath('div[2]/p[1]/a[1]/text()')[0] # classes = info.xpath('div[2]/p[1]/a[2]/text()')[0] # self.cur.execute(\"insert into qidian (title,author,classes) values('{}','{}','{}');\".format(str(title),str(author),str(classes))) # # logger.info(\"---ok\") # self.conn.commit() # def run(self): # print(\"\u6b63\u5e38\u7a0b\u5e8f\u5f00\u59cb\") # for url in self.urls: # # logger.info(\"Start---\") # self.insert_data1(url) # # logger.info(\"one OK\") # self.cur.close() # mains = Qidian_Spider() # start = time.time() # mains.run() # print(f\"\u6b63\u5e38\u8017\u65f6{time.time()-start:.4f}s\") conn = pymysql.connect(host='localhost',user='root',passwd='xwh5201314',db='spider',port=3306,charset='utf8') cur = conn.cursor() headers = {'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36'} lock = Lock() print('\u591a\u7ebf\u7a0b\u5f00\u59cb') def duo_spider(queues): while queues.empty() is not True: res = requests.get(queues.get(),headers=headers) sel = etree.HTML(res.text) infos = sel.xpath('//*[@id=\"rank-view-list\"]/div/ul/li') for info in infos: title = info.xpath('div[2]/h4/a/text()')[0] author = info.xpath('div[2]/p[1]/a[1]/text()')[0] classes = info.xpath('div[2]/p[1]/a[2]/text()')[0] lock.acquire() cur.execute(\"insert into qidian (title,author,classes) values('{}','{}','{}');\".format(str(title),str(author),str(classes))) conn.commit() lock.release() queues.task_done() urls = ['https://www.qidian.com/rank/collect?page={}'.format(i) for i in range(1,6)] start = time.time() in_q = Queue() for u in urls: in_q.put(u) for _ in range(10): thread = Thread(target=duo_spider,args=(in_q,)) thread.daemon = True thread.start() in_q.join() print(f\"\u591a\u7ebf\u7a0b\u8017\u65f6{time.time()-start:.4f}s\") \u6ce8\u610f\u7684\u662f\uff0c\u8981\u5728\u7ed3\u675f\u540e\u8fd0\u884c queues.task_done() \u4e0d\u7136\u4f1a\u5f15\u53d1\u6570\u636e\u5e93\u9519\u8bef \u8fd8\u6709\u8981\u52a0\u4e0a\u4e00\u4e2a\u4e92\u65a5\u9501\uff0c\u56e0\u4e3a\u591a\u4e2a\u7ebf\u7a0b\u5171\u540c\u4fee\u6539\u540c\u4e00\u4e2a\u6570\u636e\u5e93\uff0c\u4e0d\u52a0\u9501\u4f1a\u5f15\u53d1\u9519\u8bef\u3002\u8fd9\u4e00\u70b9\u4e5f\u8981\u6ce8\u610f \u901a\u8fc7\u5bf9\u6bd4\u6b63\u5e38\u7a0b\u5e8f\u548c\u591a\u7ebf\u7a0b\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u53d1\u73b0\u6548\u7387\u786e\u5b9e\u5feb\u4e86\u4e0d\u5c11\uff0c\u7528queue\u961f\u5217\u7684\u539f\u56e0\u662f\u5b89\u5168\u7cfb\u6570\u9ad8\u3002","title":"\u591a\u7ebf\u7a0b\u722c\u866b"}]}