
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="vllbc的个人网站">
      
      
      
        <meta name="author" content="vllbc">
      
      
        <link rel="canonical" href="https://vllbc.top/python/skill/">
      
      <link rel="icon" href="../../assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.6">
    
    
      
        <title>技巧 - Vllbc的个人博客</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#两个数的交换" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Vllbc的个人博客" class="md-header__button md-logo" aria-label="Vllbc的个人博客" data-md-component="logo">
      
  <img src="../../assets/images/favicon.ico" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Vllbc的个人博客
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              技巧
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="暗色模式"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="暗色模式" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="亮色模式"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="亮色模式" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Vllbc的个人博客" class="md-nav__button md-logo" aria-label="Vllbc的个人博客" data-md-component="logo">
      
  <img src="../../assets/images/favicon.ico" alt="logo">

    </a>
    Vllbc的个人博客
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        首页
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          算法相关
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="算法相关" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          算法相关
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/" class="md-nav__link">
        介绍
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/1/" class="md-nav__link">
        isbn号码
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/2/" class="md-nav__link">
        我做的第一个打表题
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/3/" class="md-nav__link">
        位运算的应用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/4/" class="md-nav__link">
        位运算的应用(2)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/python_lq/" class="md-nav__link">
        python刷题
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/5/" class="md-nav__link">
        最小公众前缀
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/6/" class="md-nav__link">
        移除元素
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/7/" class="md-nav__link">
        有效的数独
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/8/" class="md-nav__link">
        旋转图像
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/9/" class="md-nav__link">
        去掉重复字母
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/10/" class="md-nav__link">
        字符串转整数
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/11/" class="md-nav__link">
        使用最小花费爬楼梯
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/12/" class="md-nav__link">
        最大子序和
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/13/" class="md-nav__link">
        打家劫舍
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/14/" class="md-nav__link">
        外观数列
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/15/" class="md-nav__link">
        计数质数
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/16/" class="md-nav__link">
        分发饼干
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/17/" class="md-nav__link">
        按序打印
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/18/" class="md-nav__link">
        交换性别
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/19/" class="md-nav__link">
        打印零和奇偶数
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/20/" class="md-nav__link">
        零钱兑换
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/21/" class="md-nav__link">
        翻转二叉树
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/22/" class="md-nav__link">
        验证二叉搜索树
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/23/" class="md-nav__link">
        交替打印字符串
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/24/" class="md-nav__link">
        无重叠区域
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/25/" class="md-nav__link">
        种花问题（2021第一题）
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/26/" class="md-nav__link">
        合并区间
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/27/" class="md-nav__link">
        三数之和
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/28/" class="md-nav__link">
        对角线遍历
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/29/" class="md-nav__link">
        最长回文子串
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/30/" class="md-nav__link">
        长度最小的子数组
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/31/" class="md-nav__link">
        删除排序数组中的重复项
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/32/" class="md-nav__link">
        合并两个有序链表
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/33/" class="md-nav__link">
        使括号有效的最小添加
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/34/" class="md-nav__link">
        平衡括号字符串的最少插入次数
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/35/" class="md-nav__link">
        阶乘函数后K个零
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/36/" class="md-nav__link">
        搜索旋转排序数组
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/37/" class="md-nav__link">
        两两交换链表中的节点
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/38/" class="md-nav__link">
        把数字翻译成字符串
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/39/" class="md-nav__link">
        检查平衡性
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/40/" class="md-nav__link">
        可获得的最大点数
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/41/" class="md-nav__link">
        字符串的排列
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/42/" class="md-nav__link">
        至少有k个重复字符的最长字串
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/43/" class="md-nav__link">
        丑数系列
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/44/" class="md-nav__link">
        最大数
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/45/" class="md-nav__link">
        采购方案
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/46/" class="md-nav__link">
        和为s的连续正数序列
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/47/" class="md-nav__link">
        滑动窗口的中位数
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/48/" class="md-nav__link">
        对称二叉树
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/49/" class="md-nav__link">
        最长递增子序列
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sf/50/" class="md-nav__link">
        分割等和子集
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Python
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Python" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Python
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        介绍
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../plotly/" class="md-nav__link">
        Plotly
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../thread/" class="md-nav__link">
        多线程
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../asyncio/" class="md-nav__link">
        asyncio模块异步编程
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          技巧
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        技巧
      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#两个数的交换" class="md-nav__link">
    两个数的交换
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#格式化字符串" class="md-nav__link">
    格式化字符串
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#yield与yield-from" class="md-nav__link">
    yield与yield from
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#列表解析式" class="md-nav__link">
    列表解析式
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enumerate" class="md-nav__link">
    enumerate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#字典的合并" class="md-nav__link">
    字典的合并
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#序列解包" class="md-nav__link">
    序列解包
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#匿名函数lambda" class="md-nav__link">
    匿名函数lambda
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#装饰器" class="md-nav__link">
    装饰器
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mapreducefilter" class="md-nav__link">
    map、reduce、filter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#join" class="md-nav__link">
    join()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#将多维数组转换为一维" class="md-nav__link">
    将多维数组转换为一维
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#将一个列表倒序" class="md-nav__link">
    将一个列表倒序
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#随机生成密码" class="md-nav__link">
    随机生成密码
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#断言" class="md-nav__link">
    断言
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#合并列表" class="md-nav__link">
    合并列表
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#对list进行解包" class="md-nav__link">
    对list进行解包
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#对类的一些操作" class="md-nav__link">
    对类的一些操作
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#一些内置函数" class="md-nav__link">
    一些内置函数
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functoolspartial" class="md-nav__link">
    functools.partial
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classmethod和staticmethod" class="md-nav__link">
    @classmethod和@staticmethod
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#用类实现装饰器" class="md-nav__link">
    用类实现装饰器
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basemodel" class="md-nav__link">
    BaseModel
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python类型注释" class="md-nav__link">
    python类型注释
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#namedtuple" class="md-nav__link">
    namedtuple
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#property" class="md-nav__link">
    @property
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#在边界处思考" class="md-nav__link">
    在边界处思考
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#super进阶" class="md-nav__link">
    super()进阶
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dataclass" class="md-nav__link">
    dataclass
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#自定义format" class="md-nav__link">
    自定义format
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#抽象类实践" class="md-nav__link">
    抽象类实践
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate" class="md-nav__link">
    accumulate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#异步装饰器" class="md-nav__link">
    异步装饰器
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bisect" class="md-nav__link">
    bisect
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contextlib" class="md-nav__link">
    contextlib
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#读取大文件" class="md-nav__link">
    读取大文件
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_exit__enter_" class="md-nav__link">
    _exit_、_enter_
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enum" class="md-nav__link">
    enum
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pydantic数据验证" class="md-nav__link">
    pydantic数据验证
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#islice" class="md-nav__link">
    islice
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_iter__next_" class="md-nav__link">
    _iter_、_next_
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#求字典的最大值" class="md-nav__link">
    求字典的最大值
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#注意循环变量" class="md-nav__link">
    注意循环变量
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#空对象模式" class="md-nav__link">
    空对象模式
  </a>
  
    <nav class="md-nav" aria-label="空对象模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#空对象模式简介" class="md-nav__link">
    空对象模式简介
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#好处" class="md-nav__link">
    好处
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pathlib" class="md-nav__link">
    pathlib
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#单元测试" class="md-nav__link">
    单元测试
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#takewhile和dropwhile" class="md-nav__link">
    takewhile和dropwhile
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#装饰器可以装饰方法" class="md-nav__link">
    装饰器可以装饰方法
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#__getattribute_" class="md-nav__link">
    __getattribute_
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#__getattr__setattr_" class="md-nav__link">
    __getattr_、_setattr_
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_getitem_" class="md-nav__link">
    _getitem_
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#元类" class="md-nav__link">
    元类
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#关于hash" class="md-nav__link">
    关于hash
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#处理列表越界" class="md-nav__link">
    处理列表越界
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#or操作符" class="md-nav__link">
    or操作符
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#字典的键" class="md-nav__link">
    字典的键
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../WTF/" class="md-nav__link">
        WTFpython学习
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pyqt/" class="md-nav__link">
        PyQt学习
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../logging/" class="md-nav__link">
        Logging模块学习
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pyplot/" class="md-nav__link">
        Matplotlib.pyplot学习
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Numpy & Pandas
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Numpy & Pandas" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Numpy & Pandas
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pandas/learn_one/" class="md-nav__link">
        笔记1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pandas/learn_two/" class="md-nav__link">
        笔记2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pandas/learn_four/" class="md-nav__link">
        补充学习
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pandas/learn_three/" class="md-nav__link">
        实训笔记
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pandas/task1/" class="md-nav__link">
        协会任务(大一)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pandas/task2/" class="md-nav__link">
        pandas小练习
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pandas/shixun/main/" class="md-nav__link">
        实训作业
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pandas/task3/main/" class="md-nav__link">
        mathorcup杯比赛
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_9" type="checkbox" id="__nav_4_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_9">
          api学习
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="api学习" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_9">
          <span class="md-nav__icon md-icon"></span>
          api学习
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pandas/melt/" class="md-nav__link">
        melt
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Pytorch
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Pytorch" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Pytorch
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1" type="checkbox" id="__nav_5_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_1">
          实践
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="实践" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          实践
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pytorch/%E5%AE%9E%E8%B7%B5/regression/" class="md-nav__link">
        pytorch线性回归
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pytorch/start/" class="md-nav__link">
        pytorch基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pytorch/detach/" class="md-nav__link">
        detach
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pytorch/%E8%AE%A1%E7%AE%97%E5%9B%BE/" class="md-nav__link">
        计算图
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pytorch/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84%E5%8F%AF%E8%A7%86%E5%8C%96/" class="md-nav__link">
        神经网络结构可视化
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Sklearn
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Sklearn" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Sklearn
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1" type="checkbox" id="__nav_6_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_1">
          实践
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="实践" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          实践
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sklearn/%E7%AE%80%E5%8D%95%E7%9A%84%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/" class="md-nav__link">
        简单的线性回归
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sklearn/%E5%A4%8D%E6%9D%82%E7%9A%84%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/" class="md-nav__link">
        复杂的线性回归
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sklearn/Logistic%20Regression/" class="md-nav__link">
        Logistic Regression
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sklearn/KNN/" class="md-nav__link">
        KNN
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sklearn/SVM/" class="md-nav__link">
        SVM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sklearn/Decision%20Tree/" class="md-nav__link">
        Decision Tree
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_2" type="checkbox" id="__nav_6_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_2">
          preprocessing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="preprocessing" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_2">
          <span class="md-nav__icon md-icon"></span>
          preprocessing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sklearn/%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86/" class="md-nav__link">
        数据预处理
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_3" type="checkbox" id="__nav_6_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_3">
          model_selection
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="model_selection" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_3">
          <span class="md-nav__icon md-icon"></span>
          model_selection
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sklearn/%E5%AD%A6%E4%B9%A0%E6%9B%B2%E7%BA%BF/%E5%AD%A6%E4%B9%A0%E6%9B%B2%E7%BA%BF/" class="md-nav__link">
        learning_curve
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sklearn/%E9%AA%8C%E8%AF%81%E6%9B%B2%E7%BA%BF/%E9%AA%8C%E8%AF%81%E6%9B%B2%E7%BA%BF/" class="md-nav__link">
        validation_curve
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sklearn/%E4%BA%A4%E5%8F%89%E9%AA%8C%E8%AF%81/" class="md-nav__link">
        交叉验证
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_4" type="checkbox" id="__nav_6_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_4">
          feature_selection
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="feature_selection" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_4">
          <span class="md-nav__icon md-icon"></span>
          feature_selection
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sklearn/feature_selection/SelectFromModel/" class="md-nav__link">
        SelectFromModel
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_4_2" type="checkbox" id="__nav_6_4_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_4_2">
          包裹式
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="包裹式" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_4_2">
          <span class="md-nav__icon md-icon"></span>
          包裹式
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sklearn/feature_selection/RFE/" class="md-nav__link">
        RFE
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_5" type="checkbox" id="__nav_6_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_5">
          feature_extraction
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="feature_extraction" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_5">
          <span class="md-nav__icon md-icon"></span>
          feature_extraction
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sklearn/feature_extraction/CountVectorizer/" class="md-nav__link">
        CountVectorizer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sklearn/feature_extraction/TfidfTransformer/" class="md-nav__link">
        TfidfTransformer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Machine Learning
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Machine Learning" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Machine Learning
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1" type="checkbox" id="__nav_7_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_1">
          性能指标
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="性能指标" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_1">
          <span class="md-nav__icon md-icon"></span>
          性能指标
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87/ROC%E6%9B%B2%E7%BA%BF/ROC/" class="md-nav__link">
        ROC曲线
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87/%E7%B2%BE%E7%A1%AE%E7%8E%87%E5%92%8C%E5%8F%AC%E5%9B%9E%E7%8E%87/" class="md-nav__link">
        精确率和召回率
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2" type="checkbox" id="__nav_7_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2">
          关联规则
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="关联规则" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_2">
          <span class="md-nav__icon md-icon"></span>
          关联规则
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E5%85%B3%E8%81%94%E8%A7%84%E5%88%99%E7%AE%97%E6%B3%95/%E6%A6%82%E5%BF%B5/" class="md-nav__link">
        概念
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E5%85%B3%E8%81%94%E8%A7%84%E5%88%99%E7%AE%97%E6%B3%95/Apriori%E7%AE%97%E6%B3%95/" class="md-nav__link">
        Apriori算法
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_3" type="checkbox" id="__nav_7_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_3">
          降维算法
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="降维算法" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_3">
          <span class="md-nav__icon md-icon"></span>
          降维算法
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E9%99%8D%E7%BB%B4%E7%AE%97%E6%B3%95/PCA/" class="md-nav__link">
        PCA
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E9%99%8D%E7%BB%B4%E7%AE%97%E6%B3%95/LDA/" class="md-nav__link">
        LDA
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E9%99%8D%E7%BB%B4%E7%AE%97%E6%B3%95/SVD/" class="md-nav__link">
        SVD
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_4" type="checkbox" id="__nav_7_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_4">
          回归算法
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="回归算法" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_4">
          <span class="md-nav__icon md-icon"></span>
          回归算法
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E5%9B%9E%E5%BD%92%E7%AE%97%E6%B3%95/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/" class="md-nav__link">
        线性回归
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E5%9B%9E%E5%BD%92%E7%AE%97%E6%B3%95/%E6%A0%91%E5%9B%9E%E5%BD%92/" class="md-nav__link">
        树回归
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_5" type="checkbox" id="__nav_7_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_5">
          分类算法
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="分类算法" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_5">
          <span class="md-nav__icon md-icon"></span>
          分类算法
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E5%88%86%E7%B1%BB%E7%AE%97%E6%B3%95/%E6%A6%82%E8%BF%B0/" class="md-nav__link">
        概述
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E5%88%86%E7%B1%BB%E7%AE%97%E6%B3%95/bayes/" class="md-nav__link">
        贝叶斯算法
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E5%88%86%E7%B1%BB%E7%AE%97%E6%B3%95/Logistic%E5%9B%9E%E5%BD%92/" class="md-nav__link">
        Logistic回归
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E5%88%86%E7%B1%BB%E7%AE%97%E6%B3%95/%E7%BA%BF%E6%80%A7%E5%88%86%E7%B1%BB%E6%A6%82%E8%BF%B0/" class="md-nav__link">
        线性分类
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E5%88%86%E7%B1%BB%E7%AE%97%E6%B3%95/KNN/" class="md-nav__link">
        KNN
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E5%88%86%E7%B1%BB%E7%AE%97%E6%B3%95/%E5%86%B3%E7%AD%96%E6%A0%91/" class="md-nav__link">
        决策树
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E5%88%86%E7%B1%BB%E7%AE%97%E6%B3%95/SVM/" class="md-nav__link">
        SVM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E5%88%86%E7%B1%BB%E7%AE%97%E6%B3%95/%E7%BA%BF%E6%80%A7%E5%88%A4%E5%88%AB%E5%88%86%E6%9E%90/" class="md-nav__link">
        线性判别分析
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E5%88%86%E7%B1%BB%E7%AE%97%E6%B3%95/%E6%84%9F%E7%9F%A5%E6%9C%BA%E7%AE%97%E6%B3%95/" class="md-nav__link">
        感知机
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_6" type="checkbox" id="__nav_7_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_6">
          聚类算法
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="聚类算法" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_6">
          <span class="md-nav__icon md-icon"></span>
          聚类算法
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E8%81%9A%E7%B1%BB%E7%AE%97%E6%B3%95/kmeans/kmeans/" class="md-nav__link">
        K-means
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E8%81%9A%E7%B1%BB%E7%AE%97%E6%B3%95/%E5%B1%82%E6%AC%A1%E8%81%9A%E7%B1%BB/" class="md-nav__link">
        层次聚类
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E8%81%9A%E7%B1%BB%E7%AE%97%E6%B3%95/%E8%B0%B1%E8%81%9A%E7%B1%BB/" class="md-nav__link">
        谱聚类
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E8%81%9A%E7%B1%BB%E7%AE%97%E6%B3%95/DBSCAN/" class="md-nav__link">
        DBSCAN
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_7" type="checkbox" id="__nav_7_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_7">
          集成学习
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="集成学习" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_7">
          <span class="md-nav__icon md-icon"></span>
          集成学习
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E9%9B%86%E6%88%90%E5%AD%A6%E4%B9%A0/Ensemble%20Learning/" class="md-nav__link">
        概述
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E9%9B%86%E6%88%90%E5%AD%A6%E4%B9%A0/Boosting/GBDT/" class="md-nav__link">
        GBDT
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E9%9B%86%E6%88%90%E5%AD%A6%E4%B9%A0/Stacking/" class="md-nav__link">
        Stacking
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/%E6%A6%82%E5%BF%B5/" class="md-nav__link">
        一些概念
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Machine%20Learning/EM%E7%AE%97%E6%B3%95/" class="md-nav__link">
        EM算法
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Deep Learning
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Deep Learning" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Deep Learning
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_1" type="checkbox" id="__nav_8_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8_1">
          项目练习
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="项目练习" data-md-level="2">
        <label class="md-nav__title" for="__nav_8_1">
          <span class="md-nav__icon md-icon"></span>
          项目练习
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Deep%20Learning/%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0/%E5%85%B7%E6%9C%89%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92%E6%80%9D%E7%BB%B4%E7%9A%84%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/nnLogistic/" class="md-nav__link">
        具有逻辑回归思维的神经网络
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_2" type="checkbox" id="__nav_8_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8_2">
          优化算法
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="优化算法" data-md-level="2">
        <label class="md-nav__title" for="__nav_8_2">
          <span class="md-nav__icon md-icon"></span>
          优化算法
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Deep%20Learning/%E4%BC%98%E5%8C%96%E7%AE%97%E6%B3%95/%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D%E6%B3%95/" class="md-nav__link">
        梯度下降算法
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Deep%20Learning/%E4%BC%98%E5%8C%96%E7%AE%97%E6%B3%95/Adam%E7%AE%97%E6%B3%95/" class="md-nav__link">
        Adam算法
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Deep%20Learning/%E5%8F%8D%E5%90%91%E4%BC%A0%E6%92%AD%E7%AE%97%E6%B3%95/Backpropagation/" class="md-nav__link">
        反向传播算法推导
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Deep%20Learning/Dropout%E6%AD%A3%E5%88%99%E5%8C%96/" class="md-nav__link">
        Dropout
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Deep%20Learning/RNN/" class="md-nav__link">
        RNN
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Deep%20Learning/softmax%E7%90%86%E8%A7%A3/" class="md-nav__link">
        softmax理解
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          NLP
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="NLP" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          NLP
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/%E6%A6%82%E8%BF%B0/" class="md-nav__link">
        概述
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2" type="checkbox" id="__nav_9_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2">
          任务
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="任务" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_2">
          <span class="md-nav__icon md-icon"></span>
          任务
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/%E4%BB%BB%E5%8A%A1/%E5%BA%8F%E5%88%97%E6%A0%87%E6%B3%A8/" class="md-nav__link">
        序列标注
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/%E4%BB%BB%E5%8A%A1/%E6%96%87%E6%9C%AC%E7%9B%B8%E4%BC%BC%E5%BA%A6/" class="md-nav__link">
        文本相似度
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/%E4%BB%BB%E5%8A%A1/%E8%AF%8D%E5%B9%B2%E6%8F%90%E5%8F%96/" class="md-nav__link">
        词干提取
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/%E4%BB%BB%E5%8A%A1/%E5%85%B3%E9%94%AE%E8%AF%8D%E6%8F%90%E5%8F%96/" class="md-nav__link">
        文本关键词提取
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_3" type="checkbox" id="__nav_9_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_3">
          实战
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="实战" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_3">
          <span class="md-nav__icon md-icon"></span>
          实战
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_3_1" type="checkbox" id="__nav_9_3_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_3_1">
          transformers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="transformers" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_3_1">
          <span class="md-nav__icon md-icon"></span>
          transformers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/transformers/%E6%83%85%E6%84%9F%E5%88%86%E6%9E%90/" class="md-nav__link">
        情感分析
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_4" type="checkbox" id="__nav_9_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_4">
          概率图模型
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="概率图模型" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_4">
          <span class="md-nav__icon md-icon"></span>
          概率图模型
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/%E6%A6%82%E7%8E%87%E5%9B%BE%E6%A8%A1%E5%9E%8B/%E6%A6%82%E8%BF%B0/" class="md-nav__link">
        概述
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_4_2" type="checkbox" id="__nav_9_4_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_4_2">
          贝叶斯网络
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="贝叶斯网络" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_4_2">
          <span class="md-nav__icon md-icon"></span>
          贝叶斯网络
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/%E6%A6%82%E7%8E%87%E5%9B%BE%E6%A8%A1%E5%9E%8B/%E8%B4%9D%E5%8F%B6%E6%96%AF%E7%BD%91%E7%BB%9C/HMM/" class="md-nav__link">
        HMM
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_4_3" type="checkbox" id="__nav_9_4_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_4_3">
          马尔科夫网络
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="马尔科夫网络" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_4_3">
          <span class="md-nav__icon md-icon"></span>
          马尔科夫网络
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/%E6%A6%82%E7%8E%87%E5%9B%BE%E6%A8%A1%E5%9E%8B/%E9%A9%AC%E5%B0%94%E7%A7%91%E5%A4%AB%E7%BD%91%E7%BB%9C/%E6%9D%A1%E4%BB%B6%E9%9A%8F%E6%9C%BA%E5%9C%BA/" class="md-nav__link">
        CRF
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_5" type="checkbox" id="__nav_9_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_5">
          词法分析
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="词法分析" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_5">
          <span class="md-nav__icon md-icon"></span>
          词法分析
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/tokenization/" class="md-nav__link">
        tokenization综述
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_6" type="checkbox" id="__nav_9_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_6">
          句法分析
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="句法分析" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_6">
          <span class="md-nav__icon md-icon"></span>
          句法分析
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/Dependency%20Parsing/" class="md-nav__link">
        依存句法分析
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/Constituency%20Parsing/" class="md-nav__link">
        成分句法分析
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/%E5%9B%9B%E4%B8%AA%E5%9F%BA%E6%9C%AC%E4%BB%BB%E5%8A%A1/" class="md-nav__link">
        四个基本任务
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/TF-IDF/" class="md-nav__link">
        TF-IDF
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/%E5%85%B1%E7%8E%B0%E7%9F%A9%E9%98%B5/" class="md-nav__link">
        共现矩阵
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/PPMI/" class="md-nav__link">
        PPMI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/%E4%B8%BB%E9%A2%98%E6%A8%A1%E5%9E%8B/" class="md-nav__link">
        主题模型
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/BM25/" class="md-nav__link">
        BM25
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/TextRank/" class="md-nav__link">
        TextRank
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/" class="md-nav__link">
        语言模型
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/Word%20Embedding/" class="md-nav__link">
        Word Embedding
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/NER/" class="md-nav__link">
        NER
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B/" class="md-nav__link">
        预训练模型
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/CoVe/" class="md-nav__link">
        Cove
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/ELMo/" class="md-nav__link">
        ELMo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/seq2seq/" class="md-nav__link">
        seq2seq
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/Attention/" class="md-nav__link">
        Attention
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/Transformer/" class="md-nav__link">
        Transformer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/GPT/" class="md-nav__link">
        GPT
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NLP/BERT/" class="md-nav__link">
        Bert
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          信息检索
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="信息检索" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          信息检索
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E4%BF%A1%E6%81%AF%E6%A3%80%E7%B4%A2/%E6%A6%82%E8%BF%B0/" class="md-nav__link">
        概述
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          大数据
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="大数据" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          大数据
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%A4%A7%E6%95%B0%E6%8D%AE/%E6%A6%82%E8%BF%B0/" class="md-nav__link">
        概述
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12">
          面经
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="面经" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          面经
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%9D%A2%E7%BB%8F/LR%E4%B8%BA%E4%BB%80%E4%B9%88%E7%94%A8%E4%BA%A4%E5%8F%89%E7%86%B5/" class="md-nav__link">
        LR为什么使用交叉熵
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%9D%A2%E7%BB%8F/%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB/" class="md-nav__link">
        编辑距离
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%9D%A2%E7%BB%8F/B%E6%A0%91/" class="md-nav__link">
        B树
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%9D%A2%E7%BB%8F/kd%E6%A0%91/" class="md-nav__link">
        kd树
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%9D%A2%E7%BB%8F/%E5%89%8D%E7%BC%80%E6%A0%91/" class="md-nav__link">
        前缀树
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13" type="checkbox" id="__nav_13" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13">
          数学建模
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="数学建模" data-md-level="1">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          数学建模
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Mathematical%20Modeling/%E5%B1%82%E6%AC%A1%E5%88%86%E6%9E%90%E6%B3%95/" class="md-nav__link">
        层次分析法
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Mathematical%20Modeling/%E4%BC%98%E5%8A%A3%E8%A7%A3%E8%B7%9D%E7%A6%BB%E6%B3%95Topsis/" class="md-nav__link">
        Topsis
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13_3" type="checkbox" id="__nav_13_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13_3">
          插值算法
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="插值算法" data-md-level="2">
        <label class="md-nav__title" for="__nav_13_3">
          <span class="md-nav__icon md-icon"></span>
          插值算法
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Mathematical%20Modeling/%E6%8F%92%E5%80%BC%E7%AE%97%E6%B3%95/%E6%8B%89%E6%A0%BC%E6%9C%97%E6%97%A5%E6%8F%92%E5%80%BC/" class="md-nav__link">
        拉格朗日插值法
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Mathematical%20Modeling/%E6%8F%92%E5%80%BC%E7%AE%97%E6%B3%95/%E7%89%9B%E9%A1%BF%E6%8F%92%E5%80%BC/" class="md-nav__link">
        牛顿插值法
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Mathematical%20Modeling/%E6%8F%92%E5%80%BC%E7%AE%97%E6%B3%95/Hermite/" class="md-nav__link">
        Hermite插值法
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Mathematical%20Modeling/%E6%8F%92%E5%80%BC%E7%AE%97%E6%B3%95/%E5%88%86%E6%AE%B5%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC/" class="md-nav__link">
        分段线性插值法
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Mathematical%20Modeling/%E6%8F%92%E5%80%BC%E7%AE%97%E6%B3%95/%E6%A0%B7%E6%9D%A1%E6%8F%92%E5%80%BC/" class="md-nav__link">
        样条插值法
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Mathematical%20Modeling/%E5%85%B8%E5%9E%8B%E7%9B%B8%E5%85%B3%E5%88%86%E6%9E%90/" class="md-nav__link">
        典型相关分析
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Mathematical%20Modeling/%E7%9B%B8%E5%85%B3%E7%B3%BB%E6%95%B0/" class="md-nav__link">
        相关系数
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Mathematical%20Modeling/%E5%9B%9E%E5%BD%92%E5%88%86%E6%9E%90/" class="md-nav__link">
        回归分析
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Mathematical%20Modeling/%E5%9B%A0%E5%AD%90%E5%88%86%E6%9E%90/" class="md-nav__link">
        因子分析
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Mathematical%20Modeling/%E7%81%B0%E8%89%B2%E5%85%B3%E8%81%94%E5%88%86%E6%9E%90/" class="md-nav__link">
        灰色关联分析
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Mathematical%20Modeling/%E7%81%B0%E8%89%B2%E9%A2%84%E6%B5%8B%E6%A8%A1%E5%9E%8B/" class="md-nav__link">
        灰色预测模型
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14" type="checkbox" id="__nav_14" >
      
      
      
      
        <label class="md-nav__link" for="__nav_14">
          比赛相关
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="比赛相关" data-md-level="1">
        <label class="md-nav__title" for="__nav_14">
          <span class="md-nav__icon md-icon"></span>
          比赛相关
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%AF%94%E8%B5%9B%E7%9B%B8%E5%85%B3/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E6%AF%94%E8%B5%9B/" class="md-nav__link">
        数据挖掘比赛
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_15" type="checkbox" id="__nav_15" >
      
      
      
      
        <label class="md-nav__link" for="__nav_15">
          其他
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="其他" data-md-level="1">
        <label class="md-nav__title" for="__nav_15">
          <span class="md-nav__icon md-icon"></span>
          其他
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../others/vim/" class="md-nav__link">
        vim
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../others/git/" class="md-nav__link">
        git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../others/regex/" class="md-nav__link">
        regex
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../others/sql/" class="md-nav__link">
        sql
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../others/one_test/" class="md-nav__link">
        博客后台案例
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../others/linux/" class="md-nav__link">
        linux学习
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../others/jupyter_pdf/" class="md-nav__link">
        浅谈jupyter导出为pdf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../others/others/" class="md-nav__link">
        常用学习网站书籍
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#两个数的交换" class="md-nav__link">
    两个数的交换
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#格式化字符串" class="md-nav__link">
    格式化字符串
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#yield与yield-from" class="md-nav__link">
    yield与yield from
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#列表解析式" class="md-nav__link">
    列表解析式
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enumerate" class="md-nav__link">
    enumerate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#字典的合并" class="md-nav__link">
    字典的合并
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#序列解包" class="md-nav__link">
    序列解包
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#匿名函数lambda" class="md-nav__link">
    匿名函数lambda
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#装饰器" class="md-nav__link">
    装饰器
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mapreducefilter" class="md-nav__link">
    map、reduce、filter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#join" class="md-nav__link">
    join()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#将多维数组转换为一维" class="md-nav__link">
    将多维数组转换为一维
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#将一个列表倒序" class="md-nav__link">
    将一个列表倒序
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#随机生成密码" class="md-nav__link">
    随机生成密码
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#断言" class="md-nav__link">
    断言
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#合并列表" class="md-nav__link">
    合并列表
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#对list进行解包" class="md-nav__link">
    对list进行解包
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#对类的一些操作" class="md-nav__link">
    对类的一些操作
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#一些内置函数" class="md-nav__link">
    一些内置函数
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functoolspartial" class="md-nav__link">
    functools.partial
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classmethod和staticmethod" class="md-nav__link">
    @classmethod和@staticmethod
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#用类实现装饰器" class="md-nav__link">
    用类实现装饰器
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basemodel" class="md-nav__link">
    BaseModel
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python类型注释" class="md-nav__link">
    python类型注释
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#namedtuple" class="md-nav__link">
    namedtuple
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#property" class="md-nav__link">
    @property
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#在边界处思考" class="md-nav__link">
    在边界处思考
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#super进阶" class="md-nav__link">
    super()进阶
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dataclass" class="md-nav__link">
    dataclass
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#自定义format" class="md-nav__link">
    自定义format
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#抽象类实践" class="md-nav__link">
    抽象类实践
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accumulate" class="md-nav__link">
    accumulate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#异步装饰器" class="md-nav__link">
    异步装饰器
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bisect" class="md-nav__link">
    bisect
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contextlib" class="md-nav__link">
    contextlib
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#读取大文件" class="md-nav__link">
    读取大文件
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_exit__enter_" class="md-nav__link">
    _exit_、_enter_
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enum" class="md-nav__link">
    enum
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pydantic数据验证" class="md-nav__link">
    pydantic数据验证
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#islice" class="md-nav__link">
    islice
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_iter__next_" class="md-nav__link">
    _iter_、_next_
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#求字典的最大值" class="md-nav__link">
    求字典的最大值
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#注意循环变量" class="md-nav__link">
    注意循环变量
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#空对象模式" class="md-nav__link">
    空对象模式
  </a>
  
    <nav class="md-nav" aria-label="空对象模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#空对象模式简介" class="md-nav__link">
    空对象模式简介
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#好处" class="md-nav__link">
    好处
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pathlib" class="md-nav__link">
    pathlib
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#单元测试" class="md-nav__link">
    单元测试
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#takewhile和dropwhile" class="md-nav__link">
    takewhile和dropwhile
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#装饰器可以装饰方法" class="md-nav__link">
    装饰器可以装饰方法
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#__getattribute_" class="md-nav__link">
    __getattribute_
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#__getattr__setattr_" class="md-nav__link">
    __getattr_、_setattr_
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_getitem_" class="md-nav__link">
    _getitem_
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#元类" class="md-nav__link">
    元类
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#关于hash" class="md-nav__link">
    关于hash
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#处理列表越界" class="md-nav__link">
    处理列表越界
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#or操作符" class="md-nav__link">
    or操作符
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#字典的键" class="md-nav__link">
    字典的键
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>技巧</h1>
                
                <h2 id="两个数的交换"><strong>两个数的交换</strong><a class="headerlink" href="#两个数的交换" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1"># a = 1</span>
<span class="c1"># b = 2</span>
<span class="c1"># temp = b</span>
<span class="c1"># b = a</span>
<span class="c1"># a = temp</span>
<span class="c1"># print(a,b)</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span><span class="n">a</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code><span class="mf">2</span> <span class="mf">1</span>
</code></pre></div>

<h2 id="格式化字符串"><strong>格式化字符串</strong><a class="headerlink" href="#格式化字符串" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">a</span> <span class="o">=</span> <span class="mi">17</span>
<span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;wlb&quot;</span>
<span class="c1"># print(&#39;%s is %d years old&#39; %  (name,a))</span>
<span class="c1"># print(&#39;{} is {} years old&#39;.format(name,a))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1"> is </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s1"> years old&#39;</span><span class="p">)</span> <span class="c1">#明显这个方法更简单</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code>wlb is 17 years old
</code></pre></div>

<h2 id="yield与yield-from"><strong>yield与yield from</strong><a class="headerlink" href="#yield与yield-from" title="Permanent link">&para;</a></h2>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">yield</span>  <span class="n">a</span>
        <span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span><span class="n">a</span><span class="o">+</span><span class="n">b</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">fib</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="c1">#注释的内容与yield a效果相同，yield相当于使其成为一个迭代器 yield一个数后会立马传递出去，而return 要等列表都生成完毕后才会传出去</span>
<span class="c1">#他的优势在于一些耗时的操作</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># 通过yield来进行dfs，由于没有实现__next__因此是个可迭代对象而不是一个迭代器</span>
<span class="k">class</span> <span class="nc">Node</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_node</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;Node(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_value</span><span class="si">}</span><span class="s1">)&#39;</span>

    <span class="k">def</span> <span class="nf">add_children</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">node</span><span class="p">:</span><span class="s1">&#39;Node&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Node&#39;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_node</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_node</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">dfs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">yield</span> <span class="bp">self</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">yield from</span> <span class="n">i</span><span class="o">.</span><span class="n">dfs</span><span class="p">()</span>
<span class="n">root</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">children1</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">children2</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">add_children</span><span class="p">(</span><span class="n">children1</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">add_children</span><span class="p">(</span><span class="n">children2</span><span class="p">)</span>
<span class="n">children1</span><span class="o">.</span><span class="n">add_children</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="n">children1</span><span class="o">.</span><span class="n">add_children</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="n">children11</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">children2</span><span class="o">.</span><span class="n">add_children</span><span class="p">(</span><span class="n">children11</span><span class="p">)</span>
<span class="n">children11</span><span class="o">.</span><span class="n">add_children</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">dfs</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</code></pre></div></p>
<p><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Iterable</span>
<span class="k">def</span> <span class="nf">test_format</span><span class="p">(</span><span class="n">datas</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">max_len</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">datas</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">max_len</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">data</span><span class="p">[:</span><span class="n">max_len</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;...&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">data</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">test_format</span><span class="p">([</span><span class="s1">&#39;vllbc&#39;</span><span class="p">,</span> <span class="s1">&#39;test_for_this_function&#39;</span><span class="p">,</span> <span class="s1">&#39;good&#39;</span><span class="p">],</span><span class="mi">5</span><span class="p">)))</span>
<span class="c1"># 把长度大于5的部分变成省略号</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">#子生成器</span>
<span class="k">def</span> <span class="nf">average_gen</span><span class="p">():</span>
    <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">average</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">new_num</span> <span class="o">=</span> <span class="k">yield</span> <span class="n">average</span>
        <span class="k">if</span> <span class="n">new_num</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">new_num</span>
        <span class="n">average</span> <span class="o">=</span> <span class="n">total</span><span class="o">/</span><span class="n">count</span>
    <span class="k">return</span> <span class="n">total</span><span class="p">,</span><span class="n">count</span><span class="p">,</span><span class="n">average</span>
<span class="c1"># 委托生成器</span>
<span class="k">def</span> <span class="nf">proxy_gen</span><span class="p">():</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">total</span><span class="p">,</span><span class="n">count</span><span class="p">,</span><span class="n">average</span> <span class="o">=</span> <span class="k">yield from</span> <span class="n">average_gen</span><span class="p">()</span> <span class="c1"># yield from后面是一个可迭代对象,此文后面的将多维数组转化为一维数组中flatten函数就用到了yield from，原理就是如果列表中一个元素是列表就yield from这个列表，否则就直接yield这个元素，也利用了递归的方法。如果子生成器退出while循环了，就执行return以获取返回值。</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">total</span><span class="p">,</span><span class="n">count</span><span class="p">,</span><span class="n">average</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">proxy_gen</span><span class="p">()</span>
    <span class="nb">next</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="mi">15</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>
    <span class="n">t</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="n">main</span><span class="p">()</span>
</code></pre></div></p>
<h2 id="列表解析式"><strong>列表解析式</strong><a class="headerlink" href="#列表解析式" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">lists</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;http://www.baidu.com/page</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">21</span><span class="p">)]</span>
<span class="n">lists</span><span class="c1">#此方法在爬虫构造urls中非常常用</span>
<span class="c1"># lists = [f&quot;http://www.baidu.com/page{n}&quot; for n in range(21) if n%2==0] page偶数</span>
<span class="c1"># alp = &quot;abcdefghigklmnopqrstuvwxyz&quot;</span>
<span class="c1"># ALP = [n.upper() for n in alp] 将小写转换为大写</span>
</code></pre></div>
<h2 id="enumerate"><strong>enumerate</strong><a class="headerlink" href="#enumerate" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">lists</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span><span class="s1">&#39;banana&#39;</span><span class="p">,</span><span class="s1">&#39;cat&#39;</span><span class="p">,</span><span class="s1">&#39;dog&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lists</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">index</span><span class="p">,</span><span class="n">name</span><span class="p">)</span>

<span class="c1"># 手动实现一下enumerate</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Iterable</span>
<span class="k">def</span> <span class="nf">enumerate_</span><span class="p">(</span><span class="n">Iterable</span><span class="p">:</span><span class="n">Iterable</span><span class="p">,</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="k">yield from</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="n">start</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">Iterable</span><span class="p">)),</span><span class="n">Iterable</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">item</span> <span class="ow">in</span> <span class="n">enumerate_</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="mi">9</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">item</span><span class="p">)</span>
</code></pre></div>
<h2 id="字典的合并"><strong>字典的合并</strong><a class="headerlink" href="#字典的合并" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">dic1</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;qq&#39;</span><span class="p">:</span><span class="mi">1683070754</span><span class="p">,</span>
        <span class="s1">&#39;phone&#39;</span><span class="p">:</span><span class="mi">123456789</span>
       <span class="p">}</span>
<span class="n">dic2</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;height&#39;</span><span class="p">:</span><span class="mi">180</span><span class="p">,</span>
    <span class="s1">&#39;handsome&#39;</span><span class="p">:</span><span class="kc">True</span>
<span class="p">}</span>
<span class="n">dic3</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">dic1</span><span class="p">,</span><span class="o">**</span><span class="n">dic2</span><span class="p">}</span>
<span class="c1">#合并两个字典 **叫做解包</span>
<span class="c1">#或者用dic1.update(dic2) 将dic2合并到dic1 相同键则dic2替代dic1</span>
<span class="n">dic3</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code>{&#39;handsome&#39;: True, &#39;height&#39;: 180, &#39;phone&#39;: 123456789, &#39;qq&#39;: 1683070754}
</code></pre></div>

<h2 id="序列解包"><strong>序列解包</strong><a class="headerlink" href="#序列解包" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;wang lingbo&quot;</span>
<span class="n">xing</span><span class="p">,</span><span class="n">ming</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span> <span class="c1">#split返回一个序列，分别赋给xing 和ming</span>
<span class="nb">print</span><span class="p">(</span><span class="n">xing</span><span class="p">,</span><span class="n">ming</span><span class="p">)</span>
<span class="c1">#x,*y,z = [1,2,3,4,5]</span>
<span class="c1">#x:1 z:5 y:[2,3,4]</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code>wang lingbo
</code></pre></div>

<h2 id="匿名函数lambda"><strong>匿名函数lambda</strong><a class="headerlink" href="#匿名函数lambda" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">lists</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="n">maps</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">,</span><span class="n">lists</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">maps</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">maps</span><span class="p">))</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code>&lt;map object at 0x000001911C8E03C8&gt;
[1, 4, 9, 16, 25, 36]
</code></pre></div>

<h2 id="装饰器"><strong>装饰器</strong><a class="headerlink" href="#装饰器" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">logging</span><span class="p">(</span><span class="n">level</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wapper</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">inner_wapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">wbargs</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">level</span><span class="si">}</span><span class="s1">  enter in </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">()&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">wbargs</span><span class="p">)</span> <span class="c1">#不写return 也可以</span>
        <span class="k">return</span> <span class="n">inner_wapper</span>
    <span class="k">return</span> <span class="n">wapper</span>
<span class="nd">@logging</span><span class="p">(</span><span class="s1">&#39;inner&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">say</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hello!  </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="n">say</span><span class="p">(</span><span class="s1">&#39;wlb&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code>inner  enter in say()
hello!  wlb
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">time</span>
<span class="k">def</span> <span class="nf">print_time</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">wbargs</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">()调用于</span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">asctime</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()))</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">wbargs</span><span class="p">)</span> <span class="c1">#不写return 也可以</span>
    <span class="k">return</span> <span class="n">wapper</span>
<span class="nd">@print_time</span>
<span class="k">def</span> <span class="nf">my_name</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;look!</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">my_name</span><span class="p">(</span><span class="s2">&quot;wlb&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code>my_name()调用于Wed Dec  9 21:21:00 2020
look!wlb
</code></pre></div>

<h2 id="mapreducefilter"><strong>map、reduce、filter</strong><a class="headerlink" href="#mapreducefilter" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1"># map</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">abs</span><span class="p">,[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span><span class="o">-</span><span class="mi">5</span><span class="p">])))</span> <span class="c1">#也可以自己定义函数或者用匿名函数</span>
<span class="c1"># reduce</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span> <span class="c1">#python3中需要从内置库导入</span>
<span class="nb">print</span><span class="p">(</span><span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">,</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="mi">131351412</span><span class="p">)))))</span>
<span class="c1"># filter</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]</span>
<span class="n">new_a</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">!=</span><span class="mi">0</span><span class="p">,</span><span class="n">a</span><span class="p">)</span> <span class="c1">#filter就是筛选</span>
<span class="nb">list</span><span class="p">(</span><span class="n">new_a</span><span class="p">)</span>
<span class="c1"># 这三个都是函数式编程中常用的函数</span>
</code></pre></div>
<h2 id="join"><strong>join()</strong><a class="headerlink" href="#join" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1"># lists = [&#39;1&#39;,&#39;2&#39;,&#39;3&#39;,&#39;4&#39;,&#39;5&#39;]</span>
<span class="c1"># &#39;&#39;.join(lists)</span>
<span class="n">lists</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">lists</span><span class="p">)))</span> <span class="c1">#join只能是字符串列表，所以要map转换一下</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code>&#39;12345&#39;
</code></pre></div>

<h2 id="将多维数组转换为一维"><strong>将多维数组转换为一维</strong><a class="headerlink" href="#将多维数组转换为一维" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">ab</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]]</span>


<span class="nb">print</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">ab</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">item</span><span class="p">])</span> <span class="c1">#利用列表解析式</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">ab</span><span class="p">,</span> <span class="p">[]))</span> <span class="c1"># 利用sum函数</span>

<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>
<span class="nb">print</span><span class="p">(</span><span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">,</span><span class="n">ab</span><span class="p">))</span> <span class="c1"># 利用reduce</span>

<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span><span class="o">*</span><span class="n">ab</span><span class="p">)))</span> <span class="c1"># 利用chain</span>


<span class="k">def</span> <span class="nf">flatten</span><span class="p">(</span><span class="n">items</span><span class="p">,</span><span class="n">ignore</span><span class="o">=</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="nb">bytes</span><span class="p">)):</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">Iterable</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">ignore</span><span class="p">):</span>
            <span class="k">yield from</span> <span class="n">flatten</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">x</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">flatten</span><span class="p">(</span><span class="n">ab</span><span class="p">)))</span> <span class="c1"># 利用自己定义的函数</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code>[1, 2, 3, 5, 8, 7, 8, 9]
</code></pre></div>

<h2 id="将一个列表倒序"><strong>将一个列表倒序</strong><a class="headerlink" href="#将一个列表倒序" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">lists</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="n">lists</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="c1"># list(reversed(lists))</span>
</code></pre></div>
<h2 id="随机生成密码"><strong>随机生成密码</strong><a class="headerlink" href="#随机生成密码" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">random</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">t</span> <span class="o">=</span> <span class="s1">&#39;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">b</span><span class="p">)))</span> <span class="c1"># 主要就是用sample这个方法来取多个随机值</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code><span class="mf">0</span><span class="n">KmtEZSU</span>
</code></pre></div>

<h2 id="断言"><strong>断言</strong><a class="headerlink" href="#断言" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="k">assert</span><span class="p">(</span><span class="kc">True</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">)</span> <span class="c1">#成功</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;yes&#39;</span><span class="p">)</span>
<span class="k">assert</span><span class="p">(</span><span class="kc">True</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">)</span> <span class="c1">#报错</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;no&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code>yes
</code></pre></div>

<h2 id="合并列表"><strong>合并列表</strong><a class="headerlink" href="#合并列表" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">list1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="mi">13</span><span class="p">]</span>
<span class="n">list2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">32</span><span class="p">]</span>
<span class="c1"># list1.append(list2)</span>
<span class="c1"># print(list1) #错误方法</span>
<span class="n">list1</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">list2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">list1</span><span class="p">)</span> <span class="c1">#正确方法</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code>[1, 2, 31, 13, 5, 2, 12, 32]
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">]</span>
<span class="n">fin</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="n">fin</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fin</span><span class="p">)</span> <span class="c1"># {1: &#39;a&#39;, 2: &#39;b&#39;, 3: &#39;c&#39;, 4: &#39;d&#39;, 5: &#39;e&#39;}</span>
<span class="c1"># 或者</span>
<span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">d</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="k">pass</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="c1"># {1: &#39;a&#39;, 2: &#39;b&#39;, 3: &#39;c&#39;, 4: &#39;d&#39;, 5: &#39;e&#39;} 为什么？在WTFpython中有讲</span>
<span class="c1"># 或者</span>
<span class="n">fin</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fin</span><span class="p">)</span> <span class="c1"># {1: &#39;a&#39;, 2: &#39;b&#39;, 3: &#39;c&#39;, 4: &#39;d&#39;, 5: &#39;e&#39;}</span>
</code></pre></div>
<h2 id="对list进行解包">对list进行解包<a class="headerlink" href="#对list进行解包" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">lists</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span><span class="s1">&#39;cat&#39;</span><span class="p">,</span><span class="s1">&#39;you&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="o">*</span><span class="n">lists</span><span class="p">)</span>
<span class="c1">#想对一个列表进行zip操作时，可以这样</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">lists</span><span class="p">)))</span>
<span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;args:&quot;</span><span class="p">,</span><span class="n">args</span><span class="p">)</span>
<span class="n">test</span><span class="p">(</span><span class="o">*</span><span class="n">lists</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>dog cat you
[(&#39;d&#39;, &#39;c&#39;, &#39;y&#39;), (&#39;o&#39;, &#39;a&#39;, &#39;o&#39;), (&#39;g&#39;, &#39;t&#39;, &#39;u&#39;)]
args:(&#39;dog&#39;,&#39;cat&#39;,&#39;you&#39;)
</code></pre></div>
<h2 id="对类的一些操作">对类的一些操作<a class="headerlink" href="#对类的一些操作" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Test</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Test</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">Test</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="c1">#==&gt;print(Test().x,Test().y)</span>
<span class="k">class</span> <span class="nc">Test</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
<span class="n">test</span> <span class="o">=</span> <span class="n">Test</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">test</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>1 2
1 2
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Test</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">maxlen</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxlen</span> <span class="o">=</span> <span class="n">maxlen</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lists</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lists</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxlen</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lists</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">break</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lists</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lists</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lists</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;del this class&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">printfs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lists</span>
<span class="n">test</span> <span class="o">=</span> <span class="n">Test</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">test</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">empty</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">test</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">printfs</span><span class="p">())</span>
<span class="n">test</span><span class="o">.</span><span class="fm">__del__</span><span class="p">()</span>   <span class="c1">#直接调用test还存在，__del__是析构函数，垃圾回收时就会调用a</span>
<span class="nb">print</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
<span class="c1">#del test</span>
<span class="c1">#print(test) 这时候就会报错，因为del将test这个对象直接删除了</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>False
6
[1, 2, 3, 4, 5, 6]
del this class
&lt;__main__.Test object at 0x0000021B7DF33EB0&gt;
del this class
</code></pre></div>
<h2 id="一些内置函数">一些内置函数<a class="headerlink" href="#一些内置函数" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="nb">all</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span><span class="kc">True</span><span class="p">,</span><span class="kc">False</span><span class="p">])</span> <span class="c1">#False</span>
<span class="nb">all</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span><span class="kc">True</span><span class="p">,</span><span class="kc">True</span><span class="p">])</span> <span class="c1">#True</span>
<span class="nb">any</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span><span class="kc">True</span><span class="p">,</span><span class="kc">False</span><span class="p">])</span> <span class="c1">#True</span>
<span class="nb">any</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span><span class="kc">False</span><span class="p">,</span><span class="kc">False</span><span class="p">])</span><span class="c1">#True</span>
<span class="nb">any</span><span class="p">([</span><span class="kc">False</span><span class="p">,</span><span class="kc">False</span><span class="p">])</span> <span class="c1">#False</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">random</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span><span class="mi">5</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="c1">#相当于</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
        <span class="k">break</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>iter(object[, sentinel])
sentinel为可选参数，若不传入，则object必须为可迭代对象，传入则必须为可调用对象,当可调用对象的返回值为sentinel抛出异常，但for循环会处理这个异常，这常常用于IO操作
</code></pre></div>
<p>​       </p>
<div class="highlight"><pre><span></span><code><span class="c1">#这是cookbook里面的一个例子</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;xxx/xxx.txt&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">#深入理解一下</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="k">class</span> <span class="nc">Test</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lists</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">421</span><span class="p">,</span><span class="mi">412</span><span class="p">]</span>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lists</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">(</span><span class="n">Test</span><span class="p">(),</span><span class="mi">1</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="c1">#这是可以正常输出的，因为实例化Test后是个可调用对象，返回列表的随机值，当返回1时则循环结束，如果把__call__魔法方法去了后，则会报错，如果想要不使用魔法方法的话可以用匿名函数</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="k">class</span> <span class="nc">Test</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lists</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">421</span><span class="p">,</span><span class="mi">412</span><span class="p">]</span>
    <span class="c1"># def __call__(self):</span>
    <span class="c1">#     return random.choice(self.lists)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">Test</span><span class="p">()</span><span class="o">.</span><span class="n">lists</span><span class="p">),</span><span class="mi">1</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="c1">#总之，吹爆cookbook</span>
</code></pre></div>
<h2 id="functoolspartial">functools.partial<a class="headerlink" href="#functoolspartial" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1">#先看演示</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="n">addOne</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">add</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">addOne</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1">#3</span>
<span class="n">addOne</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="c1">#5</span>
<span class="c1">#大概意思就是利用partial将函数的一个参数固定住了</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">partial</span><span class="p">(</span><span class="n">func</span><span class="p">,</span><span class="o">*</span><span class="n">wargs</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wapper</span><span class="p">(</span><span class="o">*</span><span class="n">kargs</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">wargs</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;args:</span><span class="si">{</span><span class="n">args</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;kargs:</span><span class="si">{</span><span class="n">kargs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">kargs</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;last:</span><span class="si">{</span><span class="n">args</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wapper</span>

<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span>

<span class="n">addone</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">add</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="c1">#此时addone相当于wapper</span>
<span class="nb">print</span><span class="p">(</span><span class="n">addone</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span> <span class="c1">#调用wrapper 3为传入的kargs</span>
<span class="c1">#输出：</span>
<span class="n">args</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">kargs</span><span class="p">:(</span><span class="mi">3</span><span class="p">,)</span>
<span class="n">last</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="mi">6</span>

<span class="c1">#上面是partial函数的简化版本</span>
<span class="c1">#很明显的闭包操作，很容易就可以理解</span>
<span class="c1">#当然也可以转换为装饰器操作</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>

<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span><span class="p">,</span><span class="n">partial</span>

<span class="k">def</span> <span class="nf">out_wapper</span><span class="p">(</span><span class="o">*</span><span class="n">wargs</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">partialout</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="n">func</span><span class="p">,</span><span class="o">*</span><span class="n">wargs</span><span class="p">)</span>
        <span class="c1"># 这是使用partial原理的</span>
        <span class="c1"># @wraps(func)</span>
        <span class="c1"># def wrapper(*kargs):</span>
        <span class="c1">#     args = list(wargs)</span>
        <span class="c1">#     print(f&quot;args:{args}&quot;)</span>
        <span class="c1">#     print(f&quot;kargs:{kargs}&quot;)</span>
        <span class="c1">#     args.extend(kargs)</span>
        <span class="c1">#     print(f&quot;last:{args}&quot;)</span>
        <span class="c1">#     return func(*args)</span>
        <span class="c1"># return wrapper</span>
    <span class="k">return</span> <span class="n">partialout</span>

<span class="nd">@out_wapper</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span>

<span class="nb">print</span><span class="p">(</span><span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span> <span class="c1">#6</span>
<span class="c1">#明显装饰器要麻烦一点实现，不过毕竟是封装好的函数，以后直接用就可以，不过了解这些有助于提高思维水平</span>
</code></pre></div>
<h2 id="classmethod和staticmethod">@classmethod和@staticmethod<a class="headerlink" href="#classmethod和staticmethod" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">bar</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">def</span> <span class="nf">func1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  
        <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span> 
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">func2</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;func2&#39;</span><span class="p">)</span>
        <span class="nb">print</span> <span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">bar</span><span class="p">)</span>
        <span class="bp">cls</span><span class="p">()</span><span class="o">.</span><span class="n">func1</span><span class="p">()</span>   <span class="c1"># 调用 foo 方法</span>

<span class="n">A</span><span class="o">.</span><span class="n">func2</span><span class="p">()</span>               <span class="c1"># 不需要实例化</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>func2
1
foo
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="c1"># 属性默认为类属性（可以给直接被类本身调用）</span>
    <span class="n">num</span> <span class="o">=</span> <span class="s2">&quot;类属性&quot;</span>

    <span class="c1"># 实例化方法（必须实例化类之后才能被调用）</span>
    <span class="k">def</span> <span class="nf">func1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1"># self : 表示实例化类后的地址id</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;func1&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="c1"># 类方法（不需要实例化类就可以被类本身调用）</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">func2</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>  <span class="c1"># cls : 表示没用被实例化的类本身</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;func2&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>
        <span class="bp">cls</span><span class="p">()</span><span class="o">.</span><span class="n">func1</span><span class="p">()</span>

    <span class="c1"># 不传递传递默认self参数的方法（该方法也是可以直接被类调用的，但是这样做不标准）</span>
    <span class="k">def</span> <span class="nf">func3</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;func3&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">num</span><span class="p">)</span> <span class="c1"># 属性是可以直接用类本身调用的</span>

<span class="c1"># A.func1() 这样调用是会报错：因为func1()调用时需要默认传递实例化类后的地址id参数，如果不实例化类是无法调用的</span>
<span class="n">A</span><span class="o">.</span><span class="n">func2</span><span class="p">()</span>
<span class="n">A</span><span class="o">.</span><span class="n">func3</span><span class="p">()</span> 
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;executing foo(</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;self:&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">static_foo</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;executing static_foo(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">x</span><span class="p">)</span>   
</code></pre></div>
<div class="highlight"><pre><span></span><code>问题：@staticmethod修饰的方法函数与普通的类外函数，为什么不直接使用普通函数？
<span class="ni">@staticmethod是把函数嵌入到类中的一种方式</span>，函数就属于类，同时表明函数不需要访问这个类。通过子类的继承覆盖，能更好的组织代码。
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Sequence</span>


<span class="k">class</span> <span class="nc">Test</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">text</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span><span class="n">text</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Test&quot;</span><span class="p">:</span> <span class="c1"># classmethod常用构造函数</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Test&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Test</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">join</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">Tests</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="nb">sum</span><span class="p">([</span><span class="n">i</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">Tests</span><span class="p">],[]))</span>

<span class="n">test</span> <span class="o">=</span> <span class="n">Test</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;Hello world&quot;</span><span class="p">))</span>
<span class="n">t2</span> <span class="o">=</span> <span class="n">Test</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;NIHAO&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Test</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">t2</span><span class="p">))</span>
<span class="c1"># text=[&#39;H&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;o&#39;, &#39; &#39;, &#39;w&#39;, &#39;o&#39;, &#39;r&#39;, &#39;l&#39;, &#39;d&#39;, &#39;N&#39;, &#39;I&#39;, &#39;H&#39;, &#39;A&#39;, &#39;O&#39;]</span>
</code></pre></div>
<h2 id="用类实现装饰器">用类实现装饰器<a class="headerlink" href="#用类实现装饰器" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1">#先看这样的代码  类实现装饰器要求类必须是可调用的</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">functools</span>


<span class="k">class</span> <span class="nc">DelayFunc</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>  <span class="n">duration</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func</span> <span class="o">=</span> <span class="n">func</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Wait for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="si">}</span><span class="s1"> seconds...&#39;</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">eager_call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Call without delay&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">delay</span><span class="p">(</span><span class="n">duration</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;装饰器：推迟某个函数的执行。同时提供 .eager_call 方法立即执行</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># 此处为了避免定义额外函数，直接使用 functools.partial 帮助构造</span>
    <span class="c1"># DelayFunc 实例</span>
    <span class="k">return</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">DelayFunc</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>
<span class="nd">@delay</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
<span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="c1">#延迟两秒输出3 相当于delay(2)(add)(1,2)</span>
<span class="n">add</span><span class="o">.</span><span class="n">eager_call</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="c1">#不延迟输出3  相当于delay(2)(add).eager_call(1,2)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">#额，当然，想更深入理解的话，也可以这么写</span>
<span class="k">def</span> <span class="nf">delay</span><span class="p">(</span><span class="n">duration</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">partial</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">DelayFunc</span><span class="p">(</span><span class="n">duration</span><span class="p">,</span><span class="n">func</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">partial</span>
    <span class="c1"># 上面的就相当于 partial(DelayFunc,duration),缺的func参数就是要修饰的函数</span>
<span class="nd">@delay</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="nb">print</span><span class="p">(</span><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div>
<p>与纯函数相比，我觉得使用类实现的装饰器在**特定场景**下有几个优势：</p>
<ul>
<li>实现有状态的装饰器时，操作类属性比操作闭包内变量更符合直觉、不易出错</li>
<li>实现为函数扩充接口的装饰器时，使用类包装函数，比直接为函数对象追加属性更易于维护</li>
<li>更容易实现一个同时兼容装饰器与上下文管理器协议的对象</li>
</ul>
<h2 id="basemodel">BaseModel<a class="headerlink" href="#basemodel" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span><span class="n">AnyUrl</span>


<span class="k">class</span> <span class="nc">Test</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span> <span class="c1"># 继承后可以用类属性创建实例</span>
    <span class="n">url</span><span class="p">:</span> <span class="n">AnyUrl</span>
    <span class="n">data</span><span class="p">:</span> <span class="nb">str</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>


<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;https://www.baidu.com&#39;</span><span class="p">,</span>
    <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="s1">&#39;/search&#39;</span>
<span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Test</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
</code></pre></div>
<h2 id="python类型注释">python类型注释<a class="headerlink" href="#python类型注释" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span>


<span class="k">class</span> <span class="nc">cout</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">cls</span><span class="p">:</span> <span class="s2">&quot;Test&quot;</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">cls</span> <span class="o">=</span> <span class="bp">cls</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="si">}</span><span class="s2">  </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="c1">#程序到cout时 Test类并没有定义，但最后Test在变量空间中，所以加上引号</span>

<span class="k">class</span> <span class="nc">Test</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;I am Test Class&quot;</span>


<span class="nb">print</span><span class="p">(</span><span class="n">cout</span><span class="p">(</span><span class="bp">cls</span><span class="o">=</span><span class="n">Test</span><span class="p">(),</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;hello world!&quot;</span><span class="p">))</span>
</code></pre></div>
<h2 id="namedtuple">namedtuple<a class="headerlink" href="#namedtuple" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>

<span class="n">Test</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s2">&quot;Test&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;sex&#39;</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">test_for_test</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">year</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">sex</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Test&quot;</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">Test</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="o">.</span><span class="n">title</span><span class="p">(),</span>
        <span class="n">age</span><span class="o">=</span><span class="mi">2021</span> <span class="o">-</span> <span class="n">year</span><span class="p">,</span>
        <span class="n">sex</span><span class="o">=</span><span class="n">sex</span>
    <span class="p">)</span>

<span class="n">name</span><span class="p">,</span><span class="n">age</span><span class="p">,</span><span class="n">sex</span> <span class="o">=</span> <span class="n">test_for_test</span><span class="p">(</span><span class="s1">&#39;wlb&#39;</span><span class="p">,</span> <span class="mi">2002</span><span class="p">,</span> <span class="s1">&#39;male&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">sex</span><span class="p">)</span>
</code></pre></div>
<h2 id="property">@property<a class="headerlink" href="#property" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="k">class</span> <span class="nc">Test</span><span class="p">():</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">cls</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cls</span> <span class="o">=</span> <span class="bp">cls</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span> 
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">to_string_cls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cls</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">to_strings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span>


<span class="k">class</span> <span class="nc">Test_For</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">num</span><span class="p">:</span> <span class="nb">int</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">)</span>

    <span class="fm">__repr__</span> <span class="o">=</span> <span class="fm">__str__</span>

<span class="n">test</span> <span class="o">=</span> <span class="n">Test</span><span class="p">(</span><span class="n">Test_For</span><span class="p">,</span> <span class="mi">22</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">to_string_cls</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span> <span class="c1"># 1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">to_strings</span><span class="p">)</span> <span class="c1"># 22</span>
</code></pre></div>
<h2 id="在边界处思考">在边界处思考<a class="headerlink" href="#在边界处思考" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Iterable</span>
<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span><span class="n">conint</span><span class="p">,</span><span class="n">ValidationError</span>


<span class="k">class</span> <span class="nc">NumberInput</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">num</span><span class="p">:</span> <span class="n">conint</span><span class="p">(</span><span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">input_a_number</span><span class="p">():</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;输入一个数&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">NumberInput</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">num</span>
        <span class="k">break</span>
    <span class="k">return</span> <span class="n">n</span>

<span class="nb">print</span><span class="p">(</span><span class="n">input_a_number</span><span class="p">())</span> <span class="c1">#要求输入一个0-100的数 这样是不是很优雅</span>
</code></pre></div>
<h2 id="super进阶">super()进阶<a class="headerlink" href="#super进阶" title="Permanent link">&para;</a></h2>
<p>今天学习cookbook8-8<code>子类中扩展property</code>  先贴一下代码</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="c1"># 有意思的是 这里的self.name是@property修饰的 这行代码调用name.setter</span>

    <span class="c1"># Getter function</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="c1"># Setter function</span>
    <span class="nd">@name</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Expected a string&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">value</span>

    <span class="c1"># Deleter function</span>
    <span class="nd">@name</span><span class="o">.</span><span class="n">deleter</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;Can&#39;t delete attribute&quot;</span><span class="p">)</span>



<span class="c1"># 子类</span>

<span class="k">class</span> <span class="nc">SubPerson</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Getting name&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">name</span>

    <span class="nd">@name</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Setting name to&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SubPerson</span><span class="p">,</span> <span class="n">SubPerson</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="fm">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="nd">@name</span><span class="o">.</span><span class="n">deleter</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Deleting name&#39;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SubPerson</span><span class="p">,</span> <span class="n">SubPerson</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="fm">__delete__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div>
<p>看到super(SubPerson, SubPerson)感到很疑惑，于是搜索资料大致搞明白了</p>
<p>通俗说默认的super(SubPerson,self) (直接写super()也可) 返回的是一个类的实例</p>
<blockquote>
<p>为了委托给之前定义的setter方法，需要将控制权传递给之前定义的name属性的 <code>__set__()</code> 方法。 不过，获取这个方法的唯一途径是使用类变量而不是实例变量来访问它。 这也是为什么我们要使用 <code>super(SubPerson, SubPerson)</code> 的原因。</p>
</blockquote>
<p>从书中这句话可以看出 super(cls,cls)返回的是一个类 不是一个实例，super()的参数的作用就是用于定位位置</p>
<p>第一个cls必须是第二cls的父类或者二者相同，可以通过<code>cls.__mro__</code>查看继承顺序 比如在D里面<code>super(A,D).__init__(self)</code></p>
<p>而<code>__mro__</code> 为 <code>(&lt;class '__main__.D'&gt;, &lt;class '__main__.A'&gt;, &lt;class '__main__.B'&gt;, &lt;class '__main__.C'&gt;, &lt;class '__main__.Base'&gt;, &lt;class 'object'&gt;)</code> 那么就调用从A以后的类的<code>__init__()</code></p>
<p>不过重点不在这里，重点是super(cls,cls)和super(cls,object)的区别</p>
<h2 id="dataclass">dataclass<a class="headerlink" href="#dataclass" title="Permanent link">&para;</a></h2>
<p><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="nd">@dataclass</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># 等于实现了各种比较方法例如=、&gt;、&lt;,排序函数都依赖比较两个对象</span>
<span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="n">n</span><span class="p">:</span> <span class="nb">int</span>

<span class="n">nums</span> <span class="o">=</span> <span class="p">[</span><span class="n">A</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="n">nums</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;hello&#39;&#39;&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</code></pre></div>
dataclass可以自动添加__rapr__方法，不必自己实现
<code>@dataclass(init=True, repr=True, eq=True, order=False, unsafe_hash=False, frozen=False)</code></p>
<ol>
<li><code>init</code>：默认将生成 <code>__init__</code> 方法。如果传入 <code>False</code>，那么该类将不会有 <code>__init__</code> 方法。</li>
<li><code>repr</code>：<code>__repr__</code> 方法默认生成。如果传入 <code>False</code>，那么该类将不会有 <code>__repr__</code> 方法。</li>
<li><code>eq</code>：默认将生成 <code>__eq__</code> 方法。如果传入 <code>False</code>，那么 <code>__eq__</code> 方法将不会被 <code>dataclass</code> 添加，但默认为 <code>object.__eq__</code>。</li>
<li><code>order</code>：默认将生成 <code>__gt__</code>、<code>__ge__</code>、<code>__lt__</code>、<code>__le__</code> 方法。如果传入 <code>False</code>，则省略它们。</li>
<li><code>unsafe_hash</code>：默认生成__hash__方法，用于构建可hashable的类
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="nd">@dataclass</span><span class="p">(</span><span class="n">unsafe_hash</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">VisitRecordDC</span><span class="p">:</span>
    <span class="n">first_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">last_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">phone_number</span><span class="p">:</span> <span class="nb">str</span>
    <span class="c1"># 跳过“访问时间”字段，不作为任何对比条件</span>
    <span class="n">date_visited</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="nb">hash</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">compare</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">find_potential_customers_v4</span><span class="p">():</span>
    <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="n">VisitRecordDC</span><span class="p">(</span><span class="o">**</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">users_visited_phuket</span><span class="p">)</span> <span class="o">-</span> \ <span class="c1">#求差集</span>
        <span class="nb">set</span><span class="p">(</span><span class="n">VisitRecordDC</span><span class="p">(</span><span class="o">**</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">users_visited_nz</span><span class="p">)</span>
</code></pre></div></li>
</ol>
<h2 id="自定义format">自定义format<a class="headerlink" href="#自定义format" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Student</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>

    <span class="k">def</span> <span class="fm">__format__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">format_spec</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">format_spec</span> <span class="o">==</span> <span class="s1">&#39;long&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1"> is </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">age</span><span class="si">}</span><span class="s1"> years old.&#39;</span>
        <span class="k">elif</span> <span class="n">format_spec</span> <span class="o">==</span> <span class="s1">&#39;simple&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">age</span><span class="si">}</span><span class="s1">)&#39;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;invalid format spec&#39;</span><span class="p">)</span>


<span class="n">vllbc</span> <span class="o">=</span> <span class="n">Student</span><span class="p">(</span><span class="s1">&#39;vllbc&#39;</span><span class="p">,</span> <span class="s1">&#39;18&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">vllbc</span><span class="si">:</span><span class="s1">simple</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">vllbc</span><span class="si">:</span><span class="s1">long</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>
<h2 id="抽象类实践">抽象类实践<a class="headerlink" href="#抽象类实践" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">collections</span>
<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<span class="n">customer</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;customer&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;points&#39;</span><span class="p">])</span>


<span class="k">class</span> <span class="nc">Goods</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">quantity</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span> <span class="o">=</span> <span class="n">quantity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">price</span>

    <span class="k">def</span> <span class="nf">total</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">price</span>


<span class="k">class</span> <span class="nc">Order</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">customer</span><span class="p">:</span> <span class="n">customer</span><span class="p">,</span> <span class="n">cart</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Goods</span><span class="p">],</span> <span class="n">prom</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">customer</span> <span class="o">=</span> <span class="n">customer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cart</span> <span class="o">=</span> <span class="n">cart</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prom</span> <span class="o">=</span> <span class="n">prom</span>

    <span class="k">def</span> <span class="nf">total</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;__total&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">total</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cart</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__total</span>

    <span class="k">def</span> <span class="nf">due</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prom</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">discount</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">discount</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prom</span><span class="o">.</span><span class="n">discount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span><span class="p">()</span> <span class="o">-</span> <span class="n">discount</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;&lt;Order total: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">total</span><span class="p">()</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1"> due: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">due</span><span class="p">()</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">&gt;&#39;</span>


<span class="k">class</span> <span class="nc">Prom</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span> <span class="c1"># 抽象类</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">discount</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">order</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&#39;&#39;&#39;discount&#39;&#39;&#39;</span>

<span class="k">class</span> <span class="nc">discount1</span><span class="p">(</span><span class="n">Prom</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">discount</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">order</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
       <span class="k">return</span> <span class="n">order</span><span class="o">.</span><span class="n">total</span><span class="p">()</span> <span class="o">*</span> <span class="mf">0.05</span> <span class="k">if</span> <span class="n">order</span><span class="o">.</span><span class="n">customer</span><span class="o">.</span><span class="n">points</span> <span class="o">&gt;=</span> <span class="mi">10000</span> <span class="k">else</span> <span class="mi">0</span> 

<span class="n">john</span> <span class="o">=</span> <span class="n">customer</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;vllbc&#39;</span><span class="p">,</span> <span class="n">points</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="n">carts</span> <span class="o">=</span> <span class="p">[</span><span class="n">Goods</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">price</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span> <span class="n">Goods</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;banana&#39;</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">price</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span> <span class="n">Goods</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;peach&#39;</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">price</span><span class="o">=</span><span class="mi">8</span><span class="p">)]</span>
<span class="n">order</span> <span class="o">=</span> <span class="n">Order</span><span class="p">(</span><span class="n">customer</span><span class="o">=</span><span class="n">john</span><span class="p">,</span> <span class="n">cart</span><span class="o">=</span><span class="n">carts</span><span class="p">,</span><span class="n">prom</span><span class="o">=</span><span class="n">discount1</span><span class="p">())</span>
</code></pre></div>
<h2 id="accumulate">accumulate<a class="headerlink" href="#accumulate" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">itertools</span>

<span class="n">test_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">)]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">accumulate</span><span class="p">(</span><span class="n">test_list</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="c1"># 1,3,6,10,15,21,28,36,45,55,</span>
<span class="nb">print</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">accumulate</span><span class="p">(</span><span class="n">test_list</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="c1"># 1,2,6,24,120,720,5040,40320,362880,3628800,</span>
</code></pre></div>
<h2 id="异步装饰器">异步装饰器<a class="headerlink" href="#异步装饰器" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>
<span class="kn">import</span> <span class="nn">asyncio</span>

<span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">hello</span>

<span class="nd">@decorator</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">test</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">test</span><span class="p">())</span>
</code></pre></div>
<h2 id="bisect">bisect<a class="headerlink" href="#bisect" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">bisect</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># BREAKPOINTS 必须是已经排好序的，不然无法进行二分查找</span>
<span class="n">BREAKPOINTS</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">3600</span><span class="p">,</span> <span class="mi">3600</span> <span class="o">*</span> <span class="mi">24</span><span class="p">)</span>
<span class="n">TMPLS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="c1"># unit, template</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;less than 1 second ago&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{units}</span><span class="s2"> seconds ago&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{units}</span><span class="s2"> minutes ago&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">3600</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{units}</span><span class="s2"> hours ago&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">3600</span> <span class="o">*</span> <span class="mi">24</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{units}</span><span class="s2"> days ago&quot;</span><span class="p">),</span>
<span class="p">)</span>


<span class="k">def</span> <span class="nf">from_now</span><span class="p">(</span><span class="n">ts</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;接收一个过去的时间戳，返回距离当前时间的相对时间文字描述</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">seconds_delta</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">ts</span><span class="p">)</span>
    <span class="n">unit</span><span class="p">,</span> <span class="n">tmpl</span> <span class="o">=</span> <span class="n">TMPLS</span><span class="p">[</span><span class="n">bisect</span><span class="o">.</span><span class="n">bisect</span><span class="p">(</span><span class="n">BREAKPOINTS</span><span class="p">,</span> <span class="n">seconds_delta</span><span class="p">)]</span> <span class="c1"># bisect类似于index方法，要是不存在会选择数值最接近的索引</span>
    <span class="k">return</span> <span class="n">tmpl</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">units</span><span class="o">=</span><span class="n">seconds_delta</span> <span class="o">//</span> <span class="n">unit</span><span class="p">)</span>
</code></pre></div>
<h2 id="contextlib">contextlib<a class="headerlink" href="#contextlib" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">contextmanager</span><span class="p">,</span><span class="n">ContextDecorator</span>

<span class="c1"># contextmanager可以把一个函数变成一个上下文管理器，不需要自己去实现一个定义了__enter__和__exit__方法的类</span>
<span class="nd">@contextmanager</span>
<span class="k">def</span> <span class="nf">open_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;打开了文件</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">res_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">methods</span><span class="p">)</span>  <span class="c1"># __enter__方法 这里也可以是自己定义的类</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">res_file</span>    <span class="c1"># 相当于在__enter__方法里面返回self  yield后面为空的话就不用as了</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;有错误发生&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>  <span class="c1"># __exit__方法里的错误处理</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">res_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># __exit__</span>


<span class="k">with</span> <span class="n">open_file</span><span class="p">(</span><span class="s2">&quot;testvim.txt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
</code></pre></div>
<h2 id="读取大文件">读取大文件<a class="headerlink" href="#读取大文件" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="k">def</span> <span class="nf">digits_</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="n">block_size</span><span class="o">=</span><span class="mi">1024</span><span class="o">*</span><span class="mi">8</span><span class="p">):</span> <span class="c1"># 分块读取</span>
    <span class="n">_read</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">,</span> <span class="n">block_size</span><span class="p">)</span> <span class="c1"># 使用partial,也可以使用lambda:file.read(block_size)</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">(</span><span class="n">_read</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">):</span> <span class="c1"># 当读取完毕时退出</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
                <span class="k">yield</span> <span class="n">s</span> <span class="c1"># 使用yield</span>

<span class="k">def</span> <span class="nf">count_digits</span><span class="p">(</span><span class="n">fname</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;计算文件里包含多少个数字字符&quot;&quot;&quot;</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">digits_</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">file</span><span class="p">):</span>
            <span class="n">count</span><span class="o">+=</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">count</span>
</code></pre></div>
<h2 id="_exit__enter_">_<em>exit_</em>、_<em>enter_</em><a class="headerlink" href="#_exit__enter_" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1">#     def __enter__(self):</span>
<span class="c1">#         该方法将在进入上下文时调用</span>
<span class="c1">#         return self</span>

<span class="c1">#     def __exit__(self, exc_type, exc_val, exc_tb):</span>
<span class="c1">#         该方法将在退出上下文时调用</span>
<span class="c1">#         exc_type, exc_val, exc_tb 分别表示该上下文内抛出的异常类型、异常值、错误栈</span>
<span class="c1">#         __enter__()：主要执行一些环境准备工作，同时返回一资源对象。如果上下文管理器open(&quot;test.txt&quot;)的__enter__()函数返回一个文件对象。</span>
<span class="c1">#         __exit__()：完整形式为__exit__(type, value, traceback),这三个参数和调用sys.exec_info()函数返回值是一样的，分别为异常类型、异常信息和堆栈。如果*执行体语句*没有引发异常，则这三个参数均被设为None。否则，它们将包含上下文的异常信息。__exit__()方法返回True或False,分别指示被引发的异常有没有被处理，如果返回False，引发的异常将会被传递出上下文。如果__exit__()函数内部引发了异常，则会覆盖掉执行体的中引发的异常。处理异常时，不需要重新抛出异常，只需要返回False，with语句会检测__exit__()返回False来处理异常。</span>
</code></pre></div>
<h2 id="enum">enum<a class="headerlink" href="#enum" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">IntEnum</span>

<span class="k">class</span> <span class="nc">Test</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
    <span class="n">X</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">Y</span> <span class="o">=</span> <span class="mi">1</span>

<span class="nb">print</span><span class="p">(</span><span class="mi">2</span> <span class="o">==</span> <span class="n">Test</span><span class="o">.</span><span class="n">X</span><span class="p">)</span>
</code></pre></div>
<h2 id="pydantic数据验证">pydantic数据验证<a class="headerlink" href="#pydantic数据验证" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">conint</span><span class="p">,</span> <span class="n">ValidationError</span> 
<span class="c1"># pydantic主要功能就是作数据验证</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">List</span><span class="p">,</span> 
    <span class="n">Union</span><span class="p">,</span>
    <span class="n">Optional</span><span class="p">,</span>
    <span class="n">Dict</span>
<span class="p">)</span>

<span class="k">class</span> <span class="nc">Test</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">sex</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
    <span class="n">d</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">conint</span><span class="p">(</span><span class="n">ge</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">le</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">test</span> <span class="o">=</span> <span class="n">Test</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;wlb&#39;</span><span class="p">,</span> <span class="n">sex</span><span class="o">=</span><span class="s1">&#39;male&#39;</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;dict&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">},</span> <span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">dict</span><span class="p">(),</span> <span class="n">test</span><span class="o">.</span><span class="vm">__annotations__</span><span class="p">)</span>
    <span class="c1"># {&#39;name&#39;: &#39;wlb&#39;, &#39;sex&#39;: &#39;male&#39;, &#39;d&#39;: {&#39;dict&#39;: 1}, &#39;id&#39;: 1} {&#39;name&#39;: typing.Union[str, NoneType], &#39;sex&#39;: typing.Union[str, typing.List[str]], &#39;d&#39;: typing.Dict[str, int], &#39;id&#39;: &lt;class &#39;__main__.ConstrainedIntValue&#39;&gt;}</span>
<span class="k">except</span> <span class="n">ValidationError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;数据错误&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="islice">islice<a class="headerlink" href="#islice" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">islice</span>


<span class="k">def</span> <span class="nf">test</span><span class="p">():</span>
    <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">t</span>
        <span class="n">t</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">islice</span><span class="p">(</span><span class="n">test</span><span class="p">(),</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</code></pre></div>
<h2 id="_iter__next_">_<em>iter_</em>、_<em>next_</em><a class="headerlink" href="#_iter__next_" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Range7</span><span class="p">:</span> <span class="c1"># 可迭代类型 只需要实现__iter__即可</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">start</span><span class="p">,</span><span class="n">end</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">start</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">end</span>
    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Range7iterator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>



<span class="k">class</span> <span class="nc">Range7iterator</span><span class="p">:</span> <span class="c1">#这是迭代器,一般的迭代器只能调用一次</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">rangeobj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rangeobj</span> <span class="o">=</span> <span class="n">rangeobj</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cur</span> <span class="o">=</span> <span class="n">rangeobj</span><span class="o">.</span><span class="n">start</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">rangeobj</span><span class="o">.</span><span class="n">end</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">StopIteration</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_7</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cur</span><span class="p">):</span>
                <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cur</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">return</span> <span class="n">res</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cur</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">def</span> <span class="nf">is_7</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">num</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">num</span><span class="o">%</span><span class="mi">7</span><span class="o">==</span><span class="mi">0</span> <span class="ow">or</span> <span class="s2">&quot;7&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">Range7</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>

<span class="c1">#可迭代对象不一定是迭代器，但迭代器一定是可迭代对象</span>

<span class="c1"># 对可迭代对象使用 iter() 会返回迭代器，迭代器则会返回它自身</span>

<span class="c1"># 每个迭代器的被迭代过程是一次性的，可迭代对象则不一定</span>

<span class="c1"># 可迭代对象只需要实现 __iter__ 方法，而迭代器要额外实现 __next__ 方法</span>
</code></pre></div>
<h2 id="求字典的最大值">求字典的最大值<a class="headerlink" href="#求字典的最大值" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">prices</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;ACME&#39;</span><span class="p">:</span> <span class="mf">45.23</span><span class="p">,</span>
    <span class="s1">&#39;AAPL&#39;</span><span class="p">:</span> <span class="mf">612.78</span><span class="p">,</span>
    <span class="s1">&#39;IBM&#39;</span><span class="p">:</span> <span class="mf">205.55</span><span class="p">,</span>
    <span class="s1">&#39;HPQ&#39;</span><span class="p">:</span> <span class="mf">37.20</span><span class="p">,</span>
    <span class="s1">&#39;FB&#39;</span><span class="p">:</span> <span class="mf">10.75</span>
<span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">prices</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span><span class="n">prices</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">prices</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">k</span><span class="p">:</span><span class="n">prices</span><span class="p">[</span><span class="n">k</span><span class="p">]))</span>
</code></pre></div>
<h2 id="注意循环变量">注意循环变量<a class="headerlink" href="#注意循环变量" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">funcs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">):</span> <span class="c1"># 去掉x=x则出现[6,6,6,6,6,6] 在循环内部定义一个函数时, 如果该函数在其主体中使用了循环变量, 则闭包函数将与循环变量绑定, 而不是它的值. 因此, 所有的函数都是使用最后分配给变量的值来进行计算的.</span>
        <span class="k">return</span> <span class="n">x</span>
    <span class="n">funcs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">func</span><span class="p">())</span>

<span class="n">func_res</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="p">()</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">funcs</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">func_res</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">create_mult</span><span class="p">():</span>
    <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="p">):</span> <span class="c1"># 去掉i=i则全输出8，原因和上面一样</span>
            <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">i</span>
        <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">res</span>
<span class="k">for</span> <span class="n">cr</span> <span class="ow">in</span> <span class="n">create_mult</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">cr</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div>
<h2 id="空对象模式">空对象模式<a class="headerlink" href="#空对象模式" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">修改前</span>
<span class="kn">import</span> <span class="nn">decimal</span>

<span class="k">class</span> <span class="nc">CreateAccountError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Unable to create a account error&quot;&quot;&quot;</span>

<span class="k">class</span> <span class="nc">Account</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;一个虚拟的银行账号&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">balance</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="n">username</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">=</span> <span class="n">balance</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_string</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;从字符串初始化一个账号&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">username</span><span class="p">,</span> <span class="n">balance</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="n">balance</span> <span class="o">=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">balance</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CreateAccountError</span><span class="p">(</span><span class="s1">&#39;input must follow pattern &quot;</span><span class="si">{ACCOUNT_NAME}</span><span class="s1"> </span><span class="si">{BALANCE}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">balance</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CreateAccountError</span><span class="p">(</span><span class="s1">&#39;balance can not be negative&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span> <span class="n">balance</span><span class="o">=</span><span class="n">balance</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">caculate_total_balance</span><span class="p">(</span><span class="n">accounts_data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;计算所有账号的总余额</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">account_string</span> <span class="ow">in</span> <span class="n">accounts_data</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">Account</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">account_string</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">CreateAccountError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">user</span><span class="o">.</span><span class="n">balance</span>
    <span class="k">return</span> <span class="n">result</span>


<span class="n">accounts_data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;piglei 96.5&#39;</span><span class="p">,</span>
    <span class="s1">&#39;cotton 21&#39;</span><span class="p">,</span>
    <span class="s1">&#39;invalid_data&#39;</span><span class="p">,</span>
    <span class="s1">&#39;roland $invalid_balance&#39;</span><span class="p">,</span>
    <span class="s1">&#39;alfred -3&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">caculate_total_balance</span><span class="p">(</span><span class="n">accounts_data</span><span class="p">))</span>
</code></pre></div>
<h3 id="空对象模式简介">空对象模式简介<a class="headerlink" href="#空对象模式简介" title="Permanent link">&para;</a></h3>
<blockquote>
<p><strong>额外定义一个对象来表示None</strong>
</p>
</blockquote>
<h3 id="好处">好处<a class="headerlink" href="#好处" title="Permanent link">&para;</a></h3>
<ol>
<li>它可以加强系统的稳固性，能有有效地防止空指针报错对整个系统的影响，使系统更加稳定。</li>
<li>它能够实现对空对象情况的定制化的控制，能够掌握处理空对象的主动权。</li>
<li>它并不依靠Client来保证整个系统的稳定运行。</li>
<li>它通过isNone对==None的替换，显得更加优雅，更加易懂。</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">decimal</span>


<span class="k">class</span> <span class="nc">Account</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;一个虚拟的银行账号&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">balance</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="n">username</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">=</span> <span class="n">balance</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_string</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;从字符串初始化一个账号&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">username</span><span class="p">,</span> <span class="n">balance</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="n">balance</span> <span class="o">=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">balance</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="c1"># raise CreateAccountError(&#39;input must follow pattern &quot;{ACCOUNT_NAME} {BALANCE}&quot;&#39;)</span>
            <span class="k">return</span> <span class="n">NullAccount</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">balance</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">NullAccount</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span> <span class="n">balance</span><span class="o">=</span><span class="n">balance</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">caculate_total_balance</span><span class="p">(</span><span class="n">accounts_data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;计算所有账号的总余额</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">Account</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">balance</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">accounts_data</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">NullAccount</span><span class="p">:</span> <span class="c1"># 要返回的空对象</span>
    <span class="n">username</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>  <span class="c1"># 当发生错误时username的值</span>
    <span class="n">balance</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># 当发生错误时balance的值</span>

    <span class="k">def</span> <span class="nf">re_Null</span><span class="p">():</span>
        <span class="k">return</span> <span class="ne">NotImplementedError</span>


<span class="n">accounts_data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;piglei 96.5&#39;</span><span class="p">,</span>
    <span class="s1">&#39;cotton 21&#39;</span><span class="p">,</span>
    <span class="s1">&#39;invalid_data&#39;</span><span class="p">,</span>
    <span class="s1">&#39;roland $invalid_balance&#39;</span><span class="p">,</span>
    <span class="s1">&#39;alfred -3&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">caculate_total_balance</span><span class="p">(</span><span class="n">accounts_data</span><span class="p">))</span>
</code></pre></div>
<h2 id="pathlib">pathlib<a class="headerlink" href="#pathlib" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>


<span class="c1"># 把txt文件重命名为csv文件</span>
<span class="k">def</span> <span class="nf">unify_ext_with_pathlib</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">fpath</span> <span class="ow">in</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*.txt&quot;</span><span class="p">):</span>
        <span class="n">fpath</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">fpath</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="s2">&quot;.csv&quot;</span><span class="p">))</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;test_pathlib.py&quot;</span><span class="p">)</span>  <span class="c1"># Path类型可以使用/运算符</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;testvim.txt&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>  <span class="c1"># 直接读取文件内容</span>

<span class="c1"># .resolve() 取绝对路径</span>
<span class="c1"># with_name() 修改文件名 with_suffix()修改后缀名</span>
<span class="c1"># 把当前目录下的文件批量重命名</span>
<span class="c1"># import os</span>
<span class="c1"># from pathlib import Path</span>

<span class="c1"># p = Path(&quot;.&quot;)</span>

<span class="c1"># for filepath in p.glob(&quot;test_*.py&quot;):</span>
<span class="c1">#     name = filepath.with_name(str(filepath).replace(&quot;test_&quot;,&quot;&quot;))</span>
<span class="c1">#     filepath.rename(name)</span>
</code></pre></div>
<h2 id="单元测试">单元测试<a class="headerlink" href="#单元测试" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">say_hello</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;hello </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;hello world&quot;</span>


<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>


<span class="k">class</span> <span class="nc">sayhellotest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">nums</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">tearDown</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">test_sayhello</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="n">say_hello</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span><span class="s2">&quot;hello world&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_to_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="n">say_hello</span><span class="p">(</span><span class="s2">&quot;wlb&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span><span class="s2">&quot;hello wlb&quot;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</code></pre></div>
<h2 id="takewhile和dropwhile">takewhile和dropwhile<a class="headerlink" href="#takewhile和dropwhile" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">dropwhile</span><span class="p">,</span><span class="n">takewhile</span>
<span class="c1"># 你想遍历一个可迭代对象，但是它开始的某些元素你并不感兴趣，想跳过它们，用dropwhile</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;testvim.txt&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dropwhile</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">),</span><span class="n">fp</span><span class="p">):</span> <span class="c1"># 跳过前面#号开头的</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;testvim.txt&quot;</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">takewhile</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">),</span><span class="n">fp</span><span class="p">):</span> <span class="c1"># 遍历带#号开头的，遇到不是#号开头的就退出循环，可以当做break使用</span>
        <span class="c1"># 相当于 if not i.startwith(&quot;#&quot;): break</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</code></pre></div>
<h2 id="装饰器可以装饰方法">装饰器可以装饰方法<a class="headerlink" href="#装饰器可以装饰方法" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">wrapt</span> <span class="c1"># 为第三方库</span>

<span class="k">def</span> <span class="nf">provide_number</span><span class="p">(</span><span class="n">min_num</span><span class="p">,</span> <span class="n">max_num</span><span class="p">):</span>
    <span class="nd">@wrapt</span><span class="o">.</span><span class="n">decorator</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># 参数含义：</span>
        <span class="c1">#</span>
        <span class="c1"># - wrapped：被装饰的函数或类方法</span>
        <span class="c1"># - instance：</span>
        <span class="c1">#   - 如果被装饰者为普通类方法，该值为类实例</span>
        <span class="c1">#   - 如果被装饰者为 classmethod 类方法，该值为类</span>
        <span class="c1">#   - 如果被装饰者为类/函数/静态方法，该值为 None</span>
        <span class="c1">#</span>
        <span class="c1"># - args：调用时的位置参数（注意没有 * 符号）</span>
        <span class="c1"># - kwargs：调用时的关键字参数（注意没有 ** 符号）</span>
        <span class="c1">#</span>
        <span class="n">num</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">min_num</span><span class="p">,</span> <span class="n">max_num</span><span class="p">)</span>
        <span class="c1"># 无需关注 wrapped 是类方法或普通函数，直接在头部追加参数</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="n">num</span><span class="p">,)</span> <span class="o">+</span> <span class="n">args</span>
        <span class="k">return</span> <span class="n">wrapped</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>



<span class="nd">@provide_number</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">print_random_number</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
    <span class="nd">@provide_number</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">print_random_number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>

<span class="n">Foo</span><span class="p">()</span><span class="o">.</span><span class="n">print_random_number</span><span class="p">()</span>
<span class="n">print_random_number</span><span class="p">()</span>

<span class="c1"># 使用 wrapt 模块编写的装饰器，相比原来拥有下面这些优势：</span>

<span class="c1"># 嵌套层级少：使用 @wrapt.decorator 可以将两层嵌套减少为一层</span>
<span class="c1"># 更简单：处理位置与关键字参数时，可以忽略类实例等特殊情况</span>
<span class="c1"># 更灵活：针对 instance 值进行条件判断后，更容易让装饰器变得通用</span>
</code></pre></div>
<h2 id="__getattribute_"><em>__getattribute_</em><a class="headerlink" href="#__getattribute_" title="Permanent link">&para;</a></h2>
<p>____getattribute__仅在新式类中可用，重载__getattrbute__方法对类实例的每个属性访问都有效。
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ClassA</span><span class="p">:</span>

    <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span>

    <span class="k">def</span> <span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;__getattribute__&#39;</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">ClassA</span><span class="p">()</span>
    <span class="c1"># 使用实例直接访问存在的类属性时,会调用__getattribute__方法</span>
    <span class="c1"># 输出结果 __getattribute__</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
    <span class="c1"># 使用实例直接访问实例存在的实例属性时,会调用__getattribute__方法</span>
    <span class="c1"># 输出结果 __getattribute__</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
    <span class="c1"># 使用实例直接访问实例不存在的实例属性时,也会调用__getattribute__方法</span>
    <span class="c1"># 输出结果 __getattribute__</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
</code></pre></div></p>
<p>由于__getattr__只针对未定义属性的调用，所以它可以在自己的代码中自由地获取其他属性，而__getattribute__针对所有的属性运行，因此要十分注意避免在访问其他属性时，再次调用自身的递归循环。</p>
<p>当在__getattribute__代码块中，再次执行属性的获取操作时，会再次触发__getattribute__方法的调用，代码将会陷入无限递归，直到Python递归深度限制（重载__setter__方法也会有这个问题）。</p>
<p>示例代码（无限递归）：
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ClassA</span><span class="p">:</span>

    <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span>

    <span class="k">def</span> <span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;__getattribute__&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">item</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">ClassA</span><span class="p">()</span>
    <span class="n">a</span><span class="o">.</span><span class="n">x</span>
</code></pre></div>
运行结果引发异常。</p>
<p>同时，也没办法通过从__dict__取值的方式来避免无限递归</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ClassA</span><span class="p">:</span>

    <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span>

    <span class="k">def</span> <span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">ClassA</span><span class="p">()</span>
    <span class="c1"># 无限递归</span>
    <span class="n">a</span><span class="o">.</span><span class="n">x</span>
</code></pre></div>
<p>为了避免无限递归，应该把获取属性的方法指向一个更高的超类，例如object（因为__getattribute__只在新式类中可用，而新式类所有的类都显式或隐式地继承自object，所以对于新式类来说，object是所有新式类的超类）。</p>
<p>修改代码（避免无限递归循环）：
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ClassA</span><span class="p">:</span>

    <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span>

    <span class="k">def</span> <span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;__getattribute__&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">ClassA</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
</code></pre></div>
结果：
<div class="highlight"><pre><span></span><code>__getattribute__
a
</code></pre></div></p>
<h2 id="__getattr__setattr_"><em>__getattr_</em>、_<em>setattr_</em><a class="headerlink" href="#__getattr__setattr_" title="Permanent link">&para;</a></h2>
<p>区别 <strong>getattribute</strong> 和 <strong>getattr</strong>，前者是任何通过 x.y 访问实例的属性时都会调用的特殊方法，而后者则是在正常访问形式下无法找到的情况下才会被调用。</p>
<p><div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Chain</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_path</span> <span class="o">=</span> <span class="n">path</span>

    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Chain</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">,</span> <span class="n">path</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span>

    <span class="k">def</span> <span class="nf">users</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Chain</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="si">}</span><span class="s2">/users/</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="fm">__repr__</span> <span class="o">=</span> <span class="fm">__str__</span>

<span class="n">chain</span> <span class="o">=</span> <span class="n">Chain</span><span class="p">(</span><span class="s2">&quot;vllbc&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="c1"># out: vllbc/x/x/x/x/x</span>
</code></pre></div>
另外，当同时定义__getattribute__和__getattr__时，<strong>getattr__方法不会再被调用，除非显示调用__getattr__方法或引发AttributeError异常。可以在__getattribute__中抛出异常来调用__getattr</strong>。</p>
<h2 id="_getitem_">_<em>getitem_</em><a class="headerlink" href="#_getitem_" title="Permanent link">&para;</a></h2>
<h2 id="元类">元类<a class="headerlink" href="#元类" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    元类就是控制类的创建的类</span>
<span class="sd">&#39;&#39;&#39;</span>


<span class="k">class</span> <span class="nc">ModelMetaclass</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;Model&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">type</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="n">attrs</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;found model </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">maps</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">attrs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Field</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found mapping </span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2"> ==&gt; </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">maps</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">maps</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;__mappings__&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">maps</span>
        <span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;__table__&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">return</span> <span class="nb">type</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="n">attrs</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Field</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">column_type</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">column_type</span> <span class="o">=</span> <span class="n">column_type</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">:</span><span class="si">%s</span><span class="s1">&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">StringField</span><span class="p">(</span><span class="n">Field</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">column_type</span><span class="o">=</span><span class="s1">&#39;TXT&#39;</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">column_type</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">IntegerField</span><span class="p">(</span><span class="n">Field</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">column_type</span><span class="o">=</span><span class="s1">&#39;INT&#39;</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">column_type</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="nb">dict</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">ModelMetaclass</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&#39;Model&#39; object has no attribute &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">key</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__mappings__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
            <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;?&#39;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="n">sql</span> <span class="o">=</span> <span class="s1">&#39;insert into </span><span class="si">%s</span><span class="s1"> (</span><span class="si">%s</span><span class="s1">) values (</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__table__</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">fields</span><span class="p">),</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">params</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;SQL: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">sql</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ARGS: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">args</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># 定义类的属性到列的映射：</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">IntegerField</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">)</span>


<span class="c1"># 创建一个实例：</span>
<span class="n">u</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">12345</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Michael&#39;</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="s1">&#39;test@orm.org&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;my-pwd&#39;</span><span class="p">)</span>
<span class="c1"># 保存到数据库：</span>
<span class="n">u</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</code></pre></div>
<h2 id="关于hash">关于hash<a class="headerlink" href="#关于hash" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1"># set中的元素要求必须是可哈希的，但set本身是不可哈希的</span>
<span class="n">a</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="n">a</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> <span class="c1"># 会报错，因为列表是不可哈希的</span>
<span class="nb">hash</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>  <span class="c1"># 会报错，因为set本身是不可哈希的</span>
<span class="n">b</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> <span class="c1"># 元组本身是可哈希的</span>
<span class="n">c</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]])</span> <span class="c1"># 如果元组里面有不可哈希的元素 那么整个元组也是不可哈希的了</span>
<span class="c1"># 在类中定义__hash__方法就可以变成可哈希的类，注意避免返回可能重复的hash值</span>
<span class="k">class</span> <span class="nc">My_Hash</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">111</span>
<span class="c1"># 还有简便的方法就是使用dataclass类，可以省时省力，本博客也有介绍。</span>
</code></pre></div>
<h2 id="处理列表越界">处理列表越界<a class="headerlink" href="#处理列表越界" title="Permanent link">&para;</a></h2>
<p>假如你请求的不是某一个元素，而是一段范围的切片。那么无论你指定的范围是否有效，程序都只会返回一个空列表 []，而不会抛出任何错误。
了解了这点后，你会发现像下面这种边界处理代码根本没有必要：
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">sum_list</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">limit</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;对列表的前 limit 个元素求和</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># 如果 limit 过大，设置为数组长度避免越界</span>
    <span class="k">if</span> <span class="n">limit</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">):</span>
        <span class="n">limit</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">l</span><span class="p">[:</span><span class="n">limit</span><span class="p">])</span>
</code></pre></div>
因为做切片不会抛出任何错误，所以不需要判断 limit 是否超出范围，直接做 sum 操作即可：</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">sum_list</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">limit</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">l</span><span class="p">[:</span><span class="n">limit</span><span class="p">])</span>
</code></pre></div>
<h2 id="or操作符">or操作符<a class="headerlink" href="#or操作符" title="Permanent link">&para;</a></h2>
<p>在很多场景下，我们可以利用 or 的特点来简化一些边界处理逻辑。看看下面这个例子：
<div class="highlight"><pre><span></span><code><span class="n">context</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c1"># 仅当 extra_context 不为 None 时，将其追加进 context 中</span>
<span class="k">if</span> <span class="n">extra_context</span><span class="p">:</span>
    <span class="n">context</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">extra_context</span><span class="p">)</span>
<span class="c1"># 等同于</span>
<span class="n">context</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">extra_context</span> <span class="ow">or</span> <span class="p">{})</span>
</code></pre></div>
因为 a or b or c or &hellip; 这样的表达式，会返回这些变量里第一个布尔值为真的值，直到最后一个为止。
含义为当extra_context为None时，会返回{}</p>
<h2 id="字典的键">字典的键<a class="headerlink" href="#字典的键" title="Permanent link">&para;</a></h2>
<p>在python里面，Python 字典通过检查键值是否相等和比较哈希值来确定两个键是否相同.具有相同值的不可变对象(可哈希)在Python中始终具有相同的哈希值。
<strong>注意:</strong> 具有不同值的对象也可能具有相同的哈希值（哈希冲突）。
下面这个例子
<div class="highlight"><pre><span></span><code><span class="n">some_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">some_dict</span><span class="p">[</span><span class="mf">5.5</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Ruby&quot;</span>
<span class="n">some_dict</span><span class="p">[</span><span class="mf">5.0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;JavaScript&quot;</span>
<span class="n">some_dict</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Python&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">some_dict</span><span class="p">[</span><span class="mf">5.5</span><span class="p">]</span>
<span class="s2">&quot;Ruby&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_dict</span><span class="p">[</span><span class="mf">5.0</span><span class="p">]</span>
<span class="s2">&quot;Python&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_dict</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="s2">&quot;Python&quot;</span>
</code></pre></div>
因为Python将 <code>5</code> 和 <code>5.0</code> 识别为 <code>some_dict</code> 的同一个键, 所以已有值 &ldquo;JavaScript&rdquo; 就被 &ldquo;Python&rdquo; 覆盖了.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../asyncio/" class="md-footer__link md-footer__link--prev" aria-label="Previous: asyncio模块异步编程" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              asyncio模块异步编程
            </div>
          </div>
        </a>
      
      
        
        <a href="../WTF/" class="md-footer__link md-footer__link--next" aria-label="Next: WTFpython学习" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              WTFpython学习
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.b1047164.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>